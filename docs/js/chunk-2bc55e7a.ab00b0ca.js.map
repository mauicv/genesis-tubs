{"version":3,"sources":["webpack:///./node_modules/genesis-tubs-engine/src/Engine/Constraints/Joint.js","webpack:///./node_modules/genesis-tubs-engine/src/Engine/Constraints/AngleLink.js","webpack:///./node_modules/genesis-tubs-engine/src/Engine/Constraints/Link.js","webpack:///./node_modules/genesis-tubs-engine/src/Engine/Construction/SL.js","webpack:///./node_modules/genesis-tubs-engine/src/Engine/Structures/Primative.js","webpack:///./node_modules/genesis-tubs-engine/src/Engine/Structures/RelPoint.js","webpack:///./node_modules/genesis-tubs-engine/src/Engine/Features/Feature.js","webpack:///./node_modules/genesis-tubs-engine/src/Engine/Structures/Point.js","webpack:///./node_modules/genesis-tubs-engine/src/index.js","webpack:///./node_modules/genesis-tubs-engine/src/Engine/Structures/Particle.js","webpack:///./node_modules/genesis-tubs-engine/src/Engine/Features/featureInstances.js","webpack:///./node_modules/genesis-tubs-engine/src/Engine/Laws/Law.js","webpack:///./node_modules/genesis-tubs-engine/src/Engine/Structures/Structure.js","webpack:///./node_modules/genesis-tubs-engine/src/Engine/Constraints/Constraint.js","webpack:///./node_modules/genesis-tubs-engine/src/Engine/Structures sync ^\\.\\/.*$","webpack:///./node_modules/genesis-tubs-engine/src/Engine/Constraints/Glue.js","webpack:///./node_modules/genesis-tubs-engine/src/Engine/Construction/Builder.js","webpack:///./node_modules/genesis-tubs-engine/src/Engine/Constraints/Beam.js","webpack:///./node_modules/genesis-tubs-engine/src/Engine/Structures/CollisionResponse.js","webpack:///./node_modules/genesis-tubs-engine/src/Engine/Structures/ConvexSet.js","webpack:///./node_modules/genesis-tubs-engine/src/Engine/General sync ^\\.\\/.*$","webpack:///./node_modules/genesis-tubs-engine/src/Engine/Construction sync ^\\.\\/.*$","webpack:///./node_modules/genesis-tubs-engine/src/Engine/Laws sync ^\\.\\/.*$","webpack:///./node_modules/genesis-tubs-engine/src/Engine/Structures/CollisionChecker.js","webpack:///./node_modules/genesis-tubs-engine/src/Engine/Constraints sync ^\\.\\/.*$","webpack:///./node_modules/genesis-tubs-engine/src/moduleHandler.js","webpack:///./node_modules/genesis-tubs-engine/src/Engine/Features sync ^\\.\\/.*$","webpack:///./node_modules/genesis-tubs-engine/src/Engine/Laws/lawInstances.js","webpack:///./node_modules/genesis-tubs-engine/src/Engine/Structures/Line.js","webpack:///./node_modules/genesis-tubs-engine/src/Engine/SpaceTime.js","webpack:///./node_modules/genesis-tubs-engine/src/Engine/General/GeneralMethods.js","webpack:///./node_modules/genesis-tubs-engine/src/Engine sync ^\\.\\/.*$"],"names":["modules","Link","getModule","constraint","module","exports","link1","link2","degOfFreedom1","degOfFreedom2","index","super","this","from","belongsTo","to","zeroLink","angle","getAngle","rigidityConstant","intersectAngleTo","deg","rotAroundToBy","length","rotAroundFromBy","active","alive","effect","bend","gm","clockwiseAngleBetween","vector","neg","visable","size","x","springConstant","data","dot","minus","dev","perp","len","perpDistance","horiDistance","link","lenProduct","getLength","dotProduct","ratio","Math","acos","PI","v","rot","setLocation","add","s","mult","update_x_xd","d","norm","delta","kill","fs","save","enviro","fileName","Data","JSON","stringify","writeFile","err","console","log","load","loc","window","location","pathname","dir","substring","lastIndexOf","Data_string","readFileSync","parse","builder","Laws","build","points","forEach","point","type","addPoint","convexSets","convexSet","convexSetPoints","pointIndices","map","pointIndex","environment","addConvexSet","constraints","convexSet1","convexSet2","addGlueBetweenConvexSets","addJointBetweenConvexSets","addBeam","forceUpperBound","forceLowerBound","compLowerBound","resistance","structures","structure","elements","addStructure","laws","law","relPoints","addRelPoint","anchor","graphics","line","addLine","buildOrderArrays","loadGTBFormat","parseGTBFormat","obj_dict","Object","values","filter","obj","uuid","lines","line_key","push","convexSetPair","set","joints","includes","glues","sets","links","name","enviroment","radius","primative","slice","xRelToAnchor","vectorNorm","perpVectorNorm","xd","ConvexSet","Particle","cc","structure1","structure2","depth","report","reports","CheckBoundingRect","thisElement","thatElement","convexTest","xToB","stuff","hasBoundingRect","pos","center","r","x_old","pointCopy","names","particle","cr","Feature","mass","interaction","checkProximityTo","responseWithStickyRisistance","particleResponse","earthed","multiScan","classicalResponse","resistantMass","responseWithRisistance","stickyResistantMass","exploding","fragile","element","glue","off","features","feature","deleteStructure","applyLaw","featureA","featureB","indices","fix","xAv","findCenter","rNew","collisionPair","nudge","force","random","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","resolve","linkA","linkB","fragilityConstant","sl","pl","Point","Joint","Beam","AngleLink","Glue","Structure","Line","RelPoint","LawInstances","environmentName","finite","gravity","airResistance","filename","addEnvironment","newPoint","xList","newRelPoint","y","newLine","newParticle","newLink","newBeam","newGlue","newAngleLink","linkPair1","linkPair2","newJoint","sizeOfConvexSet","convexSetLinks","convexSetAngleLinks","i","nextLink","addVisableLink","M","addAngleLink","nextConvexSet","minSum","temp","addGlueBetweenLinkPairs","indexPair","min","index1","index2","numLinks1","numLinks2","pair1","pair2","addJointBetweenLinkPairs","newStructure","rect","findBoundingRect","concat","namedSet","numPoints","numSets","j","thatLaw","thisLaw","find","removeStructure","structureToRemove","particlesToRemove","ele","c","p","convexSetsToRemove","linksToRemove","reduce","acc","cur","jointsToRemove","gluesToRemove","angleLinksToRemove","angleLinks","pointsToRemove","True","value","recalibrateIndexing","structureA","structureB","splice","constraintsRunOrder","k","components","n","strength","vel","lifeLength","at","connectedDensity","pList","floor","addParticle","N","numOfLinks","boolInLinks","age","time","realCenter","relativeCenter","localRate","globalRate","totalRate","BOUNDS","wallCollisionTest","A","leftWall","rightWall","upWall","downWall","item","update_x_old_xd","collisionReport","point1","point2","colVector","abs","z","d_2","normal","d_1","upperBound","lowerBound","SCR","vx","vy","vz","v_incident","vDiff","destroy","addExplodeStucture","tan","stickyness","fixAntiClockwiseOrientaion","numLinks","tempLinks","xInB","reverseOrient","setStatic","joint","MinMax","getIntListBounds","angleLink","W_max","pointInB","edgesInA","wReport","edge","collision","Xgivenw","pointsInB","edgeInA","eReport","XgivenW","jointTest","B","shuffleStart","report1","report2","d_max","Law","effects","applyToAllPoints","applyToStructures","bowl","slope","elementCenter","vect","dist","boundary","teleportElement","teleportConvexSet","teleportParticle","move","update_x","l","thisStructure","thisIndex","thatStructure","thatIndex","update_v","interactionEffects","step","constraintEffects","toCenter","shiftScene","sigma","shift_mod","vectPos","sign","sqrt","multVec","mod","m","cos","sin","w","angleBetween","everySecond","list","newList","ceil","shuffle","a","aNew","max","arr","undefined","p1","p2","p3","p4","t1Top","t2Top","denom","intersection","t1","t2"],"mappings":"qGAAA,MAAMA,EAAU,EAAQ,QAElBC,GADKD,EAAQE,UAAU,kBAChBF,EAAQE,UAAU,SACzBC,EAAaH,EAAQE,UAAU,cAErCE,EAAOC,QAAQ,cAAoBF,EACjC,YAAYG,EAAMC,EAAMC,EAAcC,EAAcC,GAGlDC,OAAM,GAAK,EAAM,QAAQD,GACzBE,KAAKN,MAAMA,EACXM,KAAKL,MAAMA,EAEXK,KAAKJ,cAAcA,EACnBI,KAAKH,cAAcA,EAEnBG,KAAKC,KAAKP,EAAMQ,UAChBF,KAAKG,GAAGR,EAAMO,UAEdF,KAAKI,SAAS,IAAIf,EAAKK,EAAMS,GAAGR,EAAMQ,IAAG,GAAK,GAC9CH,KAAKK,MAAML,KAAKM,WAChBN,KAAKO,iBAAiB,GAGxB,WACE,OAAOP,KAAKL,MAAMa,iBAAiBR,KAAKN,OAG1C,KAAKe,GACHT,KAAKN,MAAMgB,cAAcD,GAAKT,KAAKL,MAAMgB,QAAQX,KAAKN,MAAMiB,OAAOX,KAAKL,MAAMgB,UAC9EX,KAAKN,MAAMkB,gBAAgBH,GAAKT,KAAKL,MAAMgB,QAAQX,KAAKN,MAAMiB,OAAOX,KAAKL,MAAMgB,UAChFX,KAAKL,MAAMe,eAAeD,GAAKT,KAAKN,MAAMiB,QAAQX,KAAKN,MAAMiB,OAAOX,KAAKL,MAAMgB,UAC/EX,KAAKL,MAAMiB,iBAAiBH,GAAKT,KAAKN,MAAMiB,QAAQX,KAAKN,MAAMiB,OAAOX,KAAKL,MAAMgB,UAGnF,SACKX,KAAKa,QAAQb,KAAKc,QACnBd,KAAKI,SAASW,SACdf,KAAKgB,KAAKhB,KAAKO,kBAAkBP,KAAKM,WAAWN,KAAKK,Y,uBCtC5D,MAAMjB,EAAU,EAAQ,QAClB6B,EAAK7B,EAAQE,UAAU,kBAEvBC,GADOH,EAAQE,UAAU,QACZF,EAAQE,UAAU,eAGrCE,EAAOC,QAAQ,cAAwBF,EACrC,YAAYG,EAAMC,EAAMG,GACtBC,OAAM,GAAK,EAAM,YAAYD,GAC7BE,KAAKN,MAAMA,EACXM,KAAKL,MAAMA,EAEXK,KAAKK,MAAML,KAAKM,WAChBN,KAAKO,iBAAiB,GAGxB,WACE,OAAOU,EAAGC,sBAAsBlB,KAAKN,MAAMyB,SAASF,EAAGG,IAAIpB,KAAKL,MAAMwB,WAGxE,KAAKV,GACHT,KAAKN,MAAMgB,cAAcD,GAAKT,KAAKL,MAAMgB,QAAQX,KAAKN,MAAMiB,OAAOX,KAAKL,MAAMgB,UAC9EX,KAAKN,MAAMkB,gBAAgBH,GAAKT,KAAKL,MAAMgB,QAAQX,KAAKN,MAAMiB,OAAOX,KAAKL,MAAMgB,UAChFX,KAAKL,MAAMe,eAAeD,GAAKT,KAAKN,MAAMiB,QAAQX,KAAKN,MAAMiB,OAAOX,KAAKL,MAAMgB,UAC/EX,KAAKL,MAAMiB,iBAAiBH,GAAKT,KAAKN,MAAMiB,QAAQX,KAAKN,MAAMiB,OAAOX,KAAKL,MAAMgB,UAGnF,SACKX,KAAKa,QAAQb,KAAKc,OACnBd,KAAKgB,KAAKhB,KAAKO,kBAAkBP,KAAKM,WAAWN,KAAKK,W,uBC7B5D,MAAMjB,EAAU,EAAQ,QAClB6B,EAAK7B,EAAQE,UAAU,kBACvBC,EAAaH,EAAQE,UAAU,cAErCE,EAAOC,QAAS,cAAmBF,EACjC,YAAYU,EAAKE,EAAGU,EAAOQ,EAAQvB,GACjCC,MAAMc,EAAOQ,EAAQ,OAAOvB,GAE5BE,KAAKC,KAAKA,EACVD,KAAKG,GAAGA,EAERH,KAAKW,OAAOM,EAAGK,KAAKrB,EAAKsB,EAAEpB,EAAGoB,GAC9BvB,KAAKwB,eAAe,IAGtB,SACE,IAAIC,EAAK,CACP,MAAQzB,KAAKF,OAEf,OAAO2B,EAGT,aAAaF,GACX,OAAON,EAAGS,IAAIT,EAAGU,MAAMJ,EAAEvB,KAAKC,KAAKsB,GAAGN,EAAGW,IAAIX,EAAGY,KAAKZ,EAAGU,MAAM3B,KAAKG,GAAGoB,EAAEvB,KAAKC,KAAKsB,IAAIvB,KAAKW,SAG7F,aAAaY,GACX,OAAON,EAAGS,IAAIT,EAAGU,MAAMJ,EAAEvB,KAAKC,KAAKsB,GAAGN,EAAGW,IAAIX,EAAGU,MAAM3B,KAAKG,GAAGoB,EAAEvB,KAAKC,KAAKsB,GAAGvB,KAAKW,SAGpF,aAAaY,GACX,OAAON,EAAGa,IAAI9B,KAAK+B,aAAaR,GAAGvB,KAAKgC,aAAaT,IAGvD,iBAAiBU,GACf,IAAIC,EAAWlC,KAAKmC,YAAYF,EAAKE,YACjCC,EAAYnB,EAAGS,IAAIT,EAAGU,MAAMM,EAAK9B,GAAGoB,EAAEU,EAAKhC,KAAKsB,GAAGN,EAAGU,MAAM3B,KAAKG,GAAGoB,EAAEvB,KAAKC,KAAKsB,IAChFc,EAAMD,EAAWF,EAUrB,OANGG,EAAM,EACPA,EAAM,EACCA,GAAO,IACdA,GAAO,GAGNrC,KAAK+B,aAAaE,EAAKhC,KAAKsB,GAAG,EACzBe,KAAKC,KAAKF,GAEV,EAAEC,KAAKE,GAAGF,KAAKC,KAAKF,GAI/B,aACE,OAAOpB,EAAGW,IAAIX,EAAGU,MAAM3B,KAAKC,KAAKsB,EAAEvB,KAAKG,GAAGoB,GAAGvB,KAAKW,QAGrD,SACE,OAAOM,EAAGU,MAAM3B,KAAKG,GAAGoB,EAAEvB,KAAKC,KAAKsB,GAGtC,iBACE,OAAON,EAAGW,IAAIX,EAAGY,KAAKZ,EAAGU,MAAM3B,KAAKC,KAAKsB,EAAEvB,KAAKG,GAAGoB,IAAIvB,KAAKW,QAG9D,gBAAgBF,GACd,IAAIgC,EAAExB,EAAGyB,IAAIjC,EAAIQ,EAAGU,MAAM3B,KAAKG,GAAGoB,EAAEvB,KAAKC,KAAKsB,IAC9CvB,KAAKG,GAAGwC,YAAY1B,EAAG2B,IAAI5C,KAAKC,KAAKsB,EAAEkB,IAGzC,cAAchC,GACZ,IAAIgC,EAAExB,EAAGyB,IAAIjC,EAAIQ,EAAGU,MAAM3B,KAAKC,KAAKsB,EAAEvB,KAAKG,GAAGoB,IAC9CvB,KAAKC,KAAK0C,YAAY1B,EAAG2B,IAAI5C,KAAKG,GAAGoB,EAAEkB,IAGzC,SACE,GAAGzC,KAAKa,QAAQb,KAAKc,MAAM,CACzB,IAAI+B,EAAE5B,EAAGU,MAAM3B,KAAKG,GAAGoB,EAAEvB,KAAKC,KAAKsB,GAC/Ba,EAAWnB,EAAGS,IAAImB,EAAEA,GACrBT,EAAW,IACZS,EAAE5B,EAAG6B,KAAKD,EAAE,GAAK7C,KAAKW,OAAOX,KAAKW,QAAQyB,EAAWpC,KAAKW,OAAOX,KAAKW,SACtEX,KAAKC,KAAK8C,YAAYF,GACtB7C,KAAKG,GAAG4C,YAAY9B,EAAGG,IAAIyB,MAKjC,gBACE,IAAIA,EAAE5B,EAAGU,MAAM3B,KAAKG,GAAGoB,EAAEvB,KAAKC,KAAKsB,GAC/ByB,EAAE,IAAKhD,KAAKW,OAAOM,EAAGa,IAAIe,IAE9B,OADAA,EAAE5B,EAAG6B,KAAK7B,EAAGgC,KAAKJ,GAAGG,GACd,CAACA,EAAEH,GAGZ,eAAeA,GACb7C,KAAKC,KAAK8C,YAAY9B,EAAGG,IAAIyB,IAC7B7C,KAAKG,GAAG4C,YAAYF,GAGtB,YACE,GAAG7C,KAAKW,OAAO,EAAE,CACf,IAAIuC,EAAMjC,EAAGU,MAAM3B,KAAKC,KAAKsB,EAAEvB,KAAKG,GAAGoB,GACvC,MAAO,IAAKvB,KAAKW,OAAOX,KAAKW,OAAOM,EAAGS,IAAIwB,EAAMA,IAAQlD,KAAKW,OAE9D,OAAOM,EAAGK,KAAKtB,KAAKC,KAAKsB,EAAEvB,KAAKG,GAAGoB,GAIvC,YACEvB,KAAKW,OAAOM,EAAGK,KAAKtB,KAAKC,KAAKsB,EAAEvB,KAAKG,GAAGoB,GAG1C,OACEvB,KAAKC,KAAKkD,OACVnD,KAAKG,GAAGgD,OACRnD,KAAKc,OAAM,K,uBCpHf,MAAM1B,EAAU,EAAQ,QAElBgE,EAAK,EAAQ,QAGV5D,EAAOC,QAAU,CACxB4D,KAAM,SAASC,EAAOC,GACpB,IAAIC,EAAOC,KAAKC,UAAUJ,EAAOC,GACjCH,EAAGO,UAAUJ,EAAUC,EAAOI,IAE9B,GAAIA,EAAK,MAAMA,EAGfC,QAAQC,IAAI,kBAIdC,KAAM,SAASR,GACb,IAAIS,EAAMC,OAAOC,SAASC,SACtBC,EAAMJ,EAAIK,UAAU,EAAGL,EAAIM,YAAY,MAChC,IAAPF,IAAYA,KAAOA,MACvB,IAAIG,EAAcnB,EAAGoB,gBAAgBJ,IAAMb,IAAa,QACxD,OAAOvD,KAAKyE,MAAMF,IAGpBE,MAAO,SAASF,GACHnF,EAAQE,UAAU,aAA7B,MACMoF,EAAUtF,EAAQE,UAAU,WAE5BqF,GADWvF,EAAQE,UAAU,oBACtBF,EAAQE,UAAU,iBAmD/B,OAlDAmC,KAAOgC,KAAKgB,MAAMF,GAClBK,MAAQ,IAAIF,EAEZjD,KAAKoD,OAAOC,SAAQ,SAASC,GACZ,SAAZA,EAAMC,MACPJ,MAAMK,SAASF,EAAMxD,MAIzBE,KAAKyD,WAAWJ,SAAQ,SAASK,GAC/B,IAAIC,EAAgBD,EAAUE,aAAaC,IAAIC,GAAYX,MAAMY,YAAYX,OAAOU,IACpFX,MAAMa,aAAaL,MAIrB3D,KAAKiE,YAAYZ,SAAQ,SAASvF,GAC/B,GAAoB,QAAjBA,EAAWyF,KAAa,CACzB,IAAIW,EAAWf,MAAMY,YAAYN,WAAW3F,EAAWU,MACnD2F,EAAWhB,MAAMY,YAAYN,WAAW3F,EAAWY,IACvDyE,MAAMiB,yBAAyBF,EAAWC,QACtC,GAAoB,SAAjBrG,EAAWyF,KAAc,CAC5BW,EAAWf,MAAMY,YAAYN,WAAW3F,EAAWU,MACnD2F,EAAWhB,MAAMY,YAAYN,WAAW3F,EAAWY,IACvDyE,MAAMkB,0BAA0BH,EAAWC,OACnB,QAAjBrG,EAAWyF,MAClBJ,MAAMmB,QAAQnB,MAAMY,YAAYX,OAAOtF,EAAWU,MAAM2E,MAAMY,YAAYX,OAAOtF,EAAWY,IACxFZ,EAAWyG,gBAAgBzG,EAAW0G,gBACtC1G,EAAW2G,eAAe3G,EAAW4G,eAI9C1E,KAAK2E,WAAWtB,SAAQ,SAASuB,GAC/B,IAAIC,EAASD,EAAUC,SAAShB,IAAIxF,GAAO8E,MAAMY,YAAYN,WAAWpF,IACvD8E,MAAM2B,aAAaD,EAAS,OAG/C7E,KAAK+E,KAAK1B,SAAQ,SAAS2B,GACzB7B,MAAMY,YAAYgB,KAAKC,GAAK9B,EAAK8B,MAGnChF,KAAKiF,UAAU5B,SAAQ,SAASC,GAC5BH,MAAM+B,YAAY5B,EAAMxD,EAAEqD,MAAMY,YAAYE,YAAYX,EAAM6B,YAGlEnF,KAAKoF,SAAS/B,SAAQ,SAASgC,GAC7BlC,MAAMmC,QAAQnC,MAAMY,YAAYkB,UAAUI,EAAK7G,MAAM2E,MAAMY,YAAYkB,UAAUI,EAAK3G,QAGxFyE,MAAMoC,mBAECpC,MAAMY,aAGfyB,cAAe,SAAS1D,GACtB,IAAIS,EAAMC,OAAOC,SAASC,SACtBC,EAAMJ,EAAIK,UAAU,EAAGL,EAAIM,YAAY,MAChC,IAAPF,IAAYA,KAAOA,MACvB,IAAIG,EAAcnB,EAAGoB,gBAAgBJ,IAAMb,IAAa,QACxD,OAAOvD,KAAKkH,eAAe3C,IAG7B,eAAeA,GACFnF,EAAQE,UAAU,aAA7B,MACMoF,EAAUtF,EAAQE,UAAU,WACjBF,EAAQE,UAAU,oBACtBF,EAAQE,UAAU,gBAC/BmC,KAAOgC,KAAKgB,MAAMF,GAClBK,MAAQ,IAAIF,EACZ,IAAIyC,EAAW,GAEfC,OAAOC,OAAO5F,MACX6F,OAAQC,GAAkB,SAAZA,EAAIvC,MAClBF,QAASyC,GAAMJ,EAASI,EAAIC,MAAQ5C,MAAMK,SAASsC,EAAIhG,IAE1D,IAAI2D,EAAa,GA4DjB,OA3DAkC,OAAOC,OAAO5F,MACX6F,OAAQC,GAAkB,aAAZA,EAAIvC,MAClBF,QAASyC,IACR,IAAInC,EAAkBmC,EAAIE,MACvBnC,IAAIoC,GAAUjG,KAAKiG,IACnBpC,IAAIwB,GAAMK,EAASL,EAAK7G,OACvBkF,EAAYP,MAAMa,aAAaL,GACnC+B,EAASI,EAAIC,MAAQrC,EACrBD,EAAWyC,KAAKJ,KAGpBH,OAAOC,OAAO5F,MACX6F,OAAQC,GAAkB,QAAZA,EAAIvC,MAClBF,QAASyC,IACR,IAAItH,EAAOkH,EAASI,EAAItH,MACpBE,EAAKgH,EAASI,EAAIpH,IACtBgH,EAASI,EAAIC,MAAQ5C,MAAMmB,QAAQ9F,EAAME,EAAI,KAAM,KAAO,QAG9DiH,OAAOC,OAAO5F,MACX6F,OAAQC,GAAkB,SAAZA,EAAIvC,MAClBF,QAASyC,IACR,IAAIK,EAAgB1C,EACjBoC,OAAOO,GAAKA,EAAIC,OAAOC,SAASR,EAAIC,OACpClC,IAAIuC,GAAKV,EAASU,EAAIL,OACzBL,EAASI,EAAIC,MAAQ5C,MAAMkB,6BAA6B8B,KAG5DR,OAAOC,OAAO5F,MACX6F,OAAQC,GAAkB,QAAZA,EAAIvC,MAClBF,QAAQyC,IACP,IAAIK,EAAgB1C,EACjBoC,OAAOO,GAAKA,EAAIG,MAAMD,SAASR,EAAIC,OACnClC,IAAIuC,GAAKV,EAASU,EAAIL,OACzB5C,MAAMiB,4BAA4B+B,KAGtCR,OAAOC,OAAO5F,MACX6F,OAAQC,GAAkB,aAAZA,EAAIvC,MAClBF,QAAQyC,IACP,IAAIrC,EAAaqC,EAAIU,KAClB3C,IAAIuC,GAAKV,EAASU,IACJjD,MAAM2B,aAAarB,EAAW,MAGnDkC,OAAOC,OAAO5F,MACX6F,OAAOC,GAAiB,WAAZA,EAAIvC,MAChBF,QAAQyC,IACP,IAAIpC,EAAYD,EACboC,OAAOO,GAAKA,EAAIhB,SAASkB,SAASR,EAAIC,OACtClC,IAAIuC,GAAOV,EAASU,EAAIL,OAAO,GAC9BZ,EAASzB,EAAU+C,MAAM,GAC7BX,EAAIE,MAAM3C,QAASgC,IACjB,IAAI7G,EAAO2E,MAAM+B,YAAYlF,KAAKA,KAAKqF,GAAM7G,MAAMsB,EAAGqF,GAClDzG,EAAKyE,MAAM+B,YAAYlF,KAAKA,KAAKqF,GAAM3G,IAAIoB,EAAGqF,GAClDhC,MAAMmC,QAAQ9G,EAAME,OAInByE,MAAMY,e,qBCpKjBhG,EAAOC,QAAS,MACf,YAAYK,GACPE,KAAKmI,KAAK,GACVnI,KAAKF,MAAMA,EACXE,KAAKa,QAAO,EACfb,KAAKc,OAAM,EACRd,KAAKE,UAAU,KAClBF,KAAKoI,WAAW,KAChBpI,KAAKuB,EAAE,GACPvB,KAAKqI,OAAO,K,uBCTf,MAAMjJ,EAAU,EAAQ,QAClB6B,EAAK7B,EAAQE,UAAU,kBACvBgJ,EAAUlJ,EAAQE,UAAU,aAElCE,EAAOC,QAAS,cAAuB6I,EAEtC,YAAY/G,EAAEzB,EAAM8G,GACnB7G,MAAMD,GACNE,KAAKuB,EAAEA,EAAEgH,MAAM,GACfvI,KAAK4G,OAAOA,EACZ5G,KAAKwI,aAAa,EAAE5B,EAAO5E,aAAaT,IAAIqF,EAAO7E,aAAaR,IAGjE,SACC,IAAIE,EAAK,CACP,KAAO,WACP,MAAQzB,KAAKF,MACb,EAAIE,KAAKuB,EACT,OAASvB,KAAK4G,OAAO9G,OAEtB,OAAO2B,EAGT,WACC,IAAIN,EAASF,EAAG2B,IAAI3B,EAAG6B,KAAK9C,KAAK4G,OAAO6B,aAAazI,KAAKwI,aAAa,IAAIvH,EAAG6B,KAAK9C,KAAK4G,OAAO8B,iBAAiB1I,KAAKwI,aAAa,KAClIxI,KAAKuB,EAAEN,EAAG2B,IAAI5C,KAAK4G,OAAO3G,KAAKsB,EAAEJ,GAGlC,YAAYwH,GACX3I,KAAKuB,EAAEN,EAAG2B,IAAI5C,KAAKuB,EAAEoH,GAGtB,YAAYxI,GACXH,KAAKuB,EAAEpB,EAGR,MAAMkG,GACLrG,KAAK4G,OAAOP,EAAUC,SAAS,GAAG4B,MAAM,GACxClI,KAAKwI,aAAa,EAAExI,KAAK4G,OAAO5E,aAAahC,KAAKuB,IAAIvB,KAAK4G,OAAO7E,aAAa/B,KAAKuB,O,uBCrCtF,MAAMnC,EAAU,EAAQ,QAClB6B,EAAK7B,EAAQE,UAAU,kBAEvBsJ,EAAYxJ,EAAQE,UAAU,aAC9BuJ,EAAWzJ,EAAQE,UAAU,YAE7BwJ,EAAK1J,EAAQE,UAAU,oBAClBF,EAAQE,UAAU,qBAE7BE,EAAOC,QAAS,MAEf,YAAY0I,GACPnI,KAAKmI,KAAKA,EACVnI,KAAKa,QAAO,EAGhB,SACA,IAAIY,EAAK,CACP,KAAOzB,KAAKmI,MAGb,OAAO1G,EAGT,UAAUsH,EAAWC,EAAWC,GAC/B,IAEKC,EAFDC,EAAQ,GACTnJ,KAAKoJ,kBAAkBL,EAAWC,IAEpCD,EAAWzC,SAASxB,SAAQ,SAASuE,GACnCL,EAAW1C,SAASxB,SAAQ,SAASwE,GAChCD,aAAuBT,GAAaU,aAAuBV,EAC7DM,EAAOJ,EAAGS,WAAWF,EAAYnB,MAAMoB,EAAYpB,OACzCmB,aAAuBR,GAAYS,aAAuBV,GACrEM,EAASJ,EAAGU,KAAKH,EAAYC,EAAYpB,OACzCgB,EAAOD,MAAMC,EAAOD,MAAMI,EAAYhB,QAC5BgB,aAAuBT,GAAaU,aAAuBT,GACrEK,EAASJ,EAAGU,KAAKF,EAAYD,EAAYnB,OACzCgB,EAAOD,MAAMC,EAAOD,MAAMK,EAAYjB,QAC3BgB,aAAuBR,GAAYS,aAAuBT,IACrEK,EAAQ,CACP,KAAO,MACP,OAASG,EACT,OAASC,EACT,MAAQrI,EAAGK,KAAK+H,EAAY9H,EAAE+H,EAAY/H,GAAG+H,EAAYjB,OAAOgB,EAAYhB,SAG3Ea,EAAOD,MAAMA,GACfE,EAAQxB,KAAKuB,SAOlB,OAAOC,EAGR,kBAAkBJ,EAAWC,GAC5B,OAAGD,EAAWU,MAAMC,kBAAiBV,EAAWS,MAAMC,mBAClDzI,EAAG0I,IAAIZ,EAAWU,MAAMG,OAAOrI,EAAE,GAAGyH,EAAWS,MAAMG,OAAOrI,EAAE,IAAIwH,EAAWU,MAAMI,EAAE,GAAGb,EAAWS,MAAMI,EAAE,GAAG,MAG7G5I,EAAG0I,IAAIZ,EAAWU,MAAMG,OAAOrI,EAAE,GAAGyH,EAAWS,MAAMG,OAAOrI,EAAE,IAAIwH,EAAWU,MAAMI,EAAE,GAAGb,EAAWS,MAAMI,EAAE,GAAG,M,uBC/DrH,MAAMzK,EAAU,EAAQ,QAClB6B,EAAK7B,EAAQE,UAAU,kBACvBgJ,EAAUlJ,EAAQE,UAAU,aAElCE,EAAOC,QAAS,MAAMsF,UAAcuD,EAEnC,YAAY/G,EAAEzB,EAAMe,GACnBd,MAAMD,GACNE,KAAKuB,EAAEA,EAAEgH,MAAM,GACfvI,KAAK8J,MAAMvI,EAAEgH,MAAM,GAGpB,SACC,IAAI9G,EAAK,CACP,KAAO,QACP,EAAIzB,KAAKuB,EACT,MAAQvB,KAAK8J,MACb,OAAS9J,KAAKa,OACd,MAAQb,KAAKF,OAEf,OAAO2B,EAGR,KAAK3B,GACJ,IAAIiK,EAAW,IAAIhF,EAAM/E,KAAKuB,EAAEzB,EAAME,KAAKa,QAC3C,OAAOkJ,EAGR,WACC,GAAG/J,KAAKa,QAAQb,KAAKc,MAAM,CAC1B,IAAI2B,EAAExB,EAAGU,MAAM3B,KAAKuB,EAAEvB,KAAK8J,OAC3B9J,KAAKuB,EAAEN,EAAG2B,IAAI5C,KAAKuB,EAAEkB,GACrBzC,KAAK8J,MAAM7I,EAAG2B,IAAI5C,KAAK8J,MAAMrH,IAI/B,YAAYO,GACRhD,KAAKa,QAAQb,KAAKc,QACpBd,KAAKuB,EAAEN,EAAG2B,IAAI5C,KAAKuB,EAAEyB,IAIvB,gBAAgBA,GACZhD,KAAKa,QAAQb,KAAKc,QACpBd,KAAK8J,MAAM7I,EAAG2B,IAAI5C,KAAK8J,MAAM9G,IAI/B,aACC,OAAOhD,KAAKuB,EAGb,KAAKyB,GACJhD,KAAKuB,EAAE,GAAGvB,KAAKuB,EAAE,GAAGyB,EAAE,GACtBhD,KAAKuB,EAAE,GAAGvB,KAAKuB,EAAE,GAAGyB,EAAE,GACtBhD,KAAK8J,MAAM,GAAG9J,KAAK8J,MAAM,GAAG9G,EAAE,GAC9BhD,KAAK8J,MAAM,GAAG9J,KAAK8J,MAAM,GAAG9G,EAAE,GAG/B,YAAY7C,GACXH,KAAKuB,EAAEpB,EAGR,eAAeA,GACdH,KAAK8J,MAAM3J,EAGZ,YACCH,KAAKa,QAAO,EAGb,YACCb,KAAKa,QAAO,EAGb,UAAUkE,EAAMtE,GAEf,GAAGT,KAAKa,QAAQb,KAAKc,MAAM,CAC1B,IAAI2B,EAAExB,EAAGyB,IAAIjC,EAAIQ,EAAGU,MAAM3B,KAAKuB,EAAEwD,EAAMxD,IACvCvB,KAAK2C,YAAY1B,EAAG2B,IAAImC,EAAMxD,EAAEkB,KAIlC,aAAalB,GACZ,OAAON,EAAGK,KAAKC,EAAEvB,KAAKuB,GAGvB,OACCvB,KAAKc,OAAM,K,uBCxFb,MAAM1B,EAAU,EAAQ,QAElB4K,EAAM,CACV,YACA,YACA,OACA,aACA,OACA,QACA,OACA,UACA,KACA,UACA,mBACA,iBACA,MACA,eACA,mBACA,oBACA,YACA,OACA,WACA,QACA,YACA,WACA,aAGFA,EAAMlF,SAAQ,SAASqD,GACrB3I,EAAOC,QAAQ0I,GAAQ/I,EAAQE,UAAU6I,O,uBC7B3C,MAAM/I,EAAU,EAAQ,QAClB6B,EAAK7B,EAAQE,UAAU,kBACvByF,EAAM3F,EAAQE,UAAU,SACxB6F,EAAU/F,EAAQE,UAAU,aAElCE,EAAOC,QAAS,MAAMwK,UAAiBlF,EAEtC,YAAYxD,EAAEkB,EAAE3C,EAAMuI,GACrBtI,MAAMwB,EAAEkB,EAAE3C,GACVE,KAAKuB,EAAEA,EAAEgH,MAAM,GACfvI,KAAK8J,MAAM7I,EAAGU,MAAMJ,EAAEkB,GACpBzC,KAAKqI,OAAOA,EACdrI,KAAKE,UAAU,GAGhB,UAIA,iBAAiBoI,GAChB,OAAGA,aAAqBnD,EAChB2D,GAAGU,KAAKlB,EAAUJ,MAAMlI,MACvBsI,aAAqB2B,EACtB,CACN,KAAO,MACP,OAASjK,KACT,OAASsI,EACT,MAAQrH,EAAGK,KAAKtB,KAAKuB,EAAE+G,EAAU/G,GAAGvB,KAAKqI,OAAOC,EAAUD,aALtD,K,8CCpBR,MAAMjJ,EAAU,EAAQ,QAGlB8K,GAFK9K,EAAQE,UAAU,kBAClBF,EAAQE,UAAU,oBAClBF,EAAQE,UAAU,sBACvB6K,EAAU/K,EAAQE,UAAU,WAInBE,EAAOC,QAAU,CAC/B2K,KAAM,WACJ,IAAIA,EAAO,IAAID,EAAQ,QAYxB,OAXGC,EAAKC,YAAa,SAAStB,EAAWC,GAEvC,IAAIG,EAAUJ,EAAWuB,iBAAiBtB,EAAW,GACrDG,EAAQrE,SAAQ,SAASoE,GACR,OAAbA,EAAOlE,MAA0B,OAAbkE,EAAOlE,KAC7BkF,EAAGK,6BAA6BrB,EAAO,GAAI,KACnCA,EAAOlE,KAAK,QACpBkF,EAAGM,iBAAiBtB,OAIjBkB,EAbF,GAgBNK,QAAS,WACP,IAAIA,EAAU,IAAIN,EAAQ,WAa3B,OAZGM,EAAQJ,YAAa,SAAStB,EAAWC,GAC1C,GAAoB,SAAjBD,EAAWZ,MAAgC,SAAjBa,EAAWb,KAAc,CACrD,IAAIgB,EAAUsB,EAAQC,UAAU3B,EAAWC,EAAW,GACtDG,EAAQrE,SAAQ,SAASoE,GACR,OAAbA,EAAOlE,MAA0B,OAAbkE,EAAOlE,KAC7BkF,EAAGS,kBAAkBzB,IACbA,EAAOlE,KAAK,QACpBkF,EAAGM,iBAAiBtB,QAKlBuB,EAdC,GAiBTG,cAAe,WACb,IAAIR,EAAO,IAAID,EAAQ,iBAWxB,OAVCC,EAAKC,YAAa,SAAStB,EAAWC,GACrC,IAAIG,EAAUiB,EAAKM,UAAU3B,EAAWC,EAAW,GACnDG,EAAQrE,SAAQ,SAASoE,GACR,OAAbA,EAAOlE,MAA0B,OAAbkE,EAAOlE,KAC7BkF,EAAGW,uBAAuB3B,EAAO,KACzBA,EAAOlE,KAAK,QACpBkF,EAAGM,iBAAiBtB,OAIjBkB,EAZO,GAefU,oBAAqB,WACnB,IAAIV,EAAO,IAAID,EAAQ,iBAWxB,OAVCC,EAAKC,YAAa,SAAStB,EAAWC,GACrC,IAAIG,EAAUiB,EAAKM,UAAU3B,EAAWC,EAAW,GACnDG,EAAQrE,SAAQ,SAASoE,GACR,OAAbA,EAAOlE,MAA0B,OAAbkE,EAAOlE,KAC7BkF,EAAGK,6BAA6BrB,EAAO,IAAK,KACvB,OAAbA,EAAOlE,MACfkF,EAAGM,iBAAiBtB,OAIjBkB,EAZa,GAerBW,UAAW,WACT,IAAIC,EAAU,IAAIb,EAAQ,aAyB3B,OAxBCa,EAAQX,YAAa,SAAStB,EAAWC,GACxC,IAAIG,EAAU6B,EAAQN,UAAU3B,EAAWC,EAAW,GACtDG,EAAQrE,SAAQ,SAASoE,GACpBA,EAAOD,OAAO,GAChB,CAACF,EAAWC,GAAYlE,SAAQ,SAASuB,GACxC,IAAI3B,EAAQ2B,EAAUb,YAAYd,QAClC2B,EAAUC,SAASxB,SAAQ,SAASmG,GACnCA,EAAQjD,MAAMlD,SAAQ,SAASoG,GAC9BA,EAAKC,SAEN,IAAIC,EAAU,GACd/E,EAAU+E,SAAStG,SAAQ,SAASuG,GAClB,aAAdA,EAAQlD,MACViD,EAASzD,KAAK0D,MAGhB3G,EAAQ6B,aAAa,CAAC0E,GAASG,MAEhC1G,EAAQ4G,gBAAgBjF,UAMvB2E,EA1BG,K,uBC1EZ,MAAM5L,EAAU,EAAQ,QAClBwJ,EAAYxJ,EAAQE,UAAU,aAC9BuJ,EAAWzJ,EAAQE,UAAU,YAEnCE,EAAOC,QAAS,MAKf,YAAY0I,GACPnI,KAAKmI,KAAKA,EACVnI,KAAKa,QAAO,EACZb,KAAKoG,WAAW,GACnBpG,KAAKwF,YAAY,KAGlB,SACA,IAAI/D,EAAK,CACL,KAAOzB,KAAKmI,KACf,WAAanI,KAAKoG,YAGnB,OAAO3E,EAGP,iBAAiB8J,GAEfvL,KAAKoG,WAAWtB,SAAQ,SAASuB,GAC/BA,EAAUC,SAASxB,SAAQ,SAASmG,GAC/BA,aAAmBrC,EACpBqC,EAAQ/C,MAAMpD,SAAQ,SAAS7C,GAC7BsJ,EAAStJ,EAAKhC,SAETgL,aAAmBpC,GAC1B0C,EAASN,SAMlB,kBAAkBM,GACjBvL,KAAKoG,WAAWtB,SAAQ,SAASuB,GAChCkF,EAASlF,S,uBC1CZ,MAAMjH,EAAU,EAAQ,QAElB6B,EAAK7B,EAAQE,UAAU,kBAEvBgJ,GADKlJ,EAAQE,UAAU,oBACXF,EAAQE,UAAU,cAC9BsJ,EAAYxJ,EAAQE,UAAU,aAC9BuJ,EAAWzJ,EAAQE,UAAU,YAKnCE,EAAOC,QAAQ,cAAwB6I,EACtC,YAAYhC,EAASxG,GACpBC,MAAMD,GACJE,KAAKsG,SAASA,EACdtG,KAAKoL,SAAS,GAChBpL,KAAKyJ,MAAM,CACV,iBAAkB,GAIpB,SACC,IAAIhI,EAAK,CACR,SAAWzB,KAAKsG,SAAShB,IAAI2F,GAASA,EAAQnL,OAC9C,SAAWE,KAAKoL,SAAS9F,IAAI+F,GAASA,EAAQlD,OAE/C,OAAO1G,EAGP,WAAWwJ,GACTjL,KAAKsG,SAASqB,KAAKsD,GACnBA,EAAQ/K,UAAUF,KAGpB,YAAYqG,GACVrG,KAAKoL,SAAStG,SAAQ,SAAS0G,GAChCnF,EAAU+E,SAAStG,SAAQ,SAAS2G,GAChCD,EAASrD,MAAMsD,EAAStD,MAC1BqD,EAASnB,YAAYhE,EAAUrG,QAE/BA,QACDA,MAGH,oBACC,IAAI0L,EAAQ1L,KAAKsG,SAAShB,IAAI2F,GAASA,EAAQnL,OAC/C,OAAO4L,EAIR,MACC1L,KAAKsG,SAASxB,SAAQ,SAASmG,GAC9BA,EAAQU,SAIV,OACC3L,KAAKsG,SAASxB,SAAQ,SAASmG,GAC9BA,EAAQ9H,UAIV,aACC,IAAIyI,EAAI,CAAC,EAAE,GAQT,OAPA5L,KAAKsG,SAASxB,SAAQ,SAASmG,GAC1BA,aAAmBrC,EACpBgD,EAAI3K,EAAG2B,IAAIgJ,EAAIX,EAAQY,cACdZ,aAAmBpC,IAChC+C,EAAI3K,EAAG2B,IAAIgJ,EAAIX,EAAQY,kBAGhB5K,EAAGW,IAAIgK,EAAI5L,KAAKsG,SAAS3F,QAGnC,mBACC,IAAIiJ,EAAO5J,KAAK6L,aACZhC,EAAE,EACFiC,EAAK,CAAC,EAAE,GAWV,OAVA9L,KAAKsG,SAASxB,SAAQ,SAASmG,GAC1BA,aAAmBrC,GACxBqC,EAAQ/C,MAAMpD,SAAQ,SAAS7C,GAC9B6J,EAAO7K,EAAGK,KAAKW,EAAKhC,KAAKsB,EAAEqI,GACxBkC,EAAKjC,IACPA,EAAEiC,SAKG,CAAClC,EAAO,CAACC,EAAEA,IAGrB,iBAAiBxD,EAAU4C,GAC1B,IAAIE,EAAQ,GAYZ,OAXGnJ,KAAKoJ,kBAAkB/C,IACzBrG,KAAKsG,SAASxB,SAAQ,SAASuE,GAC9BhD,EAAUC,SAASxB,SAAQ,SAASwE,GACnC,IAAIJ,EAAOG,EAAYiB,iBAAiBhB,GACrCJ,EAAOD,MAAMA,IACfC,EAAO6C,cAAc,CAAC1C,EAAYC,GAClCH,EAAQxB,KAAKuB,UAKVC,EAGR,kBAAkB9C,GACjB,OAAGrG,KAAKyJ,MAAMC,kBAAiBrD,EAAUoD,MAAMC,mBAC3CzI,EAAG0I,IAAI3J,KAAKyJ,MAAMG,OAAOrI,EAAE,GAAG8E,EAAUoD,MAAMG,OAAOrI,EAAE,IAAIvB,KAAKyJ,MAAMI,EAAE,GAAGxD,EAAUoD,MAAMI,EAAE,GAAG,MAG/F5I,EAAG0I,IAAI3J,KAAKyJ,MAAMG,OAAOrI,EAAE,GAAG8E,EAAUoD,MAAMG,OAAOrI,EAAE,IAAIvB,KAAKyJ,MAAMI,EAAE,GAAGxD,EAAUoD,MAAMI,EAAE,GAAG,GAWtG,MAAMpH,GACLzC,KAAKsG,SAASxB,SAAQ,SAASmG,GAC3BA,aAAmBrC,EACrBqC,EAAQe,MAAMvJ,GACNwI,aAAmBpC,GAC3BoC,EAAQlI,YAAYN,MAKvB,aAAawJ,GACZ,IAAIxJ,EAAE,GACNzC,KAAKsG,SAASxB,SAAQ,SAASmG,GAC9BxI,EAAE,EAAEH,KAAK4J,SAAS,IAAKD,GAAO3J,KAAK4J,SAAS,IAAKD,GAC9ChB,aAAmBrC,EACrBqC,EAAQe,MAAMvJ,GACNwI,aAAmBpC,GAC3BoC,EAAQlI,YAAYN,S,qBC5IxBjD,EAAOC,QAAU,MACf,YAAYoB,EAAOQ,EAAQ2D,EAAKlF,GAC9BE,KAAKF,MAAMA,EACXE,KAAKE,UAAU,KACfF,KAAKa,OAAOA,EACZb,KAAKc,OAAM,EACXd,KAAKqB,QAAQA,EACbrB,KAAKgF,KAAKA,EAEVhF,KAAKC,KAAK,KACVD,KAAKG,GAAG,KAGV,SACE,IAAIsB,EAAK,CACL,KAAQzB,KAAKgF,KACb,KAAQ,KACR,GAAM,MAUV,OAPkB,OAAdhF,KAAKC,MACPwB,EAAKxB,KAAKD,KAAKC,KAAKH,MACpB2B,EAAKtB,GAAGH,KAAKG,GAAGL,QAEhB2B,EAAKxB,KAAKD,KAAKC,KACfwB,EAAKxB,KAAKD,KAAKG,IAEVsB,EAGT,KACEzB,KAAKa,QAAO,EAGd,MACEb,KAAKa,QAAO,EAGd,OACEb,KAAKc,OAAM,K,uBCvCf,IAAIwE,EAAM,CACT,qBAAsB,OACtB,wBAAyB,OACzB,sBAAuB,OACvB,yBAA0B,OAC1B,cAAe,OACf,iBAAkB,OAClB,SAAU,OACV,YAAa,OACb,aAAc,OACd,gBAAiB,OACjB,UAAW,OACX,aAAc,OACd,cAAe,OACf,iBAAkB,OAClB,aAAc,OACd,gBAAiB,OACjB,cAAe,OACf,iBAAkB,QAInB,SAAS6G,EAAeC,GACvB,IAAIC,EAAKC,EAAsBF,GAC/B,OAAOG,EAAoBF,GAE5B,SAASC,EAAsBF,GAC9B,IAAIG,EAAoBC,EAAElH,EAAK8G,GAAM,CACpC,IAAIK,EAAI,IAAIC,MAAM,uBAAyBN,EAAM,KAEjD,MADAK,EAAEE,KAAO,mBACHF,EAEP,OAAOnH,EAAI8G,GAEZD,EAAeS,KAAO,WACrB,OAAOxF,OAAOwF,KAAKtH,IAEpB6G,EAAeU,QAAUP,EACzB9M,EAAOC,QAAU0M,EACjBA,EAAeE,GAAK,Q,qBCvCpB,MAAMjN,EAAU,EAAQ,QAElBC,GADKD,EAAQE,UAAU,kBAChBF,EAAQE,UAAU,SACzBC,EAAaH,EAAQE,UAAU,cAErCE,EAAOC,QAAQ,cAAmBF,EAChC,YAAYuN,EAAMC,EAAMjN,GACtBC,OAAM,GAAK,EAAM,OAAOD,GAExBE,KAAKN,MAAM,IAAIL,EAAKyN,EAAM7M,KAAK8M,EAAM5M,IAAG,GAAK,GAC/CH,KAAKL,MAAM,IAAIN,EAAKyN,EAAM3M,GAAG4M,EAAM9M,MAAK,GAAK,GAE3CD,KAAKC,KAAK6M,EAAM5M,UAChBF,KAAKG,GAAG4M,EAAM7M,UAEdF,KAAKgN,kBAAkB,GACvBhN,KAAKgL,SAAQ,EAGf,SACKhL,KAAKa,QAAQb,KAAKc,QACnBd,KAAKN,MAAMqB,SACXf,KAAKL,MAAMoB,UAIf,S,uBCzBF,MAAM3B,EAAU,EAAQ,QAElB6N,EAAK7N,EAAQE,UAAU,MACvB2B,EAAK7B,EAAQE,UAAU,kBAEvB4N,EAAK9N,EAAQE,UAAU,aAEvB6N,EAAQ/N,EAAQE,UAAU,SAC1BuJ,EAAWzJ,EAAQE,UAAU,YAC7B8N,EAAQhO,EAAQE,UAAU,SAC1BD,EAAOD,EAAQE,UAAU,QACzB+N,EAAOjO,EAAQE,UAAU,QACzBgO,EAAYlO,EAAQE,UAAU,aAC9BiO,EAAOnO,EAAQE,UAAU,QACzBsJ,EAAYxJ,EAAQE,UAAU,aAC9BkO,EAAYpO,EAAQE,UAAU,aAE9BmO,EAAOrO,EAAQE,UAAU,QACzBoO,EAAWtO,EAAQE,UAAU,YAG7BqO,EAAcvO,EAAQE,UAAU,gBAEtCE,EAAOC,QAAS,MACd,YAAYmO,GACV5N,KAAKwF,YAAY,IAAI0H,EAAGU,EAAiB5N,MACzCA,KAAKwF,YAAYgB,KAAKqH,OAAOF,EAAa,UAAU3N,KAAKwF,aACzDxF,KAAKwF,YAAYgB,KAAKsH,QAAQH,EAAa,WAC3C3N,KAAKwF,YAAYgB,KAAKuH,cAAcJ,EAAa,iBAGnD,eACE,OAAO3N,KAAKwF,YAId,KAAKjC,GACHvD,KAAKwF,YAAYyH,EAAGlJ,KAAKR,GAG3B,UAAUyK,GACRhO,KAAKiO,eAAejO,KAAKwF,YAAYyH,EAAGlJ,KAAKR,WAI/C,KAAKA,GACH0J,EAAG5J,KAAKrD,KAAKwF,YAAYjC,GAI3B,SAAShC,GAGP,GAAGA,aAAa4L,EACd5L,EAAEzB,MAAME,KAAKwF,YAAYX,OAAOlE,OAChCY,EAAEiE,YAAYxF,KAAKwF,YACnBxF,KAAKwF,YAAYX,OAAO8C,KAAKpG,OAC1B,CACH,IAAI2M,EAAS,IAAIf,EAAM5L,EAAEvB,KAAKwF,YAAYX,OAAOlE,QACjDuN,EAAS1I,YAAYxF,KAAKwF,YAC1BxF,KAAKwF,YAAYX,OAAO8C,KAAKuG,GAE/B,OAAOlO,KAAKwF,YAAYX,OAAO7E,KAAKwF,YAAYX,OAAOlE,OAAO,GAGhE,UAAUwN,GACRA,EAAMrJ,SAAQ,SAASvD,GACrBvB,KAAKiF,SAAS1D,KACdvB,MAGJ,UAAU+E,GACR,IAAIxD,EAAEwD,EAAMxD,EAAEgH,QACV2F,EAAWlO,KAAKiF,SAAS1D,GAC7B,OAAO2M,EAIT,YAAY3M,EAAEqF,GACZ,IAAIwH,EAAY,IAAIV,EAASnM,EAAEvB,KAAKwF,YAAYkB,UAAU/F,OAAOiG,GAEjE,OADA5G,KAAKwF,YAAYkB,UAAUiB,KAAKyG,GACzBA,EAGT,QAAQ7M,EAAE8M,GACR,IAAIC,EAAU,IAAIb,EAAKlM,EAAE8M,EAAErO,KAAKwF,YAAYqB,SAASlG,QAGrD,OAFAX,KAAKwF,YAAYqB,SAASc,KAAK2G,GAC/BA,EAAQrO,KAAK2G,OAAO1G,UAAU2G,SAASc,KAAK2G,GACrCA,EAIT,YAAY/M,EAAE8G,EAAO5F,GACnB,IAAI8L,EAAc,IAAI1F,EAAStH,EAAEkB,EAAEzC,KAAKwF,YAAYX,OAAOlE,OAAO0H,GAIlE,OAHAkG,EAAY/I,YAAYxF,KAAKwF,YAE7BxF,KAAKwF,YAAYX,OAAO8C,KAAK4G,GACtBA,EAIT,eAAetO,EAAKE,GAClB,IAAIqO,EAAU,IAAInP,EAAKY,EAAKE,GAAG,GAAK,EAAKH,KAAKwF,YAAYE,YAAY/E,QAEtE,OADAX,KAAKwF,YAAYE,YAAYiC,KAAK6G,GAC3BA,EAGT,iBAAiBvO,EAAKE,GACpB,IAAIqO,EAAU,IAAInP,EAAKY,EAAKE,GAAG,GAAK,EAAMH,KAAKwF,YAAYE,YAAY/E,QAEvE,OADAX,KAAKwF,YAAYE,YAAYiC,KAAK6G,GAC3BA,EAGT,QAAQvO,EAAKE,EAAG6F,EAAgBC,EAAgBC,EAAeC,GAC7D,IAAIsI,EAAS,IAAIpB,EAAKpN,EAAKE,EAAG6F,EAAgBC,EAAgBC,EAAeC,EAAWnG,KAAKwF,YAAYE,YAAY/E,QAErH,OADAX,KAAKwF,YAAYE,YAAYiC,KAAK8G,GAC3BA,EAIT,wBAAwB/O,EAAMC,GAC5B,IAAI+O,EAAU,IAAInB,EAAK7N,EAAMC,EAAMK,KAAKwF,YAAYE,YAAY/E,QAIhE,OAHAjB,EAAMQ,UAAU8H,MAAML,KAAK+G,GAC3B/O,EAAMO,UAAU8H,MAAML,KAAK+G,GAC3B1O,KAAKwF,YAAYE,YAAYiC,KAAK+G,GAC3BA,EAIT,aAAahP,EAAMC,GACjB,IAAIgP,EAAa,IAAIrB,EAAU5N,EAAMC,EAAMK,KAAKwF,YAAYE,YAAY/E,QAExE,OADAX,KAAKwF,YAAYE,YAAYiC,KAAKgH,GAC3BA,EAIT,yBAAyBC,EAAUC,GACnC,IAAInP,EAAMkP,EAAU,GAChBjP,EAAMkP,EAAU,GAChBjP,EAAcgP,EAAU,GAAGpO,iBAAiBoO,EAAU,IACtD/O,EAAcgP,EAAU,GAAGrO,iBAAiBqO,EAAU,IACtDC,EAAU,IAAI1B,EAAM1N,EAAMC,EAAMC,EAAcC,EAAcG,KAAKwF,YAAYE,YAAY/E,QAI3F,OAHFjB,EAAMQ,UAAU4H,OAAOH,KAAKmH,GAC5BnP,EAAMO,UAAU4H,OAAOH,KAAKmH,GAC5B9O,KAAKwF,YAAYE,YAAYiC,KAAKmH,GACzBA,EAKT,aAAajK,GAOX,IALA,IAAIkK,EAAgBlK,EAAOlE,OACvBqO,EAAe,GACfC,EAAoB,GAGhBC,EAAE,EAAEA,EAAErK,EAAOlE,OAAOuO,IAAI,CAC9B,IAAIC,EAASnP,KAAKoP,eAAevK,EAAOqK,GAAGrK,GAAQqK,EAAE,GAAGH,IACxDC,EAAerH,KAAKwH,GAItB,IAAIE,EAAEL,EAAerO,OACrB,IAAQuO,EAAE,EAAEA,EAAEG,EAAEH,IAAI,CAClB,IAAIP,EAAc3O,KAAKsP,aAAaN,EAAeE,GAAGF,GAAgBE,EAAE,GAAGG,IAC3EJ,EAAoBtH,KAAKgH,GAI3B,IAAIY,EAAgB,IAAI3G,EAAUoG,EAAeC,EAAoBjP,KAAKwF,YAAYN,WAAWvE,QAEjGX,KAAKwF,YAAYN,WAAWyC,KAAK4H,GAIjC,IAAQL,EAAE,EAAEA,EAAErK,EAAOlE,OAAOuO,IAC1BrK,EAAOqK,GAAGhP,UAAUqP,EAGtB,OAAOA,EAGV,yBAAyB5J,EAAWC,GACnC,IAAIsC,EAAM,GACNsH,EAAO,IACPC,EAAK,EAER9J,EAAWuC,MAAMpD,SAAQ,SAASpF,GAChCkG,EAAWsC,MAAMpD,SAAQ,SAASnF,GACnC8P,EAAKxO,EAAGK,KAAK5B,EAAMO,KAAKsB,EAAE5B,EAAMQ,GAAGoB,GAAGN,EAAGK,KAAK5B,EAAMS,GAAGoB,EAAE5B,EAAMM,KAAKsB,GAC9DkO,EAAKD,IACTA,EAAOC,EACFvH,EAAM,CAACxI,EAAMC,UAIrBK,KAAK0P,wBAAwBxH,EAAM,GAAGA,EAAM,IAG7C,0BAA0BvC,EAAWC,GACrC,IAAI+J,EAAU,GAEVC,EAAI,IACJH,EAAK,EAER9J,EAAWuC,MAAMpD,SAAQ,SAASpF,EAAMmQ,GACtCjK,EAAWsC,MAAMpD,SAAQ,SAASnF,EAAMmQ,GACzCL,EAAKxO,EAAGK,KAAK5B,EAAMS,GAAGoB,EAAE5B,EAAMQ,GAAGoB,GAC3BkO,EAAKG,IACNA,EAAIH,EACRE,EAAU,CAACE,EAAOC,UAKrB,IAAIC,EAAUpK,EAAWuC,MAAMvH,OAC1BqP,EAAUpK,EAAWsC,MAAMvH,OAE5BsP,EAAM,CAACtK,EAAWuC,MAAMyH,EAAU,IAAIhK,EAAWuC,OAAOyH,EAAU,GAAG,GAAGI,IACxEG,EAAM,CAACtK,EAAWsC,MAAMyH,EAAU,IAAI/J,EAAWsC,OAAOyH,EAAU,GAAG,GAAGK,IAE3E,OAAOhQ,KAAKmQ,yBAAyBF,EAAMC,GAI5C,aAAa5J,EAAS8E,GACtB,IAAIgF,EAAa,IAAI5C,EAAUlH,GAS7B,OARF8J,EAAa5K,YAAYxF,KAAKwF,YAC5B4F,EAAStG,SAAQ,SAASuG,GACxB+E,EAAahF,SAASzD,KAAK0D,MAE/BrL,KAAKwF,YAAYY,WAAWuB,KAAKyI,GAC/B9J,EAASxB,SAAQ,SAASmG,GACxBA,EAAQ/K,UAAUyH,KAAKyI,MAElBA,EAGT,gBAAgB/J,GACd,IAAIgK,EAAKhK,EAAUiK,mBACnBjK,EAAUoD,MAAMG,OAAO,IAAI8D,EAAS2C,EAAK,GAAGrQ,KAAKwF,YAAYkB,UAAU/F,OAAO0F,EAAUC,SAAS,GAAG4B,MAAM,IAC1G7B,EAAUoD,MAAMI,EAAE5I,EAAG2B,IAAIyN,EAAK,GAAG,CAAC,GAAG,KACrChK,EAAUoD,MAAMC,iBAAgB,EAChC1J,KAAKwF,YAAYkB,UAAUiB,KAAKtB,EAAUoD,MAAMG,QAChD5J,KAAKgH,mBAGP,mBAAmBmB,GACjBnI,KAAKwF,YAAYY,WAAWtB,SAAQ,SAASuB,GAC3CA,EAAU8B,KAAKA,KAInB,cAAciD,EAASjD,GACrB,GAAS,OAANA,EACDnI,KAAKwF,YAAYY,WAAWtB,SAAQ,SAASuB,GAC3CA,EAAU+E,SAASmF,OAAOnF,UAEzB,CACH,IAAIoF,EAASxQ,KAAKwF,YAAYY,WAAWkB,OAAOjB,GAAWA,EAAU8B,MAAMA,GAC3EqI,EAAS1L,SAAQ,SAASuB,GACxBA,EAAU+E,SAASmF,OAAOnF,OAOhC,SAAS3E,EAAI0B,GACX,GAAS,OAANA,EACD1B,EAAIL,WAAWmK,OAAOvQ,KAAKwF,YAAYY,gBACnC,CACSpG,KAAKwF,YAAYY,WAAWkB,OAAOjB,GAAWA,EAAU8B,MAAMA,GAC3E1B,EAAIL,WAAWmK,OAAO9J,IAM1B,eAAenD,GAEf,IAAImN,EAAUzQ,KAAKwF,YAAYX,OAAOlE,OACtC2C,EAAOuB,OAAOC,SAAQ,SAASC,EAAMmK,GACpCnK,EAAMjF,MAAM2Q,EAAUvB,EACtBlP,KAAK6E,OAAO8C,KAAK5C,KAChB/E,KAAKwF,aAEP,IAAIkL,EAAQ1Q,KAAKwF,YAAYN,WAAWvE,OACxC2C,EAAO4B,WAAWJ,SAAQ,SAASK,EAAUwL,GAC5CxL,EAAUrF,MAAM4Q,EAAQC,EACxB3Q,KAAKkF,WAAWyC,KAAKxC,KACpBnF,KAAKwF,aAEPlC,EAAOoC,YAAYZ,SAAQ,SAASvF,GACnCS,KAAK0F,YAAYiC,KAAKpI,KACrBS,KAAKwF,aAELlC,EAAO8C,WAAWtB,SAAQ,SAASuB,GACjCrG,KAAKoG,WAAWuB,KAAKtB,KACrBrG,KAAKwF,aAGP4B,OAAOwF,KAAKtJ,EAAOkD,MAAM1B,SAAQ,SAAS8L,GACxCxJ,OAAOwF,KAAK5M,KAAKwG,MAAM1B,SAAQ,SAAS+L,GACzB,SAAVA,GAA+B,SAAXD,IAClBC,GAASD,EACRtN,EAAOkD,KAAKoK,GAASxK,WAAWtB,SAAQ,SAASuB,GAC/CrG,KAAKwG,KAAKqK,GAASzK,WAAWuB,KAAKtB,KAClCrG,MAELA,KAAKwG,KAAKoK,GAAStN,EAAOkD,KAAKoK,MAGnC5Q,QACJA,KAAKwF,aAEPxF,KAAKgH,mBAIL,wBAAwBmB,GACtB,IAAI9B,EAAYrG,KAAKwF,YAAYY,WAC9B0K,KAAKzK,GAAWA,EAAU8B,MAAMA,GACnCnI,KAAK+Q,gBAAgB1K,GAGvB,gBAAgB2K,GACdhR,KAAKwF,YAAYY,WAAapG,KAAKwF,YAAYY,WAC5CkB,OAAOjB,GAAWA,GAAa2K,GAElC,IAAIC,EAAoBD,EAAkB1K,SACvCgB,OAAQ4J,GAAMA,aAAerI,GAEhC7I,KAAKwF,YAAYE,YAAc1F,KAAKwF,YAAYE,YAC7C4B,OAAO6J,IACN,QAAIA,aAAa9R,KAAc4R,EAAkBlJ,SAASoJ,EAAElR,QAIhED,KAAKwF,YAAYX,OAAS7E,KAAKwF,YAAYX,OACxCyC,OAAO8J,IAAIH,EAAkBlJ,SAASqJ,IAEzC,IAAIC,EAAqBL,EAAkB1K,SACxCgB,OAAQ4J,GAAMA,aAAetI,GAE5B0I,EAAgBD,EACjBE,OAAO,CAACC,EAAKC,IAAQ,IAAID,KAAQC,EAAIvJ,OAAO,IAE3CwJ,EAAiBL,EAClBE,OAAO,CAACC,EAAKC,IAAQ,IAAID,KAAQC,EAAI3J,QAAQ,IAE5C6J,EAAgBN,EACjBE,OAAO,CAACC,EAAKC,IAAQ,IAAID,KAAQC,EAAIzJ,OAAO,IAE3C4J,EAAqBP,EACtBE,OAAO,CAACC,EAAKC,IAAQ,IAAID,KAAQC,EAAII,YAAY,IAEhDC,EAAiBR,EAClBC,OAAO,CAACC,EAAKC,IAAQ,IAAID,EAAKC,EAAIxR,KAAMwR,EAAItR,IAAI,IAEnDH,KAAKwF,YAAYX,OAAS7E,KAAKwF,YAAYX,OACxCyC,OAAO8J,IAAIU,EAAe/J,SAASqJ,IAEtCpR,KAAKwF,YAAYE,YAAc1F,KAAKwF,YAAYE,YAC7C4B,OAAO6J,IACN,OAAIA,aAAa7D,GAAmBsE,EAAmB7J,SAASoJ,GAC5DA,aAAa/D,GAAesE,EAAe3J,SAASoJ,GACpDA,aAAa5D,GAAcoE,EAAc5J,SAASoJ,GAClDA,aAAa9R,GAAciS,EAAcvJ,SAASoJ,GAC/CY,OAGX3K,OAAOC,OAAOrH,KAAKwF,YAAYgB,MAC5B1B,QAAQkN,GAAOA,EAAM5L,WAAa4L,EAAM5L,WACtCkB,OAAOjB,GAAWA,GAAa2K,IAEpChR,KAAKiS,sBACLjS,KAAKgH,mBAGP,gBAAgBkL,GACdlS,KAAKwF,YAAYY,WAAWtB,SAAQ,SAASqN,EAAWrS,GACnDqS,IAAaD,GACdlS,KAAKoG,WAAWgM,OAAOtS,EAAM,KAE/BE,KAAKwF,aAKV,mBACGxF,KAAKwF,YAAY6M,oBAAoB,GACvC,IAAI,IAAIC,EAAE,EAAEA,EAAEtS,KAAKwF,YAAYE,YAAY/E,OAAO2R,IACjDtS,KAAKwF,YAAY6M,oBAAoB1K,KAAK2K,GAQ3C,mBAAmBC,EAAWC,EAAElR,EAAKmR,EAASC,EAAIC,EAAWC,EAAGC,EAAiBzH,EAAS0C,GACxF,IAAI,IAAIwE,EAAG,EAAEA,EAAEC,EAAWD,IAAI,CAE5B,IADA,IAAIQ,EAAM,GACF5D,EAAE,EAAGA,EAAEsD,EAAEtD,IAAI,CACnB,IAAI3N,EAAEN,EAAG2B,IAAI,CAACN,KAAKyQ,OAAOzQ,KAAK4J,SAAS,IAAK5K,GAAMgB,KAAKyQ,OAAOzQ,KAAK4J,SAAS,IAAK5K,IAAOsR,GACrFnQ,EAAExB,EAAG2B,IAAI,EAAEN,KAAK4J,SAAS,IAAKuG,GAAUnQ,KAAK4J,SAAS,IAAKuG,GAAUC,GACzEI,EAAMnL,KAAK3H,KAAKgT,YAAYzR,EAAE,EAAEkB,IAGlC,IAAIwQ,EAAEH,EAAMnS,OAEZmS,EAAMhO,SAAQ,SAASmF,EAASiF,GAC9B,IAAIgE,EAAa5Q,KAAKyQ,MAAMzQ,KAAK4J,SAAS2G,GAC3B,GAAZK,GAAeA,IAElB,IADA,IAAIhL,EAAM,GACFyI,EAAE,EAAEA,EAAEuC,EAAWvC,IAAI,CAC3B,IAAIwC,GAAY,EACZ9D,EAAE/M,KAAKyQ,MAAMzQ,KAAK4J,SAAS+G,GAC/B/K,EAAMpD,SAAQ,SAAS7C,GAClBA,GAAMoN,IACP8D,GAAY,MAGbA,GACFnT,KAAKoP,eAAe0D,EAAM5D,GAAG4D,EAAMzD,OAGtCrP,MAEF,IAAIoQ,EAAapQ,KAAKuG,aAAauM,EAAM,IACzC1C,EAAajI,KAAK,YAEfwK,EAAW,IACZvC,EAAa3G,MAAMkJ,WAAWA,EAC9BvC,EAAa3G,MAAM2J,IAAI,EACvBpT,KAAKwF,YAAYgB,KAAKqH,OAAOzH,WAAWuB,KAAKyI,IAG5CtC,GACD9N,KAAKwF,YAAYgB,KAAK,WAAWJ,WAAWuB,KAAKyI,GAGnDhF,EAAStG,SAAQ,SAASuG,GACxB+E,EAAahF,SAASzD,KAAK0D,MAI/BrL,KAAKgH,mBAIP,sBACEhH,KAAKwF,YAAYX,OAAOC,SAAQ,SAASC,EAAMjF,GAC7CiF,EAAMjF,MAAMA,KAEdE,KAAKwF,YAAYE,YAAYZ,SAAQ,SAASvF,EAAWO,GACvDP,EAAWO,MAAMA,KAEnBE,KAAKwF,YAAYN,WAAWJ,SAAQ,SAAS+C,EAAI/H,GAC/C+H,EAAI/H,MAAMA,KAEZE,KAAKwF,YAAYqB,SAAS/B,SAAQ,SAASgC,EAAKhH,GAC9CgH,EAAKhH,MAAMA,KAEbE,KAAKwF,YAAYkB,UAAU5B,SAAQ,SAASC,EAAMjF,GAChDiF,EAAMjF,MAAMA,KAIhB,mBACEE,KAAKwF,YAAY2C,KAAK,KACtBnI,KAAKwF,YAAYX,OAAO,GACxB7E,KAAKwF,YAAYE,YAAY,GAC7B1F,KAAKwF,YAAYN,WAAW,GAC5BlF,KAAKwF,YAAYY,WAAW,GAC5BpG,KAAKwF,YAAYkB,UAAU,GAC3B1G,KAAKwF,YAAYqB,SAAS,GAC1B7G,KAAKwF,YAAYgB,KAAK,GACtBxG,KAAKwF,YAAYd,QAAQ,KACzB1E,KAAKwF,YAAY6N,KAAK,EACtBrT,KAAKwF,YAAY8N,WAAW,KAC5BtT,KAAKwF,YAAY+N,eAAe,GAChCvT,KAAKwF,YAAY6M,oBAAoB,GACrCrS,KAAKwF,YAAYgO,UAAU,EAC3BxT,KAAKwF,YAAYiO,WAAW,EAC5BzT,KAAKwF,YAAYkO,UAAU,EAC3B1T,KAAKwF,YAAYiE,MAAM,GACvBzJ,KAAKwF,YAAYd,QAAQ1E,Q,uBC1e7B,MAAMZ,EAAU,EAAQ,QAClB6B,EAAK7B,EAAQE,UAAU,kBACvB2C,EAAO7C,EAAQE,UAAU,QAEzBqU,EAAO,EAEbnU,EAAOC,QAAS,cAAmBwC,EACjC,YAAYhC,EAAKE,EAAG6F,EAAgBC,EAAgBC,EAAeC,EAAWrG,GAC5EC,MAAME,EAAKE,GAAG,GAAK,EAAML,GACzBE,KAAKgF,KAAK,OACVhF,KAAKgG,gBAAgB,EAAE2N,EACvB3T,KAAKiG,iBAAiB0N,EACtB3T,KAAKkG,eAAelG,KAAKW,OAAO,IAChCX,KAAKmG,WAAW,KAChBnG,KAAKwB,eAAe,IAGtB,SACA,IAAIC,EAAK,CACH,KAAO,OACX,KAAOzB,KAAKC,KAAKH,MACb,GAAKE,KAAKG,GAAGL,MACb,gBAAkBE,KAAKgG,gBACvB,gBAAkBhG,KAAKiG,gBACvB,eAAiBjG,KAAKkG,eACtB,WAAalG,KAAKmG,YAEpB,OAAO1E,EAGX,SACE,GAAGzB,KAAKa,QAAQb,KAAKc,MAAM,CACzB,IAAI+B,EAAE5B,EAAGU,MAAM3B,KAAKG,GAAGoB,EAAEvB,KAAKC,KAAKsB,GAC/Ba,EAAWnB,EAAGS,IAAImB,EAAEA,GACrBT,EAAW,IACZS,EAAE5B,EAAG6B,KAAKD,EAAE,GAAK7C,KAAKW,OAAOX,KAAKW,QAAQyB,EAAWpC,KAAKW,OAAOX,KAAKW,SACtEX,KAAKC,KAAK8C,YAAYF,GACtB7C,KAAKG,GAAG4C,YAAY9B,EAAGG,IAAIyB,S,uBCrCnC,MAAMzD,EAAU,EAAQ,QAClB6B,EAAK7B,EAAQE,UAAU,kBAE7BG,EAAQmU,kBAAkB,SAASC,EAAEC,EAASC,EAAUC,EAAOC,GAC7DJ,EAAE/O,SAAQ,SAASoP,GACjB,OAAGA,EAAK3S,EAAE,GAAGuS,GACXI,EAAKnR,YAAY,EAAEmR,EAAK3S,EAAE,GAAGuS,EAAS,SACtCI,EAAKC,gBAAgB,CAACD,EAAK3S,EAAE,GAAGuS,EAAS,KAElCI,EAAK3S,EAAE,GAAGwS,GACjBG,EAAKnR,YAAY,EAAEmR,EAAK3S,EAAE,GAAGwS,EAAU,SACvCG,EAAKC,gBAAgB,CAACD,EAAK3S,EAAE,GAAGwS,EAAU,KAEnCG,EAAK3S,EAAE,GAAGyS,GACjBE,EAAKnR,YAAY,CAAC,GAAGmR,EAAK3S,EAAE,GAAGyS,SAC/BE,EAAKC,gBAAgB,CAAC,EAAED,EAAK3S,EAAE,GAAGyS,KAE3BE,EAAK3S,EAAE,GAAG0S,GACjBC,EAAKnR,YAAY,CAAC,GAAGmR,EAAK3S,EAAE,GAAG0S,SAC/BC,EAAKC,gBAAgB,CAAC,EAAED,EAAK3S,EAAE,GAAG0S,UAF9B,MAQVxU,EAAQ+K,iBAAkB,SAAS4J,EAAgBvK,GAC/C,IAAItI,EAAE6S,EAAgBC,OAAO9S,EACzB8M,EAAE+F,EAAgBE,OAAO/S,EACzBgT,EAAYtT,EAAGgC,KAAKhC,EAAGU,MAAMJ,EAAE8M,IAE/BpF,EAAQ3G,KAAKkS,IAAIJ,EAAgBnL,MAAM,GAC3CmL,EAAgBC,OAAOtR,YAAY9B,EAAG6B,KAAKyR,EAAUtL,IACrDmL,EAAgBE,OAAOvR,YAAY9B,EAAG6B,KAAKyR,GAAWtL,KAG1DxJ,EAAQkL,kBAAmB,SAASyJ,GAChC,IAAI7S,EAAE6S,EAAgBrP,MAAMxD,EACxB8M,EAAE+F,EAAgBnS,KAAKhC,KAAKsB,EAC5BkT,EAAEL,EAAgBnS,KAAK9B,GAAGoB,EAC1BmT,EAAIN,EAAgBnS,KAAKtB,OACzBgU,EAAS1T,EAAGY,KAAKZ,EAAGW,IAAIX,EAAGU,MAAM8S,EAAEpG,GAAGqG,IACtCE,EAAI3T,EAAGS,IAAIT,EAAGU,MAAMJ,EAAE8M,GAAGpN,EAAGW,IAAIX,EAAGU,MAAM8S,EAAEpG,GAAGqG,IAGlDN,EAAgBrP,MAAMhC,YAAY9B,EAAG6B,KAAK6R,EAAO1T,EAAG4T,YAAYT,EAAgBnL,MAAM,KACtFmL,EAAgBrP,MAAMoP,gBAAgBlT,EAAG6B,KAAK6R,EAAO1T,EAAG4T,WAAWT,EAAgBnL,MAAM,KAGzFmL,EAAgBnS,KAAKhC,KAAK8C,YAAY9B,EAAG6B,KAAK6R,EAAO1T,EAAG4T,WAAWH,EAAIN,EAAgBnL,MAAMhI,EAAG6T,WAAW,GAAGJ,EAAIE,OAClHR,EAAgBnS,KAAKhC,KAAKkU,gBAAgBlT,EAAG6B,KAAK6R,EAAO1T,EAAG4T,YAAYH,EAAIN,EAAgBnL,MAAMhI,EAAG6T,WAAW,GAAGJ,EAAIE,OACvHR,EAAgBnS,KAAK9B,GAAG4C,YAAY9B,EAAG6B,KAAK6R,EAAO1T,EAAG4T,WAAWT,EAAgBnL,MAAMyL,EAAIzT,EAAG6T,WAAW,EAAEF,MAC3GR,EAAgBnS,KAAK9B,GAAGgU,gBAAgBlT,EAAG6B,KAAK6R,EAAO1T,EAAG4T,YAAYT,EAAgBnL,MAAMyL,EAAIzT,EAAG6T,WAAW,EAAEF,OAGpHnV,EAAQsV,IAAI,SAASX,GAEnB,IAAI7S,EAAE6S,EAAgBrP,MAAMxD,EACxB8M,EAAE+F,EAAgBnS,KAAKhC,KAAKsB,EAC5BkT,EAAEL,EAAgBnS,KAAK9B,GAAGoB,EAC1BmT,EAAIN,EAAgBnS,KAAKtB,OAEzBiU,GADS3T,EAAGY,KAAKZ,EAAGW,IAAIX,EAAGU,MAAM8S,EAAEpG,GAAGqG,IAClCzT,EAAGS,IAAIT,EAAGU,MAAMJ,EAAE8M,GAAGpN,EAAGW,IAAIX,EAAGU,MAAM8S,EAAEpG,GAAGqG,KAE9CM,EAAG/T,EAAGU,MAAMyS,EAAgBrP,MAAMxD,EAAE6S,EAAgBrP,MAAM+E,OAC1DmL,EAAGhU,EAAGU,MAAMyS,EAAgBnS,KAAKhC,KAAKsB,EAAE6S,EAAgBnS,KAAKhC,KAAK6J,OAClEoL,EAAGjU,EAAGU,MAAMyS,EAAgBnS,KAAK9B,GAAGoB,EAAE6S,EAAgBnS,KAAK9B,GAAG2J,OAE9DqL,EAAWlU,EAAG2B,IAAI3B,EAAG6B,KAAKmS,EAAIL,EAAIF,GAAMzT,EAAG6B,KAAKoS,EAAI,EAAGN,EAAIF,IAC3DU,EAAMnU,EAAG2B,IAAIuS,EAAWH,GAE5B,OAAOI,GAGT3V,EAAQ4V,QAAQ,SAAShP,GACvBA,EAAUC,SAASxB,SAAQ,SAASmG,GAClCA,EAAQjD,MAAMlD,SAAQ,SAASoG,GAC1B5I,KAAK4J,SAAS,KACfhB,EAAKrK,QAAO,SAIlBwF,EAAUb,YAAYd,QAAQ4Q,mBAAmB,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAEjP,EAAUwF,aAAa,EAAE,IAAG,IAIhGpM,EAAQoL,uBAAwB,SAASuJ,EAAgBjO,GACrD,IAAI5E,EAAE6S,EAAgBrP,MAAMxD,EACxB8M,EAAE+F,EAAgBnS,KAAKhC,KAAKsB,EAC5BkT,EAAEL,EAAgBnS,KAAK9B,GAAGoB,EAE1BmT,EAAIN,EAAgBnS,KAAKtB,OACzB4U,EAAItU,EAAGW,IAAIX,EAAGU,MAAM8S,EAAEpG,GAAGqG,GACzBC,EAAS1T,EAAGY,KAAK0T,GACjBX,EAAI3T,EAAGS,IAAIT,EAAGU,MAAMJ,EAAE8M,GAAGkH,GAEzBP,EAAG/T,EAAGU,MAAMyS,EAAgBrP,MAAMxD,EAAE6S,EAAgBrP,MAAM+E,OAC1DmL,EAAGhU,EAAGU,MAAMyS,EAAgBnS,KAAKhC,KAAKsB,EAAE6S,EAAgBnS,KAAKhC,KAAK6J,OAClEoL,EAAGjU,EAAGU,MAAMyS,EAAgBnS,KAAK9B,GAAGoB,EAAE6S,EAAgBnS,KAAK9B,GAAG2J,OAGlEsK,EAAgBrP,MAAMhC,YAAY9B,EAAG6B,KAAK6R,EAAO1T,EAAG4T,YAAYT,EAAgBnL,MAAM,KACtFmL,EAAgBrP,MAAMoP,gBAAgBlT,EAAG6B,KAAK6R,EAAO1T,EAAG4T,WAAWT,EAAgBnL,MAAM,KACzFmL,EAAgBrP,MAAMhC,YAAY9B,EAAG6B,KAAKyS,EAAItU,EAAGS,IAAIsT,EAAGO,IAAOpP,IAG/DiO,EAAgBnS,KAAKhC,KAAK8C,YAAY9B,EAAG6B,KAAK6R,EAAO1T,EAAG4T,WAAWH,EAAIN,EAAgBnL,MAAMhI,EAAG6T,WAAW,GAAGJ,EAAIE,OAClHR,EAAgBnS,KAAKhC,KAAK8C,YAAY9B,EAAG6B,KAAKyS,EAAItU,EAAGS,IAAIuT,EAAGM,IAAOpP,IACnEiO,EAAgBnS,KAAKhC,KAAKkU,gBAAgBlT,EAAG6B,KAAK6R,EAAO1T,EAAG4T,YAAYH,EAAIN,EAAgBnL,MAAMhI,EAAG6T,WAAW,GAAGJ,EAAIE,OACvHR,EAAgBnS,KAAK9B,GAAG4C,YAAY9B,EAAG6B,KAAK6R,EAAO1T,EAAG4T,WAAWT,EAAgBnL,MAAMyL,EAAIzT,EAAG6T,WAAW,EAAEF,MAC3GR,EAAgBnS,KAAK9B,GAAG4C,YAAY9B,EAAG6B,KAAKyS,EAAItU,EAAGS,IAAIwT,EAAGK,IAAOpP,IACjEiO,EAAgBnS,KAAK9B,GAAGgU,gBAAgBlT,EAAG6B,KAAK6R,EAAO1T,EAAG4T,YAAYT,EAAgBnL,MAAMyL,EAAIzT,EAAG6T,WAAW,EAAEF,OAGpHnV,EAAQ8K,6BAA8B,SAAS6J,EAAgBjO,EAAWqP,GAEtE,IAAIjU,EAAE6S,EAAgBrP,MAAMxD,EACxB8M,EAAE+F,EAAgBnS,KAAKhC,KAAKsB,EAC5BkT,EAAEL,EAAgBnS,KAAK9B,GAAGoB,EAE1BmT,EAAIN,EAAgBnS,KAAKtB,OACzB4U,EAAItU,EAAGW,IAAIX,EAAGU,MAAM8S,EAAEpG,GAAGqG,GACzBC,EAAS1T,EAAGY,KAAK0T,GACjBX,EAAI3T,EAAGS,IAAIT,EAAGU,MAAMJ,EAAE8M,GAAGkH,GAEzBP,EAAG/T,EAAGU,MAAMyS,EAAgBrP,MAAMxD,EAAE6S,EAAgBrP,MAAM+E,OAC1DmL,EAAGhU,EAAGU,MAAMyS,EAAgBnS,KAAKhC,KAAKsB,EAAE6S,EAAgBnS,KAAKhC,KAAK6J,OAClEoL,EAAGjU,EAAGU,MAAMyS,EAAgBnS,KAAK9B,GAAGoB,EAAE6S,EAAgBnS,KAAK9B,GAAG2J,OAK9DqL,EAAWlU,EAAG2B,IAAI3B,EAAG6B,KAAKmS,EAAIL,EAAIF,GAAMzT,EAAG6B,KAAKoS,EAAI,EAAGN,EAAIF,IAE5DN,EAAgBnL,MAAM,IAEvBmL,EAAgBrP,MAAMhC,YAAY9B,EAAG6B,KAAKyS,EAAItU,EAAGS,IAAIsT,EAAGO,IAAOpP,IAG/DiO,EAAgBnS,KAAKhC,KAAK8C,YAAY9B,EAAG6B,KAAKyS,EAAItU,EAAGS,IAAIuT,EAAGM,IAAOpP,IACnEiO,EAAgBnS,KAAK9B,GAAG4C,YAAY9B,EAAG6B,KAAKyS,EAAItU,EAAGS,IAAIwT,EAAGK,IAAOpP,IAGjEiO,EAAgBrP,MAAMhC,YAAY9B,EAAG6B,KAAK6R,EAAO1T,EAAG4T,YAAYT,EAAgBnL,MAAM,KAEtFmL,EAAgBnS,KAAK9B,GAAG4C,YAAY9B,EAAG6B,KAAK6R,EAAO1T,EAAG4T,WAAWH,EAAIN,EAAgBnL,OAAO,EAAEhI,EAAG6T,WAAW,GAAGJ,EAAIE,QAEnHR,EAAgBnS,KAAKhC,KAAK8C,YAAY9B,EAAG6B,KAAK6R,EAAO1T,EAAG4T,WAAWH,EAAIN,EAAgBnL,OAAO,EAAEhI,EAAG6T,WAAW,EAAEF,QAIlH,IAAIQ,EAAMnU,EAAGa,IAAIb,EAAG2B,IAAIuS,EAAWH,IAEhCI,EAAM,MACPhB,EAAgBrP,MAAMhC,YAAY9B,EAAG6B,KAAKkS,EAAG/T,EAAGS,IAAIsT,EAAGL,IAAUa,IAEjEL,EAAWlU,EAAGgC,KAAKkS,GAEnBf,EAAgBnS,KAAKhC,KAAK8C,YAAY9B,EAAG6B,KAAKqS,EAAWlU,EAAGS,IAAIuT,EAAGE,IAAcK,IACjFpB,EAAgBnS,KAAK9B,GAAG4C,YAAY9B,EAAG6B,KAAKqS,EAAWlU,EAAGS,IAAIwT,EAAGC,IAAcK,O,uBC9JrF,MAAMpW,EAAU,EAAQ,QAClB6B,EAAK7B,EAAQE,UAAU,kBACvBwJ,EAAK1J,EAAQE,UAAU,oBAEvBgJ,GADQlJ,EAAQE,UAAU,SACdF,EAAQE,UAAU,cAC9B2K,EAAW7K,EAAQE,UAAU,YAEnCE,EAAOC,QAAS,MAAM0F,UAAkBmD,EACvC,YAAYJ,EAAM2J,EAAW/R,GAC5BC,MAAMD,GAENE,KAAKkI,MAAMA,EACXlI,KAAK6R,WAAWA,EACd7R,KAAKgI,MAAM,GACbhI,KAAK8H,OAAO,GACZ9H,KAAK6G,SAAS,GACd7G,KAAKE,UAAU,GAGfF,KAAKkI,MAAMpD,SAAQ,SAAS7C,GAC3BA,EAAK/B,UAAUF,OACdA,MAEFA,KAAKyV,6BAGN,SACC,IAAIhU,EAAK,CACP,aAAezB,KAAKkI,MAAM5C,IAAIrD,GAAMA,EAAKhC,KAAKH,QAG/C,OAAO2B,EAGT,gBACC,IAAIgO,EAAK,EACTzP,KAAKkI,MAAMpD,SAAQ,SAAS7C,GAC3BwN,EAAKxN,EAAKhC,KACVgC,EAAKhC,KAAKgC,EAAK9B,GACf8B,EAAK9B,GAAGsP,KAGT,IAAIiG,EAAS1V,KAAKkI,MAAMvH,OACpBgV,EAAU3V,KAAKkI,MAAMK,QAEzBoN,EAAU7Q,SAAQ,SAAS7C,EAAKnC,GAC/BE,KAAKkI,MAAMwN,EAAS5V,EAAM,GAAGmC,IAC5BjC,MAGH,aACC,IAAI4J,EAAO,CAAC,EAAE,GAId,OAHA5J,KAAKkI,MAAMpD,SAAQ,SAAS7C,GAC3B2H,EAAO3I,EAAG2B,IAAIX,EAAKhC,KAAKsB,EAAEqI,MAEpB3I,EAAGW,IAAIgI,EAAO5J,KAAKkI,MAAMvH,QAGjC,aAAaY,GACZ,OAAOuH,EAAG8M,KAAKrU,EAAEvB,KAAKkI,OAGvB,6BACIlI,KAAKkI,MAAM,GAAGnG,aAAa/B,KAAKkI,MAAM,GAAG/H,GAAGoB,GAAG,GACjDvB,KAAK6V,gBAIP,MACC7V,KAAKkI,MAAMpD,SAAQ,SAAS7C,GAC3BA,EAAKhC,KAAK6V,eAIZ,OAEC9V,KAAKkI,MAAMpD,SAAQ,SAAS7C,GAC3BA,EAAKkB,UAENnD,KAAKgI,MAAMlD,SAAQ,SAASoG,GAC3BA,EAAK/H,UAENnD,KAAK8H,OAAOhD,SAAQ,SAASiR,GAC5BA,EAAM5S,UAIR,YACC,OAAOnD,KAAKkI,MAAMqJ,OAAO,CAACC,EAAKC,IAAQ,IAAID,EAAKC,EAAItR,IAAK,IAG1D,sBACC,IAAI6V,EAAS/U,EAAGgV,iBAAiBjW,KAAKkI,MAAM5C,IAAIrD,GAAMA,EAAKhC,KAAKH,QAChE,OAAOkW,EAGR,qBACC,IAAIA,EAAS/U,EAAGgV,iBAAiBjW,KAAKkI,MAAM5C,IAAIrD,GAAMA,EAAKnC,QAC3D,OAAOkW,EAGR,0BACC,IAAIA,EAAS/U,EAAGgV,iBAAiBjW,KAAK6R,WAAWvM,IAAI4Q,GAAWA,EAAUpW,QAC1E,OAAOkW,EAGR,iBAAiB1N,GAChB,OAAGA,aAAqBnD,EAChB2D,EAAGS,WAAWvJ,KAAKkI,MAAMI,EAAUJ,OAClCI,aAAqB2B,EACtBnB,EAAGU,KAAKlB,EAAUtI,KAAKkI,YADzB,EAKP,MAAMzF,GACLzC,KAAKkI,MAAMpD,SAAQ,SAAS7C,GAC3BA,EAAKhC,KAAK8C,YAAYN,S,uBCpHzB,IAAI6C,EAAM,CACT,mBAAoB,OACpB,sBAAuB,QAIxB,SAAS6G,EAAeC,GACvB,IAAIC,EAAKC,EAAsBF,GAC/B,OAAOG,EAAoBF,GAE5B,SAASC,EAAsBF,GAC9B,IAAIG,EAAoBC,EAAElH,EAAK8G,GAAM,CACpC,IAAIK,EAAI,IAAIC,MAAM,uBAAyBN,EAAM,KAEjD,MADAK,EAAEE,KAAO,mBACHF,EAEP,OAAOnH,EAAI8G,GAEZD,EAAeS,KAAO,WACrB,OAAOxF,OAAOwF,KAAKtH,IAEpB6G,EAAeU,QAAUP,EACzB9M,EAAOC,QAAU0M,EACjBA,EAAeE,GAAK,Q,uBCvBpB,IAAI/G,EAAM,CACT,YAAa,OACb,eAAgB,OAChB,OAAQ,OACR,UAAW,QAIZ,SAAS6G,EAAeC,GACvB,IAAIC,EAAKC,EAAsBF,GAC/B,OAAOG,EAAoBF,GAE5B,SAASC,EAAsBF,GAC9B,IAAIG,EAAoBC,EAAElH,EAAK8G,GAAM,CACpC,IAAIK,EAAI,IAAIC,MAAM,uBAAyBN,EAAM,KAEjD,MADAK,EAAEE,KAAO,mBACHF,EAEP,OAAOnH,EAAI8G,GAEZD,EAAeS,KAAO,WACrB,OAAOxF,OAAOwF,KAAKtH,IAEpB6G,EAAeU,QAAUP,EACzB9M,EAAOC,QAAU0M,EACjBA,EAAeE,GAAK,Q,uBCzBpB,IAAI/G,EAAM,CACT,QAAS,OACT,WAAY,OACZ,iBAAkB,OAClB,oBAAqB,QAItB,SAAS6G,EAAeC,GACvB,IAAIC,EAAKC,EAAsBF,GAC/B,OAAOG,EAAoBF,GAE5B,SAASC,EAAsBF,GAC9B,IAAIG,EAAoBC,EAAElH,EAAK8G,GAAM,CACpC,IAAIK,EAAI,IAAIC,MAAM,uBAAyBN,EAAM,KAEjD,MADAK,EAAEE,KAAO,mBACHF,EAEP,OAAOnH,EAAI8G,GAEZD,EAAeS,KAAO,WACrB,OAAOxF,OAAOwF,KAAKtH,IAEpB6G,EAAeU,QAAUP,EACzB9M,EAAOC,QAAU0M,EACjBA,EAAeE,GAAK,Q,qBCzBpB,MAAMjN,EAAU,EAAQ,QAClB6B,EAAK7B,EAAQE,UAAU,kBAuB7B,SAAS6W,EAAMC,EAASC,GACtB,IAAI5G,EAAK,EAEL6G,EAAS,CACX,KAAO,MACP,UAAY,KACZ,KAAO,KACP,MAAQF,EACR,OAAS,KAeX,OAZAC,EAASvR,SAAQ,SAASyR,GACxB9G,EAAK8G,EAAKxU,aAAaqU,EAAS7U,GAC7BkO,EAAK6G,EAAQrN,QACdqN,EAAQrU,KAAKsU,EACbD,EAAQrN,MAAMwG,MAIf6G,EAAQrN,MAAM,IACfqN,EAAQE,WAAU,GAGbF,EAGT,SAASG,EAAQC,EAAUC,GAEzB,IAAIC,EAAQ,CACV,KAAO,MACP,UAAY,KACZ,KAAOD,EACP,OAASD,EACT,MAAQ,IAKV,OAFAE,EAAQ/R,OAAO+R,EAAQ/R,OAAOyC,OAAOvC,GAAO4R,EAAQ5U,aAAagD,EAAM9E,KAAKsB,GAAG,GAExEqV,EAGT,SAASC,EAAQH,EAAUL,GACzB,IACIO,EADAN,EAAQH,EAAMO,EAAU,GAAGzW,KAAKoW,GAEpC,OAAGC,EAAQE,UACFF,GAEPM,EAAQH,EAAQC,EAAUJ,EAAQrU,MACR,GAAvB2U,EAAQ/R,OAAOlE,QACZ2V,EAAQE,YACVF,EAAQE,WAAU,GAEbF,GAEAO,EAAQD,EAAQ/R,OAAOwR,IA3EpC5W,EAAQqX,UAAW,SAASf,KAI5BtW,EAAQ8J,WAAY,SAASsK,EAAEkD,GAI7BlD,EAAE5S,EAAG+V,aAAanD,GAClBkD,EAAE9V,EAAG+V,aAAaD,GAElB,IAAIE,EAAQJ,EAAQhD,EAAEkD,GAClBG,EAAQL,EAAQE,EAAElD,GAEtB,OAAGoD,EAAQhO,MAAMiO,EAAQjO,MAChBgO,EAEAC,GAkEXzX,EAAQmW,KAAM,SAASrU,EAAEwV,GACvB,IAAII,GAAO,IACPnU,EAAE,EAQN,OAPA+T,EAAEjS,SAAQ,SAAS7C,GACjBe,EAAEf,EAAKF,aAAaR,GACjByB,EAAEmU,IACHA,EAAMnU,MAIHmU,GAGT1X,EAAQ+J,KAAM,SAASzE,EAAMgS,GAE3B,IAAI7N,EAAQ,CACV,KAAO,KACP,MAAQnE,EACR,OAAS,KAGP/B,EAAE,EASN,OARA+T,EAAEjS,SAAQ,SAAS7C,GACjBe,EAAEf,EAAKF,aAAagD,EAAMxD,GACvByB,EAAEkG,EAAOD,QACVC,EAAOD,MAAMjG,EACbkG,EAAOjH,KAAKA,MAGhBiH,EAAOlE,KAAK,MACLkE,I,qBCpHT,IAAI5D,EAAM,CACT,cAAe,OACf,iBAAkB,OAClB,SAAU,OACV,YAAa,OACb,eAAgB,OAChB,kBAAmB,OACnB,SAAU,OACV,YAAa,OACb,UAAW,OACX,aAAc,OACd,SAAU,OACV,YAAa,QAId,SAAS6G,EAAeC,GACvB,IAAIC,EAAKC,EAAsBF,GAC/B,OAAOG,EAAoBF,GAE5B,SAASC,EAAsBF,GAC9B,IAAIG,EAAoBC,EAAElH,EAAK8G,GAAM,CACpC,IAAIK,EAAI,IAAIC,MAAM,uBAAyBN,EAAM,KAEjD,MADAK,EAAEE,KAAO,mBACHF,EAEP,OAAOnH,EAAI8G,GAEZD,EAAeS,KAAO,WACrB,OAAOxF,OAAOwF,KAAKtH,IAEpB6G,EAAeU,QAAUP,EACzB9M,EAAOC,QAAU0M,EACjBA,EAAeE,GAAK,Q,qBChCpB5M,EAAQH,UAAY,SAAS6I,GAC3B,MAAS,WAANA,GAAuB,MAANA,EACX,UAAQ,KAAsCA,GACxC,aAANA,GAAyB,QAANA,GAAoB,cAANA,GAClC,QAANA,GAAoB,SAANA,GAAqB,QAANA,EACpB,UAAQ,KAAqCA,GACzC,WAANA,GAAuB,oBAANA,EACjB,UAAQ,KAAkCA,GACpC,OAANA,GAAmB,gBAANA,EACb,UAAQ,KAA8BA,GAChC,aAANA,GAAyB,SAANA,GAAqB,aAANA,GACnC,aAANA,GAAyB,YAANA,GACb,oBAANA,GAAgC,qBAANA,GAAiC,YAANA,GAAwB,QAANA,EAC9D,UAAQ,KAAoCA,GACxC,kBAANA,EACA,UAAQ,KAAiCA,GACnC,aAANA,EACA,UAAQ,KAAyBA,QAExCtE,QAAQC,IAAI,sB,qBCpBhB,IAAIwB,EAAM,CACT,YAAa,OACb,eAAgB,OAChB,qBAAsB,OACtB,wBAAyB,QAI1B,SAAS6G,EAAeC,GACvB,IAAIC,EAAKC,EAAsBF,GAC/B,OAAOG,EAAoBF,GAE5B,SAASC,EAAsBF,GAC9B,IAAIG,EAAoBC,EAAElH,EAAK8G,GAAM,CACpC,IAAIK,EAAI,IAAIC,MAAM,uBAAyBN,EAAM,KAEjD,MADAK,EAAEE,KAAO,mBACHF,EAEP,OAAOnH,EAAI8G,GAEZD,EAAeS,KAAO,WACrB,OAAOxF,OAAOwF,KAAKtH,IAEpB6G,EAAeU,QAAUP,EACzB9M,EAAOC,QAAU0M,EACjBA,EAAeE,GAAK,Q,qBCzBpB,MAAMjN,EAAU,EAAQ,QAClB6B,EAAK7B,EAAQE,UAAU,kBAGvB8X,GAFKhY,EAAQE,UAAU,oBAClBF,EAAQE,UAAU,qBACjBF,EAAQE,UAAU,QAGxBsJ,GAFWxJ,EAAQE,UAAU,oBACtBF,EAAQE,UAAU,QACbF,EAAQE,UAAU,cAC9BuJ,EAAWzJ,EAAQE,UAAU,YAIzBE,EAAOC,QAAU,CAC1BqO,QAAS,WACJ,IAAIA,EAAU,IAAIsJ,EAAI,WAMtB,OALHtJ,EAAQuJ,QAAS,WACZrX,KAAKsX,kBAAiB,SAASvS,GAC7BA,EAAMhC,YAAY,CAAC,EAAE,WAGlB+K,EAPH,GAURC,cAAe,WACX,IAAIA,EAAgB,IAAIqJ,EAAI,iBAO9B,OALErJ,EAAcsJ,QAAQ,WACpBrX,KAAKsX,kBAAiB,SAASvS,GAClCA,EAAMhC,YAAY9B,EAAG6B,KAAK7B,EAAGU,MAAMoD,EAAM+E,MAAM/E,EAAMxD,GAAG,WAGlDwM,EARM,GAWhBF,OAAQ,SAASvK,GAChB,IAAIuK,EAAS,IAAIuJ,EAAI,YAerB,OAdAvJ,EAAOrI,YAAclC,EACrBuK,EAAOwJ,QAAQ,WACdrX,KAAKuX,mBAAkB,SAASlR,GAC5BA,EAAUvF,QACTuF,EAAUoD,MAAM2J,IAAI/M,EAAUoD,MAAMkJ,YACtCtM,EAAUlD,OACV0K,EAAOrI,YAAYd,QACjBqM,gBAAgB1K,IAElBA,EAAUoD,MAAM2J,WAKbvF,GAGR2J,KAAM,SAAS5N,EAAQ6N,GACtB,IAAID,EAAK,IAAIJ,EAAI,QAqBjB,OApBAI,EAAK5N,OAASA,EACd4N,EAAKC,MAAQA,EACbD,EAAKH,QAAQ,WACXrX,KAAKuX,mBAAkB,SAASlR,GAChC,IAAIqR,EAAgBrR,EAAUwF,aAC1B8L,EAAO1W,EAAGgC,KAAKhC,EAAGU,MAAM6V,EAAK5N,OAAQ8N,IACrCE,EAAQ3W,EAAGK,KAAKkW,EAAK5N,OAAQ8N,GAC7BjF,EAAWmF,EAAKA,EAAM,KAC1BvR,EAAUC,SAASxB,QAAQmG,IACtBA,aAAmBrC,EACtBqC,EAAQ/C,MAAMpD,SAAQ,SAAS7C,GAC9BA,EAAKhC,KAAK8C,YAAY9B,EAAG6B,KAAK6U,EAAMlF,OAE3BxH,aAAmBpC,GAC7BoC,EAAQlI,YAAY9B,EAAG6B,KAAK6U,EAAMlF,UAM/B+E,GAGRK,SAAU,SAAS/D,EAASC,EAAUE,EAASD,GAC9C,IAAI6D,EAAS,IAAIT,EAAI,YAuBrB,OAtBAS,EAASR,QAAQ,WACfrX,KAAKuX,mBAAkB,SAASlR,GAChC,IAAIuD,EAASvD,EAAUwF,aACpBjC,EAAO,GAAGmK,EACZ1N,EAAUC,SAASxB,SAAQ,SAASmG,GACnC6M,EAAgB7M,EAAS,EAAE8I,EAAW,OAE9BnK,EAAO,GAAGkK,EACnBzN,EAAUC,SAASxB,SAAQ,SAASmG,GACnC6M,EAAgB7M,EAAS,CAAC8I,EAAW,OAE7BnK,EAAO,GAAGoK,EACnB3N,EAAUC,SAASxB,SAAQ,SAASmG,GACnC6M,EAAgB7M,EAAS,CAAC,GAAI+I,OAEtBpK,EAAO,GAAGqK,GACnB5N,EAAUC,SAASxB,SAAQ,SAASmG,GACnC6M,EAAgB7M,EAAS,CAAC,EAAG+I,WAK1B6D,IAIT,SAASC,EAAgB7M,EAASlG,GAC7BkG,aAAmBrC,EACtBmP,EAAkB9M,EAASlG,GACjBkG,aAAmBpC,GAC7BmP,EAAiB/M,EAASlG,GAI5B,SAASgT,EAAkB9M,EAASlG,GACnCkG,EAAQ/C,MAAMpD,SAAQ,SAAS7C,GAC9BA,EAAKhC,KAAK8C,YAAYgC,GACtB9C,EAAKhC,KAAKkU,gBAAgBpP,MAI5B,SAASiT,EAAiB/M,EAASlG,GAClCkG,EAAQlI,YAAYgC,GACpBkG,EAAQkJ,gBAAgBpP,K,qBC3HzB,MAAM3F,EAAU,EAAQ,QACbA,EAAQE,UAAU,kBACjBF,EAAQE,UAAU,aAE9BE,EAAOC,QAAS,MACf,YAAY8B,EAAE8M,EAAEvO,GACfE,KAAKC,KAAKsB,EACRvB,KAAKG,GAAGkO,EACRrO,KAAKqB,SAAQ,EAGf,SACA,IAAII,EAAK,CACP,KAAOzB,KAAKC,KAAKH,MACb,GAAKE,KAAKG,GAAGL,MACjB,MAAQE,KAAKF,OAEd,OAAO2B,K,qBCjBV,MAAMrC,EAAU,EAAQ,QAClB6B,EAAK7B,EAAQE,UAAU,kBAGvB4K,EAAK9K,EAAQE,UAAU,qBAM7BE,EAAOC,QAAQ,MAEd,YAAY0I,EAAKzD,GAChB1E,KAAKmI,KAAKA,EACVnI,KAAK6E,OAAO,GACZ7E,KAAK0F,YAAY,GACjB1F,KAAKkF,WAAW,GAChBlF,KAAKoG,WAAW,GAChBpG,KAAK0G,UAAU,GACf1G,KAAK6G,SAAS,GACd7G,KAAKwG,KAAK,GACVxG,KAAK0E,QAAQA,EACb1E,KAAKqT,KAAK,EAEVrT,KAAKsT,WAAW,KAChBtT,KAAKuT,eAAe,GAEpBvT,KAAKqS,oBAAoB,GAEzBrS,KAAKwT,UAAU,EACfxT,KAAKyT,WAAW,EAChBzT,KAAK0T,UAAU,EAEf1T,KAAKyJ,MAAM,GAGZ,SACC,IAAIhI,EAAK,CACR,OAASzB,KAAK6E,OACd,UAAY7E,KAAK0G,UACjB,SAAW1G,KAAK6G,SAChB,YAAc7G,KAAK0F,YACnB,WAAa1F,KAAKkF,WAClB,WAAalF,KAAKoG,WAClB,KAAOgB,OAAOwF,KAAK5M,KAAKwG,MAAMlB,IAAImB,GAAKA,EAAI0B,OAE5C,OAAO1G,EAKR,WAAWkH,GACV3I,KAAK6E,OAAOC,SAAQ,SAASC,GAC5BA,EAAMkT,KAAKtP,GACX5D,EAAMkT,KAAKtP,MAGZ3I,KAAK0G,UAAU5B,SAAQ,SAASC,GAC/BA,EAAMmT,cAUR,YAAYpE,EAASC,EAAUC,EAAOC,GACrC/J,EAAG0J,kBAAkB5T,KAAK6E,OAAOiP,EAASC,EAAUC,EAAOC,GAG5D,kBAAkBzB,GACjB,IAAI,IAAI2F,EAAE,EAAEA,EAAE3F,EAAE2F,IAEfnY,KAAKqS,oBAAoBvN,SAAQ,SAAShF,GACzCE,KAAKF,GAAOiB,WACXf,KAAK0F,aAIT,qBAEC1F,KAAKoG,WAAWtB,SAAQ,SAASsT,EAAcC,GAC9CrY,KAAKoG,WAAWtB,SAAQ,SAASwT,EAAcC,GAC3CF,EAAUE,GACZH,EAAc/N,YAAYiO,QAG3BtY,MAGH,OACCoH,OAAOwF,KAAK5M,KAAKwG,MAAM1B,SAAQ,SAAS2B,GAC9B,SAANA,GACFzG,KAAKwG,KAAKC,GAAK4Q,YAEfrX,MAEFA,KAAK6E,OAAOC,SAAQ,SAASC,GAC5BA,EAAMyT,cAIR,WAEC,IAAI,IAAI7H,EAAE,EAAEA,EAAE3Q,KAAK0T,UAAU/C,IAAI,CAChC,IAAI,IAAIzB,EAAE,EAAEA,EAAElP,KAAKyT,WAAWvE,IAC7BlP,KAAKyY,qBAEN,IAAQvJ,EAAE,EAAEA,EAAElP,KAAKwT,UAAUtE,IAG5B,GAFAlP,KAAK0Y,OACL1Y,KAAK2Y,kBAAkB,GACF,OAAlB3Y,KAAKsT,WAAkB,CACzB,IAAIsF,EAAS3X,EAAGU,MAAM3B,KAAKsT,WAAWtT,KAAKuT,eAAe1H,cAC1D7L,KAAK6Y,WAAWD,GAGlB5Y,KAAKqT,OAENrT,KAAK0G,UAAU5B,SAAQ,SAASC,GAC/BA,EAAMmT,iB,mBCxHA1Y,EAAOC,QAAU,CACxBqZ,MAAO,SAASvX,EAAEqT,EAAIvG,EAAEqG,EAAID,GAC1B,OAAOzU,KAAK0B,IAAI1B,KAAK4B,IAAI5B,KAAK2B,MAAMJ,EAAE8M,GAAGuG,GAAK5U,KAAK4B,IAAI5B,KAAK6B,KAAK7B,KAAK2B,MAAM8S,EAAEpG,IAAIqG,KAGpFqE,UAAW,SAASvG,GAClB,IAAI7B,EAAI,SAASzB,GACf,OAAGA,EAAEsD,EAAE,EACEtD,EAAEsD,EACFtD,EAAE,EACFA,EAAEsD,EAEFtD,GAGX,OAAOyB,GAGTmE,WAAY,SAAS9R,GACnB,OAAOA,GAQT6R,WAAY,SAAS7R,GAEnB,MAAM6R,EAAW,EACjB,OAAG7R,EAAE6R,EACIA,EACA7R,GAAG6R,GACFA,EAED7R,GAIXC,KAAM,SAASR,GACf,IAAIO,EAAEhD,KAAKsB,KAAKmB,EAAE,CAAC,EAAE,IACrB,OAAIO,EAAE,GACK,CAACP,EAAE,GAAGO,EAAEP,EAAE,GAAGO,GAEb,CAAC,EAAE,IAIf2G,IAAK,SAASpI,GACb,OAAGA,EAAE,EACGA,GAECA,GAITyX,QAAS,SAASzX,GAQhB,OAPAA,EAAEuD,SAAQ,SAASkN,EAAM9C,GAErB3N,EAAE2N,GADD8C,EAAM,EACFA,GAECA,KAGHzQ,GAGV0X,KAAM,SAAS1X,GACd,OAAGA,EAAE,EACG,EACCA,EAAE,GACF,EAEF,GAGPG,IAAK,SAASH,EAAE8M,GACd,OAAO9M,EAAE,GAAG8M,EAAE,GAAG9M,EAAE,GAAG8M,EAAE,IAG1BzL,IAAK,SAASrB,EAAE8M,GACd,MAAO,CAAC9M,EAAE,GAAG8M,EAAE,GAAG9M,EAAE,GAAG8M,EAAE,KAG3BxM,KAAM,SAASN,GACb,MAAO,EAAEA,EAAE,GAAGA,EAAE,KAGlBI,MAAO,SAASJ,EAAE8M,GAChB,MAAO,CAAC9M,EAAE,GAAG8M,EAAE,GAAG9M,EAAE,GAAG8M,EAAE,KAG3BvM,IAAK,SAASP,GACZ,OAAOe,KAAK4W,KAAKlZ,KAAK0B,IAAIH,EAAEA,KAG9BD,KAAM,SAASC,EAAE8M,GACf,IAAI5L,EAAGzC,KAAK2B,MAAMJ,EAAE8M,GACpB,OAAO/L,KAAK4W,KAAKlZ,KAAK0B,IAAIe,EAAEA,KAG9Bb,IAAK,SAASL,EAAEyB,GACd,MAAO,CAACzB,EAAE,GAAGyB,EAAEzB,EAAE,GAAGyB,IAGtBF,KAAM,SAASvB,EAAEyB,GACf,MAAO,CAACzB,EAAE,GAAGyB,EAAEzB,EAAE,GAAGyB,IAGtBmW,QAAS,SAAS5X,EAAEkB,GAClB,MAAO,CAAClB,EAAE,GAAGkB,EAAE,GAAGlB,EAAE,GAAGkB,EAAE,KAG3BrB,IAAK,SAASG,GACZ,MAAO,EAAEA,EAAE,IAAIA,EAAE,KAGnB6X,IAAK,SAAS5G,EAAG6G,GACb,OAAS7G,EAAI6G,EAAKA,GAAKA,GAG3B,IAAI5Y,EAAIU,GACN,MAAO,CAACmB,KAAKgX,IAAI7Y,GAAKU,EAAO,GAAGmB,KAAKiX,IAAI9Y,GAAKU,EAAO,GAAGmB,KAAKiX,IAAI9Y,GAAKU,EAAO,GAAGmB,KAAKgX,IAAI7Y,GAAKU,EAAO,KAGvG,sBAAsBsB,EAAE+W,GAEtB,IAAItX,EAAWlC,KAAK8B,IAAIW,GAAGzC,KAAK8B,IAAI0X,GAChCpX,EAAYpC,KAAK0B,IAAIe,EAAE+W,GACvBC,EAAcnX,KAAKC,KAAKH,EAAWF,GACvC,OAAGlC,KAAK0B,IAAI1B,KAAK6B,KAAKY,GAAG+W,GAAG,EACnB,EAAElX,KAAKE,GAAIiX,EAEXA,GAIXC,YAAa,SAASC,GAEpB,IADA,IAAIC,EAAQ,GACJ1K,EAAE,EAAEA,EAAE5M,KAAKuX,KAAKF,EAAKhZ,OAAO,GAAGuO,IACrC0K,EAAQjS,KAAKgS,EAAK,EAAEzK,IAEtB,OAAO0K,GAGTE,QAAS,SAASC,GAIhB,IAFA,IAAItK,EAEIP,EAAE6K,EAAEpZ,OAAO,EAAEuO,EAAE,EAAEA,IAAI,CAC3B,IAAIyB,EAAErO,KAAKyQ,MAAMzQ,KAAK4J,SAASgD,GAC/BO,EAAKsK,EAAEpJ,GACPoJ,EAAEpJ,GAAGoJ,EAAE7K,GACP6K,EAAE7K,GAAGO,EAGP,OAAOsK,GAGT/C,aAAc,SAAS+C,GAKrB,IAJA,IAAIpJ,EAAErO,KAAKyQ,MAAMzQ,KAAK4J,SAAS6N,EAAEpZ,QAC7BqZ,EAAK,GAGD9K,EAAE,EAAEA,EAAE6K,EAAEpZ,OAAOuO,IACrB8K,EAAK9K,GAAG6K,EAAEpJ,GACVA,GAAGA,EAAE,GAAGoJ,EAAEpZ,OAGZ,OAAOqZ,GAGTC,IAAK,SAASC,GACZ,IAAID,EAMJ,OALAC,EAAIpV,SAAQ,SAASiV,IAChBE,EAAIF,QAAQI,GAALF,KACRA,EAAIF,MAGDE,GAGTrK,IAAK,SAASsK,GACZ,IAAItK,EAMJ,OALAsK,EAAIpV,SAAQ,SAASiV,IAChBnK,EAAImK,QAAQI,GAALvK,KACRA,EAAImK,MAGDnK,GAGTqG,iBAAkB,SAAS0D,GACzB,IAAIM,EAAIN,EAAK,GACX/J,EAAI+J,EAAK,GAQX,OAPFA,EAAK7U,SAAQ,SAASmG,GAClBA,EAAQgP,EACVA,EAAIhP,EACIA,EAAQ2E,IAChBA,EAAI3E,MAGG,CAAC2E,EAAIqK,IAGd,qBAAqBG,EAAGC,EAAGC,EAAGC,GAE5B,IAAIrR,EAAO,CACT,EAAI,GACJ,cAAe,EACf,GAAK,EACL,GAAK,GAGHsR,GAAOF,EAAG,GAAGC,EAAG,KAAKH,EAAG,GAAGE,EAAG,KAAKC,EAAG,GAAGD,EAAG,KAAKF,EAAG,GAAGE,EAAG,IAC1DG,GAAOL,EAAG,GAAGC,EAAG,KAAKD,EAAG,GAAGE,EAAG,KAAKD,EAAG,GAAGD,EAAG,KAAKA,EAAG,GAAGE,EAAG,IAC1DI,GAAOH,EAAG,GAAGD,EAAG,KAAKF,EAAG,GAAGC,EAAG,KAAKD,EAAG,GAAGC,EAAG,KAAKE,EAAG,GAAGD,EAAG,IAE9D,GAAU,GAAPI,EAED,OADAxR,EAAOyR,cAAa,EACbzR,EAEP,IAAI0R,EAAGJ,EAAME,EACTG,EAAGJ,EAAMC,EAIb,OAHAxR,EAAO0R,GAAGA,EACV1R,EAAO2R,GAAGA,EACV3R,EAAOkI,EAAEpR,KAAK4C,IAAIwX,EAAGpa,KAAK8C,KAAK9C,KAAK2B,MAAM0Y,EAAGD,GAAIQ,IAC9CA,EAAG,GAAGA,EAAG,GAAGC,EAAG,GAAGA,EAAG,GACtB3R,EAAOyR,cAAa,EACbzR,IAEPA,EAAOyR,cAAa,EACbzR,M,qBCzOf,IAAI5D,EAAM,CACT,0BAA2B,OAC3B,6BAA8B,OAC9B,qBAAsB,OACtB,wBAAyB,OACzB,2BAA4B,OAC5B,8BAA+B,OAC/B,qBAAsB,OACtB,wBAAyB,OACzB,sBAAuB,OACvB,yBAA0B,OAC1B,qBAAsB,OACtB,wBAAyB,OACzB,yBAA0B,OAC1B,4BAA6B,OAC7B,oBAAqB,OACrB,uBAAwB,OACxB,qBAAsB,OACtB,wBAAyB,OACzB,8BAA+B,OAC/B,iCAAkC,OAClC,2BAA4B,OAC5B,8BAA+B,OAC/B,aAAc,OACd,gBAAiB,OACjB,sBAAuB,OACvB,yBAA0B,OAC1B,cAAe,OACf,iBAAkB,OAClB,gCAAiC,OACjC,mCAAoC,OACpC,iCAAkC,OAClC,oCAAqC,OACrC,yBAA0B,OAC1B,4BAA6B,OAC7B,oBAAqB,OACrB,uBAAwB,OACxB,wBAAyB,OACzB,2BAA4B,OAC5B,qBAAsB,OACtB,wBAAyB,OACzB,yBAA0B,OAC1B,4BAA6B,OAC7B,wBAAyB,OACzB,2BAA4B,OAC5B,yBAA0B,OAC1B,4BAA6B,QAI9B,SAAS6G,EAAeC,GACvB,IAAIC,EAAKC,EAAsBF,GAC/B,OAAOG,EAAoBF,GAE5B,SAASC,EAAsBF,GAC9B,IAAIG,EAAoBC,EAAElH,EAAK8G,GAAM,CACpC,IAAIK,EAAI,IAAIC,MAAM,uBAAyBN,EAAM,KAEjD,MADAK,EAAEE,KAAO,mBACHF,EAEP,OAAOnH,EAAI8G,GAEZD,EAAeS,KAAO,WACrB,OAAOxF,OAAOwF,KAAKtH,IAEpB6G,EAAeU,QAAUP,EACzB9M,EAAOC,QAAU0M,EACjBA,EAAeE,GAAK","file":"js/chunk-2bc55e7a.ab00b0ca.js","sourcesContent":["const modules = require('../../moduleHandler.js');\nconst gm = modules.getModule('GeneralMethods');\nconst Link = modules.getModule('Link');\nconst constraint = modules.getModule('Constraint');\n\nmodule.exports=class joint extends constraint{\n  constructor(link1,link2,degOfFreedom1,degOfFreedom2,index){\n    //convention assumes that link1.to = zeroLink.to=zeroLink.from=link2.from\n    //and zeroLink is of length zero.\n    super(true,false,\"joint\",index);\n    this.link1=link1;\n    this.link2=link2;\n\n    this.degOfFreedom1=degOfFreedom1;\n    this.degOfFreedom2=degOfFreedom2;\n\n    this.from=link1.belongsTo;\n    this.to=link2.belongsTo;\n\n    this.zeroLink=new Link(link1.to,link2.to,true,false);\n    this.angle=this.getAngle();\n    this.rigidityConstant=0.5;\n  }\n\n  getAngle(){\n    return this.link2.intersectAngleTo(this.link1);\n  }\n\n  bend(deg){\n    this.link1.rotAroundToBy(deg*(this.link2.length/(this.link1.length+this.link2.length)));\n    this.link1.rotAroundFromBy(deg*(this.link2.length/(this.link1.length+this.link2.length)));\n    this.link2.rotAroundToBy(-deg*(this.link1.length/(this.link1.length+this.link2.length)));\n    this.link2.rotAroundFromBy(-deg*(this.link1.length/(this.link1.length+this.link2.length)));\n  }\n\n  effect(){\n    if(this.active&&this.alive){\n      this.zeroLink.effect();\n      this.bend(this.rigidityConstant*(this.getAngle()-this.angle));\n    }\n  }\n}\n","const modules = require('../../moduleHandler.js');\nconst gm = modules.getModule('GeneralMethods');\nconst Link = modules.getModule('Link');\nconst constraint = modules.getModule('Constraint');\n\n\nmodule.exports=class angleLink extends constraint{\n  constructor(link1,link2,index){\n    super(true,false,\"angleLink\",index);\n    this.link1=link1;\n    this.link2=link2;\n\n    this.angle=this.getAngle();\n    this.rigidityConstant=0.1;\n  }\n\n  getAngle(){\n    return gm.clockwiseAngleBetween(this.link1.vector(),gm.neg(this.link2.vector()))\n  }\n\n  bend(deg){\n    this.link1.rotAroundToBy(deg*(this.link2.length/(this.link1.length+this.link2.length)));\n    this.link1.rotAroundFromBy(deg*(this.link2.length/(this.link1.length+this.link2.length)));\n    this.link2.rotAroundToBy(-deg*(this.link1.length/(this.link1.length+this.link2.length)));\n    this.link2.rotAroundFromBy(-deg*(this.link1.length/(this.link1.length+this.link2.length)));\n  }\n\n  effect(){\n    if(this.active&&this.alive){\n      this.bend(this.rigidityConstant*(this.getAngle()-this.angle));\n    }\n  }\n}\n","const modules = require('../../moduleHandler.js');\nconst gm = modules.getModule('GeneralMethods');\nconst constraint = modules.getModule('Constraint');\n\nmodule.exports= class link extends constraint{\n  constructor(from,to,active,visable,index){\n    super(active,visable,\"link\",index);\n\n    this.from=from;\n    this.to=to;\n\n    this.length=gm.size(from.x,to.x);\n    this.springConstant=0.05; //set to 0.5 for max rigidity\n  }\n\n  toJSON(){\n    var data={\n      \"index\":this.index\n    }\n    return data;\n  }\n\n  perpDistance(x){\n    return gm.dot(gm.minus(x,this.from.x),gm.dev(gm.perp(gm.minus(this.to.x,this.from.x)),this.length));\n  }\n\n  horiDistance(x){\n    return gm.dot(gm.minus(x,this.from.x),gm.dev(gm.minus(this.to.x,this.from.x),this.length));\n  }\n\n  distanceFrom(x){\n    return gm.len(this.perpDistance(x),this.horiDistance(x));\n  }\n\n  intersectAngleTo(link){\n    var lenProduct=this.getLength()*link.getLength();\n    var dotProduct= gm.dot(gm.minus(link.to.x,link.from.x),gm.minus(this.to.x,this.from.x));\n    var ratio=dotProduct/lenProduct;\n\n\n    //this is a hacky fix\n    if(ratio>1){\n      ratio=1;\n    }else if(ratio<-1){\n      ratio=-1;\n    }\n\n    if(this.perpDistance(link.from.x)>0){\n      return Math.acos(ratio);\n    }else{\n      return 2*Math.PI-Math.acos(ratio);\n    }\n  }\n\n  vectorNorm(){\n    return gm.dev(gm.minus(this.from.x,this.to.x),this.length);\n  }\n\n  vector(){\n    return gm.minus(this.to.x,this.from.x);\n  }\n\n  perpVectorNorm(){\n    return gm.dev(gm.perp(gm.minus(this.from.x,this.to.x)),this.length);\n  }\n\n  rotAroundFromBy(deg){\n    var v=gm.rot(deg,gm.minus(this.to.x,this.from.x));\n    this.to.setLocation(gm.add(this.from.x,v));\n  }\n\n  rotAroundToBy(deg){\n    var v=gm.rot(deg,gm.minus(this.from.x,this.to.x));\n    this.from.setLocation(gm.add(this.to.x,v));\n  }\n\n  effect(){\n    if(this.active&&this.alive){\n      var s=gm.minus(this.to.x,this.from.x);\n      var dotProduct=gm.dot(s,s);\n      if(dotProduct>0){\n        s=gm.mult(s,0.5-(this.length*this.length/(dotProduct+this.length*this.length)));\n        this.from.update_x_xd(s);\n        this.to.update_x_xd(gm.neg(s));\n      }\n    }\n  }\n\n  stressMeasure(){\n    var s=gm.minus(this.to.x,this.from.x);\n    var d=0.5*(this.length-gm.len(s));\n    s=gm.mult(gm.norm(s),d);\n    return [d,s];\n  }\n\n  stressResponse(s){\n    this.from.update_x_xd(gm.neg(s));\n    this.to.update_x_xd(s);\n  }\n\n  getLength(){\n    if(this.length>0){\n      var delta=gm.minus(this.from.x,this.to.x)\n      return 0.5*(this.length*this.length+gm.dot(delta,delta))/this.length;\n    }else{\n      return gm.size(this.from.x,this.to.x);\n    }\n  }\n\n  setLength(){\n    this.length=gm.size(this.from.x,this.to.x);\n  }\n\n  kill(){\n    this.from.kill();\n    this.to.kill();\n    this.alive=false;\n  }\n}\n","const modules = require('../../moduleHandler.js');\n\nconst fs = require('fs');\n\n\nvar SL = module.exports = {\n  save: function(enviro,fileName){\n    var Data = JSON.stringify(enviro,fileName);\n    fs.writeFile(fileName, Data, (err) => {\n  \t\t// throws an error\n  \t\tif (err) throw err;\n\n  \t\t// success case, the file was saved\n  \t\tconsole.log('file saved!');\n  \t});\n  },\n\n  load: function(fileName) {\n    var loc = window.location.pathname;\n    var dir = loc.substring(0, loc.lastIndexOf('/'));\n    if (dir != '') {dir=`${dir}/`}\n    var Data_string = fs.readFileSync(`${dir}${fileName}`,  'utf8');\n    return this.parse(Data_string)\n  },\n\n  parse: function(Data_string){\n    const pl = modules.getModule('SpaceTime');\n    const builder = modules.getModule('Builder');\n    const Features = modules.getModule('featureInstances');\n    const Laws = modules.getModule('lawInstances');\n    data = JSON.parse(Data_string);\n    build = new builder();\n\n    data.points.forEach(function(point){\n      if(point.type==\"point\"){\n        build.addPoint(point.x);\n      }\n    });\n\n    data.convexSets.forEach(function(convexSet){\n      var convexSetPoints=convexSet.pointIndices.map(pointIndex=>build.environment.points[pointIndex]);\n      build.addConvexSet(convexSetPoints);\n    });\n\n\n    data.constraints.forEach(function(constraint){\n       if(constraint.type==\"glue\"){\n         var convexSet1=build.environment.convexSets[constraint.from];\n         var convexSet2=build.environment.convexSets[constraint.to];\n         build.addGlueBetweenConvexSets(convexSet1,convexSet2);\n       }else if(constraint.type==\"joint\"){\n         var convexSet1=build.environment.convexSets[constraint.from];\n         var convexSet2=build.environment.convexSets[constraint.to];\n         build.addJointBetweenConvexSets(convexSet1,convexSet2);\n       }else if(constraint.type==\"beam\"){\n         build.addBeam(build.environment.points[constraint.from],build.environment.points[constraint.to],\n             constraint.forceUpperBound,constraint.forceLowerBound,\n             constraint.compLowerBound,constraint.resistance);\n       }\n    })\n\n    data.structures.forEach(function(structure){\n      var elements=structure.elements.map(index=>build.environment.convexSets[index]);\n      var newStructure=build.addStructure(elements,[]);\n    })\n\n    data.laws.forEach(function(law){\n      build.environment.laws[law]=Laws[law];\n    })\n\n    data.relPoints.forEach(function(point){\n        build.addRelPoint(point.x,build.environment.constraints[point.anchor]);\n    });\n\n    data.graphics.forEach(function(line){\n      build.addLine(build.environment.relPoints[line.from],build.environment.relPoints[line.to]);\n    });\n\n    build.buildOrderArrays();\n\n    return build.environment;\n  },\n\n  loadGTBFormat: function(fileName) {\n    var loc = window.location.pathname;\n    var dir = loc.substring(0, loc.lastIndexOf('/'));\n    if (dir != '') {dir=`${dir}/`}\n    var Data_string = fs.readFileSync(`${dir}${fileName}`,  'utf8');\n    return this.parseGTBFormat(Data_string)\n  },\n\n  parseGTBFormat(Data_string){\n    const pl = modules.getModule('SpaceTime');\n    const builder = modules.getModule('Builder');\n    const Features = modules.getModule('featureInstances');\n    const Laws = modules.getModule('lawInstances');\n    data = JSON.parse(Data_string);\n    build = new builder();\n    var obj_dict = {}\n\n    Object.values(data)\n      .filter((obj)=>obj.type == 'Point')\n      .forEach((obj)=>obj_dict[obj.uuid] = build.addPoint(obj.x))\n\n    var convexSets = []\n    Object.values(data)\n      .filter((obj)=>obj.type == 'ConvexSet')\n      .forEach((obj)=>{\n        var convexSetPoints = obj.lines\n          .map(line_key=>data[line_key])\n          .map(line=>obj_dict[line.from])\n        var convexSet = build.addConvexSet(convexSetPoints);\n        obj_dict[obj.uuid] = convexSet\n        convexSets.push(obj)\n      })\n\n    Object.values(data)\n      .filter((obj)=>obj.type == 'Beam')\n      .forEach((obj)=>{\n        var from = obj_dict[obj.from]\n        var to = obj_dict[obj.to]\n        obj_dict[obj.uuid] = build.addBeam(from, to, null, null , null);\n      })\n\n    Object.values(data)\n      .filter((obj)=>obj.type == 'Joint')\n      .forEach((obj)=>{\n        var convexSetPair = convexSets\n          .filter(set=>set.joints.includes(obj.uuid))\n          .map(set=>obj_dict[set.uuid])\n        obj_dict[obj.uuid] = build.addJointBetweenConvexSets(...convexSetPair);\n      })\n\n    Object.values(data)\n      .filter((obj)=>obj.type == 'Glue')\n      .forEach(obj=>{\n        var convexSetPair = convexSets\n          .filter(set=>set.glues.includes(obj.uuid))\n          .map(set=>obj_dict[set.uuid])\n        build.addGlueBetweenConvexSets(...convexSetPair);\n      })\n\n    Object.values(data)\n      .filter((obj)=>obj.type == 'Structure')\n      .forEach(obj=>{\n        var convexSets = obj.sets\n          .map(set=>obj_dict[set])\n        var newStructure=build.addStructure(convexSets,[]);\n      })\n\n    Object.values(data)\n      .filter(obj=>obj.type == 'Graphic')\n      .forEach(obj=>{\n        var convexSet = convexSets\n          .filter(set=>set.graphics.includes(obj.uuid))\n          .map(set => obj_dict[set.uuid])[0]\n        var anchor = convexSet.links[0]\n        obj.lines.forEach((line)=>{\n          var from = build.addRelPoint(data[data[line].from].x, anchor);\n          var to = build.addRelPoint(data[data[line].to].x, anchor);\n          build.addLine(from, to);\n        })\n      })\n\n    return build.environment;\n  }\n}\n","module.exports= class primative{\n\tconstructor(index){\n      this.name=\"\";\n      this.index=index;\n      this.active=true;\n\t\t\tthis.alive=true;\n      this.belongsTo=null;\n\t\t\tthis.enviroment=null;\n\t\t\tthis.x=[];\n\t\t\tthis.radius=0;\n  }\n}\n","const modules = require('../../moduleHandler.js');\nconst gm = modules.getModule('GeneralMethods');\nconst primative=modules.getModule('Primative');\n\nmodule.exports= class relPoint extends primative{\n\n\tconstructor(x,index,anchor){\n\t\tsuper(index);\n\t\tthis.x=x.slice(0)\n\t\tthis.anchor=anchor;\n\t\tthis.xRelToAnchor=[-anchor.horiDistance(x),-anchor.perpDistance(x)];\n\t}\n\n\ttoJSON(){\n\t\tvar data={\n\t\t\t\t\"type\":\"relPoint\",\n\t\t\t\t\"index\":this.index,\n\t\t\t\t\"x\":this.x,\n\t\t\t\t\"anchor\":this.anchor.index\n\t\t\t};\n\t\t\treturn data;\n\t}\n\n\tupdate_x(){\n\t\tvar vector = gm.add(gm.mult(this.anchor.vectorNorm(),this.xRelToAnchor[0]),gm.mult(this.anchor.perpVectorNorm(),this.xRelToAnchor[1]));\n\t\tthis.x=gm.add(this.anchor.from.x,vector);\n\t}\n\n\tupdate_x_xd(xd){\n\t\tthis.x=gm.add(this.x,xd);\n\t}\n\n\tsetLocation(to){\n\t\tthis.x=to;\n\t}\n\n\tfixTo(structure){\n\t\tthis.anchor=structure.elements[0].links[0];\n\t\tthis.xRelToAnchor=[-this.anchor.horiDistance(this.x),-this.anchor.perpDistance(this.x)];\n\t}\n}\n","//\nconst modules = require('../../moduleHandler.js');\nconst gm = modules.getModule('GeneralMethods');\n\nconst ConvexSet = modules.getModule('ConvexSet');\nconst Particle = modules.getModule('Particle');\n\nconst cc = modules.getModule('CollisionChecker');\nconst cr = modules.getModule('CollisionResponse');\n\nmodule.exports= class feature{\n  //a Feature is an interaction rule which describes interactions between Structures\n\tconstructor(name){\n      this.name=name;\n      this.active=true;\n  }\n\n  toJSON(){\n\t\tvar data={\n\t\t\t\t\"name\":this.name\n\t\t\t};\n\n\t\t\treturn data;\n\t}\n\n\tmultiScan(structure1,structure2,depth){\n\t\tvar reports=[];\n\t\tif(this.CheckBoundingRect(structure1,structure2)){\n\t\t\tvar report;\n\t\t\tstructure1.elements.forEach(function(thisElement){\n\t  \t\tstructure2.elements.forEach(function(thatElement){\n\t  \t\t\t\tif(thisElement instanceof ConvexSet && thatElement instanceof ConvexSet){\n\t  \t\t\t\t\treport=cc.convexTest(thisElement.links,thatElement.links);\n\t  \t\t\t\t} else if (thisElement instanceof Particle && thatElement instanceof ConvexSet){\n\t\t\t\t\t\t\treport = cc.xToB(thisElement,thatElement.links);\n\t\t\t\t\t\t\treport.depth=report.depth-thisElement.radius;\n\t\t\t\t\t\t} else if (thisElement instanceof ConvexSet && thatElement instanceof Particle){\n\t\t\t\t\t\t\treport = cc.xToB(thatElement,thisElement.links);\n\t\t\t\t\t\t\treport.depth=report.depth-thatElement.radius;\n\t  \t\t\t\t} else if (thisElement instanceof Particle && thatElement instanceof Particle){\n\t\t\t\t\t\t\treport ={\n\t\t\t\t\t\t\t\t\"type\":\"p2p\",\n\t\t\t\t\t\t\t\t\"point1\":thisElement,\n\t\t\t\t\t\t\t\t\"point2\":thatElement,\n\t\t\t\t\t\t\t\t\"depth\":gm.size(thisElement.x,thatElement.x)-thatElement.radius-thisElement.radius\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(report.depth<depth){\n\t\t\t\t\t\t\treports.push(report);\n\t\t\t\t\t\t}else{\n\n\t\t\t\t\t\t}\n\t\t\t\t})\n\t  \t})\n\t\t}\n\t\treturn reports;\n\t}\n\n\tCheckBoundingRect(structure1,structure2){\n\t\tif(structure1.stuff.hasBoundingRect&&structure2.stuff.hasBoundingRect){\n\t\t\tif(gm.pos(structure1.stuff.center.x[0]-structure2.stuff.center.x[0])-structure1.stuff.r[0]-structure2.stuff.r[0]>0){\n\t\t\t\treturn false;\n\t\t\t}else{\n\t\t\t\tif(gm.pos(structure1.stuff.center.x[1]-structure2.stuff.center.x[1])-structure1.stuff.r[1]-structure2.stuff.r[1]>0){\n\t\t\t\t\treturn false;\n\t\t\t\t}else{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\treturn true;\n\t\t}\n\t}\n}\n","const modules = require('../../moduleHandler.js');\nconst gm = modules.getModule('GeneralMethods');\nconst primative=modules.getModule('Primative');\n\nmodule.exports= class point extends primative{\n\n\tconstructor(x,index,active) {\n\t\tsuper(index);\n\t\tthis.x=x.slice(0);\n\t\tthis.x_old=x.slice(0);\n\t}\n\n\ttoJSON(){\n\t\tvar data={\n\t\t\t\t\"type\":\"point\",\n\t\t\t\t\"x\":this.x,\n\t\t\t\t\"x_old\":this.x_old,\n\t\t\t\t\"active\":this.active,\n\t\t\t\t\"index\":this.index,\n\t\t\t};\n\t\treturn data;\n\t}\n\n\tcopy(index){\n\t\tvar pointCopy= new point(this.x,index,this.active);\n\t\treturn pointCopy;\n\t}\n\n\tupdate_v(){\n\t\tif(this.active&&this.alive){\n\t\t\tvar v=gm.minus(this.x,this.x_old);\n\t\t\tthis.x=gm.add(this.x,v);\n\t\t\tthis.x_old=gm.add(this.x_old,v);\n\t\t}\n\t}\n\n\tupdate_x_xd(d){\n\t\tif(this.active&&this.alive){\n\t\t\tthis.x=gm.add(this.x,d);\n\t\t}\n\t}\n\n\tupdate_x_old_xd(d){\n\t\tif(this.active&&this.alive){\n\t\t\tthis.x_old=gm.add(this.x_old,d);\n\t\t}\n\t}\n\n\tfindCenter(){\n\t\treturn this.x\n\t}\n\n\tmove(d){\n\t\tthis.x[0]=this.x[0]+d[0];\n\t\tthis.x[1]=this.x[1]+d[1];\n\t\tthis.x_old[0]=this.x_old[0]+d[0];\n\t\tthis.x_old[1]=this.x_old[1]+d[1];\n\t}\n\n\tsetLocation(to){\n\t\tthis.x=to;\n\t}\n\n\tsetLocationOld(to){\n\t\tthis.x_old=to;\n\t}\n\n\tsetStatic(){\n\t\tthis.active=false;\n\t}\n\n\tsetActive(){\n\t\tthis.active=true;\n\t}\n\n\trotAround(point,deg){\n\t\t//rotate around point\n\t\tif(this.active&&this.alive){\n\t\t\tvar v=gm.rot(deg,gm.minus(this.x,point.x));\n\t\t\tthis.setLocation(gm.add(point.x,v));\n\t\t}\n\t}\n\n\tdistanceFrom(x){\n\t\treturn gm.size(x,this.x);\n\t}\n\n\tkill(){\n\t\tthis.alive=false;\n\t}\n}\n","const modules = require('./moduleHandler.js')\n\nconst names=[\n  'SpaceTime',\n  'AngleLink',\n  'Beam',\n  'Constraint',\n  'Glue',\n  'Joint',\n  'Link',\n  'Builder',\n  'SL',\n  'Feature',\n  'featureInstances',\n  'GeneralMethods',\n  'Law',\n  'lawInstances',\n  'CollisionChecker',\n  'CollisionResponse',\n  'ConvexSet',\n  'Line',\n  'Particle',\n  'Point',\n  'Primative',\n  'RelPoint',\n  'Structure',\n]\n\nnames.forEach(function(name){\n  module.exports[name] = modules.getModule(name)\n})\n","const modules = require('../../moduleHandler.js');\nconst gm = modules.getModule('GeneralMethods');\nconst point=modules.getModule('Point');\nconst convexSet=modules.getModule('ConvexSet');\n\nmodule.exports= class particle extends point{\n\n\tconstructor(x,v,index,radius) {\n\t\tsuper(x,v,index);\n\t\tthis.x=x.slice(0);\n\t\tthis.x_old=gm.minus(x,v);\n    this.radius=radius;\n\t\tthis.belongsTo=[];\n\t}\n\n\ttoJSON(){\n\n\t}\n\n\tcheckProximityTo(primative){\n\t\tif(primative instanceof convexSet){\n\t\t\treturn cc.xToB(primative.links,this);\n\t\t}else if(primative instanceof particle){\n\t\t\treturn {\n\t\t\t\t\"type\":\"p2p\",\n\t\t\t\t\"point1\":this,\n\t\t\t\t\"point2\":primative,\n\t\t\t\t\"depth\":gm.size(this.x,primative.x)-this.radius-primative.radius\n\t\t\t}\n\t\t}\n\t}\n}\n","//rule between two strutures...(Interaction rule...)\n\nconst modules = require('../../moduleHandler.js');\nconst gm = modules.getModule('GeneralMethods');\nconst cc = modules.getModule('CollisionChecker');\nconst cr = modules.getModule('CollisionResponse');\nconst Feature = modules.getModule('Feature');\n\n////////////////////////////////////////////////////////////////////////////////////////////////////\n////////////////////////////////////////////////////////////////////////////////////////////////////\nvar features = module.exports = {\n\tmass: (function(){\n\t\t\tvar mass = new Feature(\"mass\");\n\t    mass.interaction= function(structure1,structure2){\n\t\t\t\t//var reports = mass.multiScan(structure1,structure2,0);\n\t\t\t\tvar reports = structure1.checkProximityTo(structure2,0)\n\t\t\t\treports.forEach(function(report){\n\t\t\t\t\tif(report.type==\"c2c\"||report.type==\"p2c\"){\n\t\t\t\t\t\tcr.responseWithStickyRisistance(report,0.1,0.1);\n\t\t\t\t\t}else if(report.type=\"p2p\"){\n\t\t\t\t\t\tcr.particleResponse(report);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\treturn mass;\n\t})(),\n\n\tearthed: (function(){\n\t\t\tvar earthed = new Feature(\"earthed\");\n\t    earthed.interaction= function(structure1,structure2){\n\t\t\t\tif(structure1.name==\"earth\"||structure2.name==\"earth\"){\n\t\t\t\t\tvar reports = earthed.multiScan(structure1,structure2,0);\n\t\t\t\t\treports.forEach(function(report){\n\t\t\t\t\t\tif(report.type==\"c2c\"||report.type==\"p2c\"){\n\t\t\t\t\t\t\tcr.classicalResponse(report);\n\t\t\t\t\t\t}else if(report.type=\"p2p\"){\n\t\t\t\t\t\t\tcr.particleResponse(report);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\treturn earthed;\n\t})(),\n\n\tresistantMass: (function(){\n\t\t\tvar mass = new Feature(\"resistantMass\");\n\t\t\tmass.interaction= function(structure1,structure2){\n\t\t\t\tvar reports = mass.multiScan(structure1,structure2,0);\n\t\t\t\treports.forEach(function(report){\n\t\t\t\t\tif(report.type==\"c2c\"||report.type==\"p2c\"){\n\t\t\t\t\t\tcr.responseWithRisistance(report,0.1);\n\t\t\t\t\t}else if(report.type=\"p2p\"){\n\t\t\t\t\t\tcr.particleResponse(report);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\treturn mass;\n\t})(),\n\n\tstickyResistantMass: (function(){\n\t\t\tvar mass = new Feature(\"resistantMass\");\n\t\t\tmass.interaction= function(structure1,structure2){\n\t\t\t\tvar reports = mass.multiScan(structure1,structure2,1);\n\t\t\t\treports.forEach(function(report){\n\t\t\t\t\tif(report.type==\"c2c\"||report.type==\"p2c\"){\n\t\t\t\t\t\tcr.responseWithStickyRisistance(report,0.01,0.01);\n\t\t\t\t\t}else if(report.type==\"p2p\"){\n\t\t\t\t\t\tcr.particleResponse(report);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\treturn mass;\n\t})(),\n\n\texploding: (function(){\n\t\t\tvar fragile = new Feature(\"exploding\");\n\t\t\tfragile.interaction= function(structure1,structure2){\n\t\t\t\tvar reports = fragile.multiScan(structure1,structure2,1);\n\t\t\t\treports.forEach(function(report){\n\t\t\t\t\t\tif(report.depth<-6){\n\t\t\t\t\t\t\t[structure1,structure2].forEach(function(structure){\n\t\t\t\t\t\t\t\tvar builder=structure.environment.builder;\n\t\t\t\t\t\t\t\tstructure.elements.forEach(function(element){\n\t\t\t\t\t\t\t\t\telement.glues.forEach(function(glue){\n\t\t\t\t\t\t\t\t\t\tglue.off();\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\tvar features= [];\n\t\t\t\t\t\t\t\t\tstructure.features.forEach(function(feature){\n\t\t\t\t\t\t\t\t\t\tif(feature.name!=\"exploding\"){\n\t\t\t\t\t\t\t\t\t\t\tfeatures.push(feature);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\tbuilder.addStructure([element],features);\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\tbuilder.deleteStructure(structure);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t}\n\t\treturn fragile;\n\t})()\n}\n","const modules = require('../../moduleHandler.js');\nconst ConvexSet = modules.getModule('ConvexSet');\nconst Particle = modules.getModule('Particle');\n\nmodule.exports= class law{\n  //A law is defined on a set of structures within the physical enviroment and on\n  //each step will act on those specified structures. An example would be a gravitational\n  //law which would effect all structures with mass.\n\n\tconstructor(name){\n      this.name=name;\n      this.active=true;\n      this.structures=[];\n\t\t\tthis.environment=null;\n  }\n\n  toJSON(){\n\t\tvar data={\n      \"name\":this.name,\n\t\t\t\"structures\":this.structures\n\t\t};\n\n\t\treturn data;\n\t}\n\n  applyToAllPoints(applyLaw){\n    //applyLaw should be a function that takes a point and updates it\n    this.structures.forEach(function(structure){\n      structure.elements.forEach(function(element){\n        if(element instanceof ConvexSet){\n          element.links.forEach(function(link){\n            applyLaw(link.from)\n          })\n        }else if(element instanceof Particle){\n          applyLaw(element);\n        }\n      })\n    })\n  }\n\n\tapplyToStructures(applyLaw){\n\t\tthis.structures.forEach(function(structure){\n\t\t\tapplyLaw(structure);\n\t\t})\n\t}\n}\n","const modules = require('../../moduleHandler.js');\n\nconst gm = modules.getModule('GeneralMethods');\nconst cc = modules.getModule('CollisionChecker');\nconst primative = modules.getModule('Primative');\nconst ConvexSet = modules.getModule('ConvexSet');\nconst Particle = modules.getModule('Particle');\n\n////////////////////////////////////////////////////////////////////////////////////////////////////\n////////////////////////////////////////////////////////////////////////////////////////////////////\n\nmodule.exports=class structure extends primative{\n\tconstructor(elements,index){\n\t\tsuper(index);\n    this.elements=elements;\n    this.features=[];\n\t\tthis.stuff={\n\t\t\t\"hasBoundingRect\":false\n\t\t};\n  }\n\n\ttoJSON(){\n\t\tvar data={\n\t\t\t\"elements\":this.elements.map(element=>element.index),\n\t\t\t\"features\":this.features.map(feature=>feature.name)\n\t\t}\n\t\treturn data;\n\t}\n\n  addElement(element){\n    this.elements.push(element);\n    element.belongsTo=this;\n  }\n\n  interaction(structure){\n    this.features.forEach(function(featureA){\n\t\t\tstructure.features.forEach(function(featureB){\n\t\t\t\tif(featureA.name==featureB.name){\n\t\t\t\t\tfeatureA.interaction(structure,this);\n\t\t\t\t}\n\t\t\t},this)\n\t\t},this)\n  }\n\n\tgetElementIndices(){\n\t\tvar indices=this.elements.map(element=>element.index);\n\t\treturn indices;\n\t}\n\t//\n\n\tfix(){\n\t\tthis.elements.forEach(function(element){\n\t\t\telement.fix();\n\t\t})\n\t}\n\n\tkill(){\n\t\tthis.elements.forEach(function(element){\n\t\t\telement.kill();\n\t\t})\n\t}\n\n\tfindCenter(){\n\t\tvar xAv=[0,0];\n    this.elements.forEach(function(element){\n      if(element instanceof ConvexSet){\n        xAv=gm.add(xAv,element.findCenter());\n      } else if (element instanceof Particle) {\n\t\t\t\txAv=gm.add(xAv,element.findCenter());\n\t\t\t}\n    });\n    return gm.dev(xAv,this.elements.length);\n\t}\n\n\tfindBoundingRect(){\n\t\tvar center=this.findCenter();\n\t\tvar r=0;\n\t\tvar rNew=[0,0];\n    this.elements.forEach(function(element){\n      if(element instanceof ConvexSet){\n\t\t\t\telement.links.forEach(function(link){\n\t\t\t\t\trNew = gm.size(link.from.x,center);\n\t\t\t\t\tif(rNew>r){\n\t\t\t\t\t\tr=rNew;\n\t\t\t\t\t}\n\t\t\t\t})\n      }\n    });\n    return [center,[r,r]];\n\t}\n\n\tcheckProximityTo(structure,depth){\n\t\tvar reports=[]\n\t\tif(this.CheckBoundingRect(structure)){\n\t\t\tthis.elements.forEach(function(thisElement){\n\t\t\t\tstructure.elements.forEach(function(thatElement){\n\t\t\t\t\tvar report=thisElement.checkProximityTo(thatElement)\n\t\t\t\t\tif(report.depth<depth){\n\t\t\t\t\t\treport.collisionPair=[thisElement,thatElement]\n\t\t\t\t\t\treports.push(report)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t})\n\t\t}\n\t\treturn reports\n\t}\n\n\tCheckBoundingRect(structure){\n\t\tif(this.stuff.hasBoundingRect&&structure.stuff.hasBoundingRect){\n\t\t\tif(gm.pos(this.stuff.center.x[0]-structure.stuff.center.x[0])-this.stuff.r[0]-structure.stuff.r[0]>0){\n\t\t\t\treturn false;\n\t\t\t}else{\n\t\t\t\tif(gm.pos(this.stuff.center.x[1]-structure.stuff.center.x[1])-this.stuff.r[1]-structure.stuff.r[1]>0){\n\t\t\t\t\treturn false;\n\t\t\t\t}else{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\treturn true;\n\t\t}\n\t}\n\n\tnudge(v){\n\t\tthis.elements.forEach(function(element){\n\t\t\tif(element instanceof ConvexSet){\n\t\t\t\telement.nudge(v)\n\t\t\t}else if(element instanceof Particle){\n\t\t\t\telement.update_x_xd(v)\n\t\t\t}\n\t\t})\n\t}\n\n\trandomNudges(force){\n\t\tvar v=[]\n\t\tthis.elements.forEach(function(element){\n\t\t\tv=[(Math.random()-0.5)*force,(Math.random()-0.5)*force]\n\t\t\tif(element instanceof ConvexSet){\n\t\t\t\telement.nudge(v)\n\t\t\t}else if(element instanceof Particle){\n\t\t\t\telement.update_x_xd(v)\n\t\t\t}\n\t\t})\n\t}\n}\n","module.exports = class constraint{\n  constructor(active,visable,type,index){\n    this.index=index;\n    this.belongsTo=null;\n    this.active=active;\n    this.alive=true;\n    this.visable=visable;\n    this.type=type;\n\n    this.from=null;\n    this.to=null;\n  }\n\n  toJSON(){\n    var data={\n        \"type\": this.type,\n        \"from\": null,\n        \"to\": null\n      };\n\n    if( this.from !== null ){\n      data.from=this.from.index;\n      data.to=this.to.index;\n    } else {\n      data.from=this.from;\n      data.from=this.to;\n    }\n    return data;\n  }\n\n  on(){\n    this.active=true;\n  }\n\n  off(){\n    this.active=false;\n  }\n\n  kill(){\n    this.alive=false;\n  }\n}\n","var map = {\n\t\"./CollisionChecker\": \"a005\",\n\t\"./CollisionChecker.js\": \"a005\",\n\t\"./CollisionResponse\": \"883d\",\n\t\"./CollisionResponse.js\": \"883d\",\n\t\"./ConvexSet\": \"8ed7\",\n\t\"./ConvexSet.js\": \"8ed7\",\n\t\"./Line\": \"da07\",\n\t\"./Line.js\": \"da07\",\n\t\"./Particle\": \"3d50\",\n\t\"./Particle.js\": \"3d50\",\n\t\"./Point\": \"34ee\",\n\t\"./Point.js\": \"34ee\",\n\t\"./Primative\": \"1ecf\",\n\t\"./Primative.js\": \"1ecf\",\n\t\"./RelPoint\": \"22f4\",\n\t\"./RelPoint.js\": \"22f4\",\n\t\"./Structure\": \"64b6\",\n\t\"./Structure.js\": \"64b6\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"6aca\";","const modules = require('../../moduleHandler.js');\nconst gm = modules.getModule('GeneralMethods');\nconst Link = modules.getModule('Link');\nconst constraint = modules.getModule('Constraint');\n\nmodule.exports=class glue extends constraint{\n  constructor(linkA,linkB,index){\n    super(true,false,\"glue\",index)\n    //takes two oppositly oriented links and glues them\n    this.link1=new Link(linkA.from,linkB.to,true,false);\n\t\tthis.link2=new Link(linkA.to,linkB.from,true,false);\n\n    this.from=linkA.belongsTo;\n    this.to=linkB.belongsTo;\n\n    this.fragilityConstant=0.5;\n    this.fragile=true;\n  }\n\n  effect(){\n    if(this.active&&this.alive){\n      this.link1.effect();\n      this.link2.effect();\n    }\n  }\n\n  on(){}//overrides super on\n}\n","//classes\nconst modules = require('../../moduleHandler.js');\n\nconst sl = modules.getModule('SL');\nconst gm = modules.getModule('GeneralMethods');\n\nconst pl = modules.getModule('SpaceTime');\n\nconst Point = modules.getModule('Point');\nconst Particle = modules.getModule('Particle');\nconst Joint = modules.getModule('Joint');\nconst Link = modules.getModule('Link');\nconst Beam = modules.getModule('Beam');\nconst AngleLink = modules.getModule('AngleLink');\nconst Glue = modules.getModule('Glue');\nconst ConvexSet = modules.getModule('ConvexSet');\nconst Structure = modules.getModule('Structure');\n\nconst Line = modules.getModule('Line');\nconst RelPoint = modules.getModule('RelPoint');\n\n\nconst LawInstances= modules.getModule('lawInstances');\n\nmodule.exports =class build{\n  constructor(environmentName){\n    this.environment=new pl(environmentName, this);\n    this.environment.laws.finite=LawInstances[\"finite\"](this.environment);\n    this.environment.laws.gravity=LawInstances[\"gravity\"];\n    this.environment.laws.airResistance=LawInstances[\"airResistance\"];\n  }\n\n  returnEnviro(){\n    return this.environment;\n  }\n\n//load\n  load(fileName){\n    this.environment=sl.load(fileName);\n  }\n\n  mergeLoad(filename){\n    this.addEnvironment(this.environment,sl.load(fileName));\n  }\n\n//save\n  save(fileName){\n    sl.save(this.environment,fileName);\n  }\n\n//points\n  addPoint(x){\n    //x can be either a instance of point or just [x,y] co-ords\n    //the added point inherits environmental laws\n    if(x instanceof Point){\n      x.index=this.environment.points.length;\n      x.environment=this.environment;\n      this.environment.points.push(x);\n    }else{\n      var newPoint=new Point(x,this.environment.points.length);\n      newPoint.environment=this.environment;\n      this.environment.points.push(newPoint);\n    }\n    return this.environment.points[this.environment.points.length-1];\n  }\n\n  addPoints(xList){\n    xList.forEach(function(x){\n      this.addPoint(x);\n    },this);\n  }\n\n  copyPoint(point){\n    var x=point.x.slice();\n    var newPoint = this.addPoint(x);\n    return newPoint;\n  }\n\n//graphics\n  addRelPoint(x,anchor){\n    var newRelPoint=new RelPoint(x,this.environment.relPoints.length,anchor);\n    this.environment.relPoints.push(newRelPoint);\n    return newRelPoint;\n  }\n\n  addLine(x,y){\n    var newLine = new Line(x,y,this.environment.graphics.length);\n    this.environment.graphics.push(newLine);\n    newLine.from.anchor.belongsTo.graphics.push(newLine);\n    return newLine;\n  }\n\n//particles\n  addParticle(x,radius,v){\n    var newParticle = new Particle(x,v,this.environment.points.length,radius);\n    newParticle.environment=this.environment;\n    //we think of particles as point but with associated strucutre capacity\n    this.environment.points.push(newParticle);\n    return newParticle;\n  }\n\n//links\n  addVisableLink(from,to){\n    var newLink = new Link(from,to,true,true,this.environment.constraints.length);\n    this.environment.constraints.push(newLink);\n    return newLink;\n  }\n\n  addInvisableLink(from,to){\n    var newLink = new Link(from,to,true,false,this.environment.constraints.length);\n    this.environment.constraints.push(newLink);\n    return newLink;\n  }\n//Beams\n  addBeam(from,to,forceUpperBound,forceLowerBound,compLowerBound,resistance){\n    var newBeam= new Beam(from,to,forceUpperBound,forceLowerBound,compLowerBound,resistance,this.environment.constraints.length);\n    this.environment.constraints.push(newBeam);\n    return newBeam;\n  }\n\n//Glues\n  addGlueBetweenLinkPairs(link1,link2){\n    var newGlue = new Glue(link1,link2,this.environment.constraints.length);\n    link1.belongsTo.glues.push(newGlue);\n    link2.belongsTo.glues.push(newGlue);\n    this.environment.constraints.push(newGlue);\n    return newGlue;\n  }\n\n//Joints\n  addAngleLink(link1,link2){\n    var newAngleLink=new AngleLink(link1,link2,this.environment.constraints.length);\n    this.environment.constraints.push(newAngleLink);\n    return newAngleLink;\n\n  }\n\n  addJointBetweenLinkPairs(linkPair1,linkPair2){\n\t\tvar link1=linkPair1[0];\n\t\tvar link2=linkPair2[0];\n\t\tvar degOfFreedom1=linkPair1[0].intersectAngleTo(linkPair1[1]);\n\t\tvar degOfFreedom2=linkPair2[0].intersectAngleTo(linkPair2[1]);\n\t\tvar newJoint= new Joint(link1,link2,degOfFreedom1,degOfFreedom2,this.environment.constraints.length);\n\t\tlink1.belongsTo.joints.push(newJoint);\n\t\tlink2.belongsTo.joints.push(newJoint);\n\t\tthis.environment.constraints.push(newJoint);\n    return newJoint\n\t}\n\n\n//ConvexSets\n  addConvexSet(points){\n\n    var sizeOfConvexSet=points.length;\n    var convexSetLinks=[];\n    var convexSetAngleLinks=[];\n\n    //build convex sets edges\n    for(var i=0;i<points.length;i++){\n      var nextLink=this.addVisableLink(points[i],points[(i+1)%sizeOfConvexSet]);\n      convexSetLinks.push(nextLink);\n    }\n\n    //Add anglelinks\n    var M=convexSetLinks.length;\n    for(var i=0;i<M;i++){\n      var newAngleLink =this.addAngleLink(convexSetLinks[i],convexSetLinks[(i+1)%M]);\n      convexSetAngleLinks.push(newAngleLink);\n    }\n\n    //build Convex set instance that inherits environmental laws\n    var nextConvexSet = new ConvexSet(convexSetLinks,convexSetAngleLinks,this.environment.convexSets.length);\n    //nextConvexSet.laws=this.environment.laws;??\n    this.environment.convexSets.push(nextConvexSet);\n\n    //add convex set to each points belongsTo\n    //Will require adapting the toJson files...\n    for(var i=0;i<points.length;i++){\n      points[i].belongsTo=nextConvexSet;\n    }\n\n    return nextConvexSet\n  }\n\n\taddGlueBetweenConvexSets(convexSet1,convexSet2){\n\t\tvar links=[];\n\t\tvar minSum=1000;\n\t\tvar temp=0;\n\n\t  convexSet1.links.forEach(function(link1){\n\t    convexSet2.links.forEach(function(link2){\n\t\t\t\ttemp=gm.size(link1.from.x,link2.to.x)+gm.size(link1.to.x,link2.from.x);\n\t      if(temp<minSum){\n\t\t\t\t\t\tminSum=temp;\n\t          links=[link1,link2];\n\t      }\n\t    });\n\t  });\n\t  this.addGlueBetweenLinkPairs(links[0],links[1]);\n\t};\n\n  addJointBetweenConvexSets(convexSet1,convexSet2){\n\t\tvar indexPair=[];\n\n\t\tvar min=1000;\n\t\tvar temp=0;\n\n\t  convexSet1.links.forEach(function(link1,index1){\n\t    convexSet2.links.forEach(function(link2,index2){\n\t\t\t\ttemp=gm.size(link1.to.x,link2.to.x);\n\t      if(temp<min){\n\t        min=temp;\n\t\t\t\t\tindexPair=[index1,index2];\n\t      }\n\t    });\n\t  });\n\n\t\tvar numLinks1=convexSet1.links.length;\n\t  var numLinks2=convexSet2.links.length;\n\n\t\tvar pair1=[convexSet1.links[indexPair[0]],convexSet1.links[(indexPair[0]+1)%numLinks1]];\n\t\tvar pair2=[convexSet2.links[indexPair[1]],convexSet2.links[(indexPair[1]+1)%numLinks2]];\n\n\t  return this.addJointBetweenLinkPairs(pair1,pair2);\n\t};\n\n  //structures and features\n  addStructure(elements,features){\n\t\tvar newStructure=new Structure(elements);\n\t\tnewStructure.environment=this.environment;\n    features.forEach(function(feature){\n      newStructure.features.push(feature);\n    })\n\t\tthis.environment.structures.push(newStructure);\n    elements.forEach(function(element){\n      element.belongsTo.push(newStructure);\n    })\n    return newStructure;\n\t}\n\n  addBoundingRect(structure){\n    var rect=structure.findBoundingRect();\n    structure.stuff.center=new RelPoint(rect[0],this.environment.relPoints.length,structure.elements[0].links[0]);\n    structure.stuff.r=gm.add(rect[1],[10,10]);\n    structure.stuff.hasBoundingRect=true;\n    this.environment.relPoints.push(structure.stuff.center);\n    this.buildOrderArrays();\n  }\n\n  namesAllStructures(name){\n    this.environment.structures.forEach(function(structure){\n      structure.name=name;\n    })\n  }\n\n  addFeaturesTo(features,name){\n    if(name==\"all\"){\n      this.environment.structures.forEach(function(structure){\n        structure.features.concat(features);\n      })\n    }else{\n      var namedSet=this.environment.structures.filter(structure=>structure.name==name);\n      namedSet.forEach(function(structure){\n        structure.features.concat(features);\n      })\n    }\n  }\n\n  //laws\n\n  addLawTo(law,name){\n    if(name==\"all\"){\n      law.structures.concat(this.environment.structures);\n    }else {\n      var namedSet=this.environment.structures.filter(structure=>structure.name==name);\n      law.structures.concat(law);\n    }\n  }\n\n  //merge environments\n\n  addEnvironment(enviro){\n\n\t\tvar numPoints=this.environment.points.length;\n\t\tenviro.points.forEach(function(point,i){\n\t\t\tpoint.index=numPoints+i;\n\t\t\tthis.points.push(point);\n\t\t},this.environment)\n\n\t\tvar numSets=this.environment.convexSets.length;\n\t\tenviro.convexSets.forEach(function(convexSet,j){\n\t\t\tconvexSet.index=numSets+j;\n\t\t\tthis.convexSets.push(convexSet);\n\t\t},this.environment)\n\n\t\tenviro.constraints.forEach(function(constraint){\n\t\t\tthis.constraints.push(constraint);\n\t\t},this.environment)\n\n    enviro.structures.forEach(function(structure){\n      this.structures.push(structure);\n    },this.environment)\n\n    //merges law sets without including replicates.\n    Object.keys(enviro.laws).forEach(function(thatLaw){\n      Object.keys(this.laws).forEach(function(thisLaw){\n        if(thisLaw!==\"null\" && thatLaw !==\"null\"){\n          if(thisLaw==thatLaw){\n              enviro.laws[thatLaw].structures.forEach(function(structure){\n                this.laws[thisLaw].structures.push(structure);\n              }, this)\n          }else{\n            this.laws[thatLaw]=enviro.laws[thatLaw];\n          }\n        }\n      },this)\n\t\t},this.environment)\n\n\t\tthis.buildOrderArrays();\n\t}\n\n  // Remove methods\n  removeStructureWithName(name){\n    var structure = this.environment.structures\n      .find(structure=>structure.name==name)\n    this.removeStructure(structure)\n  }\n\n  removeStructure(structureToRemove){\n    this.environment.structures = this.environment.structures\n      .filter(structure=>structure != structureToRemove)\n\n    var particlesToRemove = structureToRemove.elements\n      .filter((ele)=>ele instanceof Particle)\n\n    this.environment.constraints = this.environment.constraints\n      .filter(c=>{\n        if (c instanceof Link) return !particlesToRemove.includes(c.from)\n        return true\n      })\n\n    this.environment.points = this.environment.points\n      .filter(p=>!particlesToRemove.includes(p))\n\n    var convexSetsToRemove = structureToRemove.elements\n      .filter((ele)=>ele instanceof ConvexSet)\n\n    var linksToRemove = convexSetsToRemove\n      .reduce((acc, cur) => [...acc, ...cur.links],[])\n\n    var jointsToRemove = convexSetsToRemove\n      .reduce((acc, cur) => [...acc, ...cur.joints],[])\n\n    var gluesToRemove = convexSetsToRemove\n      .reduce((acc, cur) => [...acc, ...cur.glues],[])\n\n    var angleLinksToRemove = convexSetsToRemove\n      .reduce((acc, cur) => [...acc, ...cur.angleLinks],[])\n\n    var pointsToRemove = linksToRemove\n      .reduce((acc, cur) => [...acc, cur.from, cur.to],[])\n\n    this.environment.points = this.environment.points\n      .filter(p=>!pointsToRemove.includes(p))\n\n    this.environment.constraints = this.environment.constraints\n      .filter(c=>{\n        if (c instanceof AngleLink) return !angleLinksToRemove.includes(c)\n        if (c instanceof Joint) return !jointsToRemove.includes(c)\n        if (c instanceof Glue) return !gluesToRemove.includes(c)\n        if (c instanceof Link) return !linksToRemove.includes(c)\n        return True\n      })\n\n    Object.values(this.environment.laws)\n      .forEach(value=>value.structures = value.structures\n        .filter(structure=>structure != structureToRemove))\n\n    this.recalibrateIndexing();\n    this.buildOrderArrays();\n  }\n\n  deleteStructure(structureA){\n    this.environment.structures.forEach(function(structureB,index){\n      if(structureB===structureA){\n        this.structures.splice(index,1);\n      }\n    },this.environment);\n  }\n\n  //initialize order arrays//\n\n\tbuildOrderArrays(){\n    this.environment.constraintsRunOrder=[];\n\t\tfor(var k=0;k<this.environment.constraints.length;k++){\n\t\t\tthis.environment.constraintsRunOrder.push(k);\n\t\t}\n\t}\n\n  //////////////////////////////////////////////////////////////////////////////\n  ////////////////////////////////Effects///////////////////////////////////////\n  //////////////////////////////////////////////////////////////////////////////\n\n  addExplodeStucture(components,n,size,strength,vel,lifeLength,at,connectedDensity,features,gravity){\n    for(var k =0;k<components;k++){\n      var pList=[];\n      for(var i=0; i<n;i++){\n        var x=gm.add([Math.floor((Math.random()-0.5)*size),Math.floor((Math.random()-0.5)*size)],at);\n        var v=gm.add([(Math.random()-0.5)*strength,(Math.random()-0.5)*strength],vel);\n        pList.push(this.addParticle(x,0,v));\n      }\n\n      var N=pList.length;\n\n      pList.forEach(function(particle,i){\n        var numOfLinks = Math.floor(Math.random()*connectedDensity);\n        if(numOfLinks==0){numOfLinks++};\n        var links=[];\n        for(var j=0;j<numOfLinks;j++){\n          var boolInLinks=false;\n          var M=Math.floor(Math.random()*N);\n          links.forEach(function(link){\n            if(link==M){\n              boolInLinks=true;\n            }\n          });\n         if(!boolInLinks){\n           this.addVisableLink(pList[i],pList[M]);\n         }\n        }\n      },this);\n\n      var newStructure=this.addStructure(pList,[]);\n      newStructure.name=\"explosion\";\n\n      if(lifeLength>0){\n        newStructure.stuff.lifeLength=lifeLength;\n        newStructure.stuff.age=0;\n        this.environment.laws.finite.structures.push(newStructure);\n      }\n\n      if(gravity){\n        this.environment.laws[\"gravity\"].structures.push(newStructure);\n      }\n\n      features.forEach(function(feature){\n        newStructure.features.push(feature);\n      });\n    }\n\n    this.buildOrderArrays();\n\n  }\n\n  recalibrateIndexing(){\n    this.environment.points.forEach(function(point,index){\n      point.index=index;\n    });\n    this.environment.constraints.forEach(function(constraint,index){\n      constraint.index=index;\n    });\n    this.environment.convexSets.forEach(function(set,index){\n      set.index=index;\n    });\n    this.environment.graphics.forEach(function(line,index){\n      line.index=index;\n    });\n    this.environment.relPoints.forEach(function(point,index){\n      point.index=index;\n    });\n  }\n\n  cleanEnvironment(){\n    this.environment.name=null;\n    this.environment.points=[];\n    this.environment.constraints=[]\n    this.environment.convexSets=[];\n    this.environment.structures=[];\n    this.environment.relPoints=[];\n    this.environment.graphics=[];\n    this.environment.laws={};\n    this.environment.builder=null;\n    this.environment.time=0;\n    this.environment.realCenter=null;\n    this.environment.relativeCenter=[];\n    this.environment.constraintsRunOrder=[];\n    this.environment.localRate=2;\n    this.environment.globalRate=2;\n    this.environment.totalRate=5;\n    this.environment.stuff={};\n    this.environment.builder=this;\n  };\n\n}\n","const modules = require('../../moduleHandler.js');\nconst gm = modules.getModule('GeneralMethods');\nconst link = modules.getModule('Link');\n\nconst BOUNDS=1;\n\nmodule.exports= class beam extends link{\n  constructor(from,to,forceUpperBound,forceLowerBound,compLowerBound,resistance,index){\n    super(from,to,true,false,index);\n    this.type=\"beam\";\n    this.forceUpperBound=4*BOUNDS;\n    this.forceLowerBound=-BOUNDS;\n    this.compLowerBound=this.length-100;\n    this.resistance=0.025;\n    this.springConstant=0.25;\n  }\n\n  toJSON(){\n\t\tvar data={\n        \"type\":\"beam\",\n\t\t\t\t\"from\":this.from.index,\n        \"to\":this.to.index,\n        \"forceUpperBound\":this.forceUpperBound,\n        \"forceLowerBound\":this.forceLowerBound,\n        \"compLowerBound\":this.compLowerBound,\n        \"resistance\":this.resistance\n\t\t\t};\n      return data;\n\t}\n\n  effect(){\n    if(this.active&&this.alive){\n      var s=gm.minus(this.to.x,this.from.x);\n      var dotProduct=gm.dot(s,s);\n      if(dotProduct>0){\n        s=gm.mult(s,0.5-(this.length*this.length/(dotProduct+this.length*this.length)));\n        this.from.update_x_xd(s);\n        this.to.update_x_xd(gm.neg(s));\n      }\n    }\n  }\n}\n","const modules = require('../../moduleHandler.js');\nconst gm = modules.getModule('GeneralMethods');\n\nexports.wallCollisionTest=function(A,leftWall,rightWall,upWall,downWall){\n  A.forEach(function(item){\n    if(item.x[0]<leftWall){\n      item.update_x_xd([-item.x[0]+leftWall,0]);\n      item.update_x_old_xd([item.x[0]-leftWall,0]);\n      return;\n    }else if(item.x[0]>rightWall){\n      item.update_x_xd([-item.x[0]+rightWall,0]);\n      item.update_x_old_xd([item.x[0]-rightWall,0]);\n      return;\n    }else if(item.x[1]<upWall){\n      item.update_x_xd([0,-item.x[1]+upWall]);\n      item.update_x_old_xd([0,item.x[1]-upWall]);\n      return;\n    }else if(item.x[1]>downWall){\n      item.update_x_xd([0,-item.x[1]+downWall]);\n      item.update_x_old_xd([0,item.x[1]-downWall]);\n      return;\n    }\n  });\n}\n\nexports.particleResponse= function(collisionReport,r){\n    var x=collisionReport.point1.x;\n    var y=collisionReport.point2.x;\n    var colVector = gm.norm(gm.minus(x,y));\n    //update x & y:\n    var depth = Math.abs(collisionReport.depth/2)\n    collisionReport.point1.update_x_xd(gm.mult(colVector,depth));\n    collisionReport.point2.update_x_xd(gm.mult(colVector,-depth));\n}\n\nexports.classicalResponse= function(collisionReport){\n    var x=collisionReport.point.x;\n    var y=collisionReport.link.from.x;\n    var z=collisionReport.link.to.x;\n    var d_2=collisionReport.link.length;\n    var normal = gm.perp(gm.dev(gm.minus(z,y),d_2));\n    var d_1=gm.dot(gm.minus(x,y),gm.dev(gm.minus(z,y),d_2));\n\n    //update x:\n    collisionReport.point.update_x_xd(gm.mult(normal,gm.upperBound(-collisionReport.depth/2)));\n    collisionReport.point.update_x_old_xd(gm.mult(normal,gm.upperBound(collisionReport.depth/2)));\n\n    //update edge points: y,z:\n    collisionReport.link.from.update_x_xd(gm.mult(normal,gm.upperBound(d_2*collisionReport.depth/gm.lowerBound(4*(d_2-d_1)))));\n    collisionReport.link.from.update_x_old_xd(gm.mult(normal,gm.upperBound(-d_2*collisionReport.depth/gm.lowerBound(4*(d_2-d_1)))));\n    collisionReport.link.to.update_x_xd(gm.mult(normal,gm.upperBound(collisionReport.depth*d_2/gm.lowerBound(4*d_1))));\n    collisionReport.link.to.update_x_old_xd(gm.mult(normal,gm.upperBound(-collisionReport.depth*d_2/gm.lowerBound(4*d_1))));\n}\n\nexports.SCR=function(collisionReport){\n  //SCR stands for Space collision repsonse\n  var x=collisionReport.point.x;\n  var y=collisionReport.link.from.x;\n  var z=collisionReport.link.to.x;\n  var d_2=collisionReport.link.length;\n  var normal = gm.perp(gm.dev(gm.minus(z,y),d_2));\n  var d_1=gm.dot(gm.minus(x,y),gm.dev(gm.minus(z,y),d_2));\n\n  var vx=gm.minus(collisionReport.point.x,collisionReport.point.x_old);\n  var vy=gm.minus(collisionReport.link.from.x,collisionReport.link.from.x_old);\n  var vz=gm.minus(collisionReport.link.to.x,collisionReport.link.to.x_old);\n\n  var v_incident=gm.add(gm.mult(vy,(d_1/d_2)),gm.mult(vz,(1-(d_1/d_2))));\n  var vDiff=gm.add(v_incident,vx);\n\n  return vDiff\n}\n\nexports.destroy=function(structure){\n  structure.elements.forEach(function(element){\n    element.glues.forEach(function(glue){\n      if(Math.random()>0.5){\n        glue.active=false\n      }\n    })\n  })\n  structure.environment.builder.addExplodeStucture(3,5,10,1,[0,0],0,structure.findCenter(),2,[],false)\n\n}\n\nexports.responseWithRisistance= function(collisionReport,resistance){\n    var x=collisionReport.point.x;\n    var y=collisionReport.link.from.x;\n    var z=collisionReport.link.to.x;\n\n    var d_2=collisionReport.link.length;\n    var tan=gm.dev(gm.minus(z,y),d_2);\n    var normal = gm.perp(tan);\n    var d_1=gm.dot(gm.minus(x,y),tan);\n\n    var vx=gm.minus(collisionReport.point.x,collisionReport.point.x_old);\n    var vy=gm.minus(collisionReport.link.from.x,collisionReport.link.from.x_old);\n    var vz=gm.minus(collisionReport.link.to.x,collisionReport.link.to.x_old);\n\n    //update x:\n    collisionReport.point.update_x_xd(gm.mult(normal,gm.upperBound(-collisionReport.depth/2)));\n    collisionReport.point.update_x_old_xd(gm.mult(normal,gm.upperBound(collisionReport.depth/2)));\n    collisionReport.point.update_x_xd(gm.mult(tan,gm.dot(vx,tan)*(-resistance)));\n\n    //update edge points: y,z:\n    collisionReport.link.from.update_x_xd(gm.mult(normal,gm.upperBound(d_2*collisionReport.depth/gm.lowerBound(4*(d_2-d_1)))));\n    collisionReport.link.from.update_x_xd(gm.mult(tan,gm.dot(vy,tan)*(-resistance)));\n    collisionReport.link.from.update_x_old_xd(gm.mult(normal,gm.upperBound(-d_2*collisionReport.depth/gm.lowerBound(4*(d_2-d_1)))));\n    collisionReport.link.to.update_x_xd(gm.mult(normal,gm.upperBound(collisionReport.depth*d_2/gm.lowerBound(4*d_1))));\n    collisionReport.link.to.update_x_xd(gm.mult(tan,gm.dot(vz,tan)*(-resistance)));\n    collisionReport.link.to.update_x_old_xd(gm.mult(normal,gm.upperBound(-collisionReport.depth*d_2/gm.lowerBound(4*d_1))));\n}\n\nexports.responseWithStickyRisistance= function(collisionReport,resistance,stickyness){\n  /////FOR STICkyness...\n    var x=collisionReport.point.x;\n    var y=collisionReport.link.from.x;\n    var z=collisionReport.link.to.x;\n\n    var d_2=collisionReport.link.length;\n    var tan=gm.dev(gm.minus(z,y),d_2);\n    var normal = gm.perp(tan);\n    var d_1=gm.dot(gm.minus(x,y),tan);\n\n    var vx=gm.minus(collisionReport.point.x,collisionReport.point.x_old);\n    var vy=gm.minus(collisionReport.link.from.x,collisionReport.link.from.x_old);\n    var vz=gm.minus(collisionReport.link.to.x,collisionReport.link.to.x_old);\n\n    //var v_incident=gm.dot(normal,vx)+gm.dot(normal,vy)*d_2/gm.lowerBound(4*(d_2-d_1))+\n    //        gm.dot(normal,vz)*d_2/gm.lowerBound(4*d_1);\n\n    var v_incident=gm.add(gm.mult(vy,(d_1/d_2)),gm.mult(vz,(1-(d_1/d_2))));\n\n    if(collisionReport.depth<0){\n      //update x:\n      collisionReport.point.update_x_xd(gm.mult(tan,gm.dot(vx,tan)*(-resistance)));\n\n      //update edge points: y,z:\n      collisionReport.link.from.update_x_xd(gm.mult(tan,gm.dot(vy,tan)*(-resistance)));\n      collisionReport.link.to.update_x_xd(gm.mult(tan,gm.dot(vz,tan)*(-resistance)));\n\n\n      collisionReport.point.update_x_xd(gm.mult(normal,gm.upperBound(-collisionReport.depth/4)));\n      //collisionReport.point.update_x_old_xd(gm.mult(normal,gm.upperBound(collisionReport.depth/2)));\n      collisionReport.link.to.update_x_xd(gm.mult(normal,gm.upperBound(d_2*collisionReport.depth/(4*gm.lowerBound(2*(d_2-d_1))))));\n      //collisionReport.link.from.update_x_old_xd(gm.mult(normal,gm.upperBound(-d_2*collisionReport.depth/(2*gm.lowerBound(2*(d_2-d_1))))));\n      collisionReport.link.from.update_x_xd(gm.mult(normal,gm.upperBound(d_2*collisionReport.depth/(4*gm.lowerBound(2*d_1)))));\n      //collisionReport.link.to.update_x_old_xd(gm.mult(normal,gm.upperBound(-d_2*collisionReport.depth/(2*gm.lowerBound(2*d_1)))));\n    }\n\n    var vDiff=gm.len(gm.add(v_incident,vx));\n\n    if(vDiff<0.25){\n      collisionReport.point.update_x_xd(gm.mult(vx,gm.dot(vx,normal)*(-stickyness)));\n\n      v_incident=gm.norm(v_incident);\n\n      collisionReport.link.from.update_x_xd(gm.mult(v_incident,gm.dot(vy,v_incident)*(-stickyness)));\n      collisionReport.link.to.update_x_xd(gm.mult(v_incident,gm.dot(vz,v_incident)*(-stickyness)));\n    }\n}\n","const modules = require('../../moduleHandler.js');\nconst gm = modules.getModule('GeneralMethods');\nconst cc = modules.getModule('CollisionChecker');\nconst Point = modules.getModule('Point');\nconst primative = modules.getModule('Primative');\nconst particle = modules.getModule('Particle');\n\nmodule.exports= class convexSet extends primative{\n\tconstructor(links,angleLinks,index){\n\t\tsuper(index);\n\n\t\tthis.links=links;\n\t\tthis.angleLinks=angleLinks;\n    this.glues=[];\n\t\tthis.joints=[];\n\t\tthis.graphics=[];\n\t\tthis.belongsTo=[];\n\n\n\t\tthis.links.forEach(function(link){\n\t\t\tlink.belongsTo=this;\n\t\t},this);\n\n\t\tthis.fixAntiClockwiseOrientaion();\n\t}\n\n\ttoJSON(){\n\t\tvar data={\n\t\t\t\t\"pointIndices\":this.links.map(link=>link.from.index)\n\t\t\t};\n\n\t\t\treturn data;\n\t}\n\n\treverseOrient(){\n\t\tvar temp=0;\n\t\tthis.links.forEach(function(link){\n\t\t\ttemp=link.from;\n\t\t\tlink.from=link.to;\n\t\t\tlink.to=temp;\n\t\t});\n\n\t\tvar numLinks=this.links.length;\n\t\tvar tempLinks=this.links.slice();\n\n\t\ttempLinks.forEach(function(link,index){\n\t\t\tthis.links[numLinks-index-1]=link;\n\t\t},this);\n\t}\n\n\tfindCenter(){\n\t\tvar center=[0,0];\n\t\tthis.links.forEach(function(link){\n\t\t\tcenter=gm.add(link.from.x,center);\n\t\t})\n\t\treturn gm.dev(center,this.links.length);\n\t}\n\n\tdistanceFrom(x){\n\t\treturn cc.xInB(x,this.links);\n\t}\n\n\tfixAntiClockwiseOrientaion(){\n\t\tif(this.links[0].perpDistance(this.links[1].to.x)>0){\n\t\t\tthis.reverseOrient();\n\t\t}\n\t}\n\n\tfix(){\n\t\tthis.links.forEach(function(link){\n\t\t\tlink.from.setStatic();\n\t\t})\n\t}\n\n\tkill(){\n\t\t//note that this method doesn't currently kill angleLinks associated to convex set...\n\t\tthis.links.forEach(function(link){\n\t\t\tlink.kill();\n\t\t})\n\t\tthis.glues.forEach(function(glue){\n\t\t\tglue.kill();\n\t\t})\n\t\tthis.joints.forEach(function(joint){\n\t\t\tjoint.kill();\n\t\t})\n\t}\n\n\tgetPoints(){\n\t\treturn this.links.reduce((acc, cur) => [...acc, cur.to], [])\n\t}\n\n\tgetPointIndexBounds(){\n\t\tvar MinMax = gm.getIntListBounds(this.links.map(link=>link.from.index));\n\t\treturn MinMax\n\t}\n\n\tgetLinkIndexBounds(){\n\t\tvar MinMax = gm.getIntListBounds(this.links.map(link=>link.index));\n\t\treturn MinMax\n\t}\n\n\tgetAngleLinkIndexBounds(){\n\t\tvar MinMax = gm.getIntListBounds(this.angleLinks.map(angleLink=>angleLink.index));\n\t\treturn MinMax\n\t}\n\n\tcheckProximityTo(primative){\n\t\tif(primative instanceof convexSet){\n\t\t\treturn cc.convexTest(this.links,primative.links)\n\t\t}else if(primative instanceof particle){\n\t\t\treturn cc.xToB(primative,this.links);\n\t\t}\n\t}\n\n\tnudge(v){\n\t\tthis.links.forEach(function(link){\n\t\t\tlink.from.update_x_xd(v)\n\t\t})\n\t}\n}\n","var map = {\n\t\"./GeneralMethods\": \"ed9b\",\n\t\"./GeneralMethods.js\": \"ed9b\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"905b\";","var map = {\n\t\"./Builder\": \"7a30\",\n\t\"./Builder.js\": \"7a30\",\n\t\"./SL\": \"1c1b\",\n\t\"./SL.js\": \"1c1b\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"9a90\";","var map = {\n\t\"./Law\": \"51ce\",\n\t\"./Law.js\": \"51ce\",\n\t\"./lawInstances\": \"d113\",\n\t\"./lawInstances.js\": \"d113\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"9ec5\";","const modules = require('../../moduleHandler.js');\nconst gm = modules.getModule('GeneralMethods');\n\nexports.jointTest= function(joint){\n  //check see if joint is fully extended and if so constrain/bounce\n}\n\nexports.convexTest= function(A,B){\n  //computes collision between two convex sets each given as an array of there edge links.\n  //shuffle the order of A in order to ensure flat edge sliding infractions don't occur\n\n  A=gm.shuffleStart(A);\n  B=gm.shuffleStart(B);\n\n  var report1=XgivenW(A,B);\n  var report2=XgivenW(B,A);\n\n  if(report1.depth<report2.depth){\n    return report1;\n  }else{\n    return report2;\n  }\n}\n\nfunction W_max(pointInB,edgesInA){\n  var temp=0;\n\n  var wReport ={\n    \"type\":\"c2c\",\n    \"collision\":null,\n    \"link\":null,\n    \"point\":pointInB,\n    \"depth\":-10000\n  }\n\n  edgesInA.forEach(function(edge){\n    temp=edge.perpDistance(pointInB.x);\n    if(temp>wReport.depth){\n      wReport.link=edge;\n      wReport.depth=temp;\n    }\n  });\n\n  if(wReport.depth<0){\n    wReport.collision=true;\n  }\n\n  return wReport;\n}\n\nfunction Xgivenw(pointsInB,edgeInA){\n\n  var eReport={\n    \"type\":\"c2c\",\n    \"collision\":null,\n    \"link\":edgeInA,\n    \"points\":pointsInB,\n    \"depth\":10\n  }\n\n  eReport.points=eReport.points.filter(point=>edgeInA.perpDistance(point.from.x)<0);\n\n  return eReport;\n}\n\nfunction XgivenW(pointsInB,edgesInA){\n  var wReport=W_max(pointsInB[0].from,edgesInA);\n  var eReport;\n  if(wReport.collision){\n    return wReport;\n  }else{\n    eReport=Xgivenw(pointsInB,wReport.link);\n    if(eReport.points.length==0){\n      if(!wReport.collision){\n        wReport.collision=false;\n      }\n      return wReport;\n    }else{\n      return XgivenW(eReport.points,edgesInA);\n    }\n  }\n}\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nexports.xInB= function(x,B){\n  var d_max=-10000;\n  var d=0;\n  B.forEach(function(link){\n    d=link.perpDistance(x);\n    if(d>d_max){\n      d_max=d;\n    }\n  });\n\n  return d_max;\n}\n\nexports.xToB= function(point,B){\n\n  var report ={\n    \"link\":null,\n    \"point\":point,\n    \"depth\":-10000\n  }\n\n  var d=0;\n  B.forEach(function(link){\n    d=link.perpDistance(point.x);\n    if(d>report.depth){\n      report.depth=d;\n      report.link=link;\n    }\n  });\n  report.type=\"p2c\"\n  return report;\n}\n","var map = {\n\t\"./AngleLink\": \"0e0a\",\n\t\"./AngleLink.js\": \"0e0a\",\n\t\"./Beam\": \"808c\",\n\t\"./Beam.js\": \"808c\",\n\t\"./Constraint\": \"65fb\",\n\t\"./Constraint.js\": \"65fb\",\n\t\"./Glue\": \"7010\",\n\t\"./Glue.js\": \"7010\",\n\t\"./Joint\": \"0a4b\",\n\t\"./Joint.js\": \"0a4b\",\n\t\"./Link\": \"1bd4\",\n\t\"./Link.js\": \"1bd4\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"a78d\";","\nexports.getModule = function(name) {\n  if(name==\"Builder\"||name==\"SL\"){\n    return require(__dirname + '/Engine/Construction/' + name);\n  }else if(name==\"AngleLink\"||name==\"Beam\"||name==\"Constraint\"||\n    name==\"Glue\"||name==\"Joint\"||name==\"Link\"){\n      return require(__dirname + '/Engine/Constraints/' + name);\n  }else if(name==\"Feature\"||name==\"featureInstances\"){\n    return require(__dirname + '/Engine/Features/' + name);\n  }else if(name==\"Law\"||name==\"lawInstances\"){\n    return require(__dirname + '/Engine/Laws/' + name);\n  }else if(name==\"ConvexSet\"||name==\"Point\"||name==\"Primative\"||\n    name==\"Structure\"||name==\"Particle\"||\n    name==\"CollisionChecker\"||name==\"CollisionResponse\"||name==\"RelPoint\"||name==\"Line\"){\n      return require(__dirname + '/Engine/Structures/' + name);\n  }else if(name==\"GeneralMethods\"){\n    return require(__dirname + '/Engine/General/' + name);\n  }else if(name==\"SpaceTime\"){\n    return require(__dirname + '/Engine/' + name);\n  }else{\n    console.log(\"module not found\");\n  }\n}\n","var map = {\n\t\"./Feature\": \"26f1\",\n\t\"./Feature.js\": \"26f1\",\n\t\"./featureInstances\": \"4c1f\",\n\t\"./featureInstances.js\": \"4c1f\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"bf8c\";","const modules = require('../../moduleHandler.js');\nconst gm = modules.getModule('GeneralMethods');\nconst cc = modules.getModule('CollisionChecker');\nconst cr = modules.getModule('CollisionResponse');\nconst Law = modules.getModule('Law');\nconst Features = modules.getModule('featureInstances');\nconst Link = modules.getModule('Link');\nconst ConvexSet = modules.getModule('ConvexSet');\nconst Particle = modules.getModule('Particle');\n\n////////////////////////////////////////////////////////////////////////////////////////////////////\n////////////////////////////////////////////////////////////////////////////////////////////////////\nvar law = module.exports = {\n\tgravity: (function(){\n      var gravity = new Law(\"Gravity\");\n\t\t\tgravity.effects= function(){\n        this.applyToAllPoints(function(point){\n          point.update_x_xd([0,0.001]);\n        })\n      }\n      return gravity;\n    })(),\n\n  airResistance: (function(){\n      var airResistance = new Law(\"AirResistance\");\n      //airResistance.frictionalConstant=0.001;\n      airResistance.effects=function(){\n        this.applyToAllPoints(function(point){\n\t\t\t\t\tpoint.update_x_xd(gm.mult(gm.minus(point.x_old,point.x),0.002));\n        })\n      }\n    return airResistance;\n  })(),\n\n\tfinite: function(enviro){\n\t\tvar finite = new Law(\"lifeTime\");\n\t\tfinite.environment = enviro\n\t\tfinite.effects=function(){\n\t\t\tthis.applyToStructures(function(structure){\n\t\t\t\tif(structure.alive){\n\t\t\t\t\tif(structure.stuff.age>structure.stuff.lifeLength){\n\t\t\t\t\t\tstructure.kill();\n\t\t\t\t\t\tfinite.environment.builder\n\t\t\t\t\t\t\t.removeStructure(structure)\n\t\t\t\t\t}else{\n\t\t\t\t\t\tstructure.stuff.age++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t\treturn finite;\n\t},\n\n\tbowl: function(center, slope){\n\t\tvar bowl=new Law(\"bowl\")\n\t\tbowl.center = center\n\t\tbowl.slope = slope\n\t\tbowl.effects=function(){\n\t\t \tthis.applyToStructures(function(structure){\n\t\t\t\tvar elementCenter = structure.findCenter()\n\t\t\t\tvar vect = gm.norm(gm.minus(bowl.center, elementCenter))\n\t\t\t\tvar dist =  gm.size(bowl.center, elementCenter)\n\t\t\t\tvar strength = dist*dist* 0.000000001\n\t\t\t\tstructure.elements.forEach(element=>{\n\t\t\t\t\tif (element instanceof ConvexSet) {\n\t\t\t\t\t\telement.links.forEach(function(link){\n\t\t\t\t\t\t\tlink.from.update_x_xd(gm.mult(vect, strength))\n\t\t\t\t\t\t})\n\t\t\t\t\t} else if (element instanceof Particle) {\n\t\t\t\t\t\telement.update_x_xd(gm.mult(vect, strength))\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t})\n\t\t}\n\t\treturn bowl\n\t},\n\n\tboundary: function(leftWall,rightWall,downWall,upWall){\n\t\tvar boundary=new Law(\"boundary\")\n\t\tboundary.effects=function(){\n\t\t \tthis.applyToStructures(function(structure){\n\t\t\t\tvar center = structure.findCenter()\n\t\t\t\tif(center[0]>rightWall){\n\t\t\t\t\tstructure.elements.forEach(function(element){\n\t\t\t\t\t\tteleportElement(element, [-rightWall, 0])\n\t\t\t\t\t})\n\t\t\t\t} else if(center[0]<leftWall){\n\t\t\t\t\tstructure.elements.forEach(function(element){\n\t\t\t\t\t\tteleportElement(element, [rightWall, 0])\n\t\t\t\t\t})\n\t\t\t\t} else if(center[1]>upWall){\n\t\t\t\t\tstructure.elements.forEach(function(element){\n\t\t\t\t\t\tteleportElement(element, [0, -upWall])\n\t\t\t\t\t})\n\t\t\t\t} else if(center[1]<downWall){\n\t\t\t\t\tstructure.elements.forEach(function(element){\n\t\t\t\t\t\tteleportElement(element, [0, upWall])\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t\treturn boundary\n\t},\n}\n\nfunction teleportElement(element, point){\n\tif (element instanceof ConvexSet) {\n\t\tteleportConvexSet(element, point)\n\t} else if (element instanceof Particle) {\n\t\tteleportParticle(element, point)\n\t}\n}\n\nfunction teleportConvexSet(element, point){\n\telement.links.forEach(function(link){\n\t\tlink.from.update_x_xd(point)\n\t\tlink.from.update_x_old_xd(point)\n\t})\n}\n\nfunction teleportParticle(element, point){\n\telement.update_x_xd(point)\n\telement.update_x_old_xd(point)\n}\n","const modules = require('../../moduleHandler.js');\nconst gm = modules.getModule('GeneralMethods');\nconst point=modules.getModule('Primative');\n\nmodule.exports= class line{\n\tconstructor(x,y,index) {\n\t\tthis.from=x;\n    this.to=y;\n    this.visable=true;\n\t}\n\n  toJSON(){\n\t\tvar data={\n\t\t\t\t\"from\":this.from.index,\n        \"to\":this.to.index,\n\t\t\t\t\"index\":this.index\n\t\t\t};\n\t\t\treturn data;\n\t}\n}\n","const modules = require('../moduleHandler.js');\nconst gm = modules.getModule('GeneralMethods');\n\n//factor out this module. It appears here incorrectly should be at the level of laws?\nconst cr = modules.getModule('CollisionResponse');\n\n////////////////////////////////////////////////////////////////////////////////////////////////////\n////////////////////////////////////////////////////////////////////////////////////////////////////\n\n//rename components\nmodule.exports=class Grid{\n\n\tconstructor(name,builder){\n\t\tthis.name=name;\n\t\tthis.points=[];\n\t\tthis.constraints=[]\n\t\tthis.convexSets=[];\n\t\tthis.structures=[];\n\t\tthis.relPoints=[];\n\t\tthis.graphics=[];\n\t\tthis.laws={};\n\t\tthis.builder=builder;\n\t\tthis.time=0;\n\n\t\tthis.realCenter=null;\n\t\tthis.relativeCenter=[];\n\n\t\tthis.constraintsRunOrder=[];\n\n\t\tthis.localRate=2;\n\t\tthis.globalRate=2;\n\t\tthis.totalRate=5;\n\n\t\tthis.stuff={};\n\t}\n\n\ttoJSON(){\n\t\tvar data={\n\t\t\t\"points\":this.points,\n\t\t\t\"relPoints\":this.relPoints,\n\t\t\t\"graphics\":this.graphics,\n\t\t\t\"constraints\":this.constraints,\n\t\t\t\"convexSets\":this.convexSets,\n\t\t\t\"structures\":this.structures,\n\t\t\t\"laws\":Object.keys(this.laws).map(law=>law.name)\n\t\t}\n\t\treturn data;\n\t};\n\n\t//Location methods\n\n\tshiftScene(xd){\n\t\tthis.points.forEach(function(point){\n\t\t\tpoint.move(xd);\n\t\t\tpoint.move(xd);\n\t\t})\n\n\t\tthis.relPoints.forEach(function(point){\n\t\t\tpoint.update_x();\n\t\t})\n\t}\n\n\n\n\t///////////////////\n\t//Physics Methods//\n\t///////////////////\n\n\twallEffects(leftWall,rightWall,upWall,downWall){\n\t\tcr.wallCollisionTest(this.points,leftWall,rightWall,upWall,downWall);\n\t}\n\n\tconstraintEffects(n){\n\t\tfor(var l=0;l<n;l++){\n\t\t\t// this.constraintsRunOrder=gm.shuffle(this.constraintsRunOrder);\n\t\t\tthis.constraintsRunOrder.forEach(function(index){\n\t\t\t\tthis[index].effect();\n\t\t\t},this.constraints);\n\t\t}\n\t}\n\n\tinteractionEffects(){\n\t\tvar finish=false;\n\t\tthis.structures.forEach(function(thisStructure,thisIndex){\n\t\t\tthis.structures.forEach(function(thatStructure,thatIndex){\n\t\t\t\tif(thisIndex>thatIndex){\n\t\t\t\t\tthisStructure.interaction(thatStructure);\n\t\t\t\t}\n\t\t\t});\n\t\t},this);\n\t}\n\n\tstep(){\n\t\tObject.keys(this.laws).forEach(function(law){\n\t\t\tif(law!==\"null\"){\n\t\t\t\tthis.laws[law].effects();\n\t\t\t}\n\t\t},this)\n\n\t\tthis.points.forEach(function(point){\n\t\t\tpoint.update_v();\n\t\t});\n\t}\n\n\ttimeStep(){\n\n\t\tfor(var j=0;j<this.totalRate;j++){\n\t\t\tfor(var i=0;i<this.globalRate;i++){\n\t\t\t\tthis.interactionEffects();\n\t\t\t}\n\t\t\tfor(var i=0;i<this.localRate;i++){\n\t\t\t\tthis.step();\n\t\t\t\tthis.constraintEffects(1);\n\t\t\t\tif(this.realCenter!==null){\n\t\t\t\t\tvar toCenter=gm.minus(this.realCenter,this.relativeCenter.findCenter());\n\t\t\t\t\tthis.shiftScene(toCenter);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.time++;\n\t\t}\n\t\tthis.relPoints.forEach(function(point){\n\t\t\tpoint.update_x();\n\t\t});\n\t}\n}\n","//library of general functions\nvar GM = module.exports = {\n  sigma: function(x,d_1,y,d_2,z){\n    return this.dot(this.dev(this.minus(x,y),d_1),this.dev(this.perp(this.minus(z,y)),d_2));\n  },\n\n  shift_mod: function(n){\n    let j = function(i){\n      if(i>n-1){\n        return i-n;\n      }else if(i<0){\n        return i+n;\n      }else{\n        return i;\n      }\n    }\n    return j;\n  },\n\n  lowerBound: function(d){\n    return d;\n    if(d<0.1){\n      return 0.1;\n    }else{\n      return d;\n    }\n  },\n\n  upperBound: function(d){\n\n    const upperBound=1;\n    if(d>upperBound){\n      return upperBound;\n    }else if(d<-upperBound){\n      return -upperBound;\n    }else{\n      return d;\n    }\n  },\n\n  norm: function(v){\n\t\tvar d=this.size(v,[0,0]);\n\t\tif (d>0.1){\n\t\t    return [v[0]/d,v[1]/d];\n\t\t}else{\n\t\t    return [0,0];\n\t\t}\n\t},\n\n\tpos: function(x){\n\t\tif(x>0){\n\t\t\treturn x;\n\t\t}else{\n\t\t\treturn -x;\n\t\t}\n\t},\n\n  vectPos: function(x){\n    x.forEach(function(value,i){\n      if(value>0){\n        x[i]=value;\n      }else{\n        x[i]=-value;\n      }\n    });\n    return x;\n  },\n\n\tsign: function(x){\n\t\tif(x>0){\n\t\t\treturn 1;\n\t\t}else if(x<0){\n\t\t\treturn -1;\n\t\t}\n\t\treturn 0;\n\t},\n\n  dot: function(x,y){\n    return x[0]*y[0]+x[1]*y[1];\n  },\n\n  add: function(x,y){\n    return [x[0]+y[0],x[1]+y[1]];\n  },\n\n  perp: function(x){\n    return [-x[1],x[0]];\n  },\n\n  minus: function(x,y){\n    return [x[0]-y[0],x[1]-y[1]];\n  },\n\n  len: function(x){\n    return Math.sqrt(this.dot(x,x));\n  },\n\n  size: function(x,y){\n    var v= this.minus(x,y);\n    return Math.sqrt(this.dot(v,v));\n  },\n\n  dev: function(x,d){\n    return [x[0]/d,x[1]/d];\n  },\n\n  mult: function(x,d){\n    return [x[0]*d,x[1]*d];\n  },\n\n  multVec: function(x,v){\n    return [x[0]*v[0],x[1]*v[1]];\n  },\n\n  neg: function(x){\n    return [-x[0],-x[1]];\n  },\n\n  mod: function(n, m){\n      return ((n % m) + m) % m;\n  },\n\n  rot(deg,vector){\n    return [Math.cos(deg)*vector[0]-Math.sin(deg)*vector[1],Math.sin(deg)*vector[0]+Math.cos(deg)*vector[1]]\n  },\n\n  clockwiseAngleBetween(v,w){\n    //closwise angle from v to w.\n    var lenProduct=this.len(v)*this.len(w);\n    var dotProduct= this.dot(v,w);\n    var angleBetween= Math.acos(dotProduct/lenProduct);\n    if(this.dot(this.perp(v),w)<0){\n      return 2*Math.PI- angleBetween;\n    }else{\n      return angleBetween;\n    }\n  },\n\n  everySecond: function(list){\n    var newList=[];\n    for(var i=0;i<Math.ceil(list.length/2);i++){\n      newList.push(list[2*i]);\n    }\n    return newList;\n  },\n\n  shuffle: function(a){\n    //FisherYates shuffle\n    var temp;\n    var j;\n    for(var i=a.length-1;i>0;i--){\n      var j=Math.floor(Math.random()*i);\n      temp=a[j];\n      a[j]=a[i];\n      a[i]=temp;\n    }\n\n    return a;\n  },\n\n  shuffleStart: function(a){\n    var j=Math.floor(Math.random()*a.length);\n    var aNew=[];\n\n    var temp;\n    for(var i=0;i<a.length;i++){\n      aNew[i]=a[j];\n      j=(j+1)%a.length;\n    }\n\n    return aNew;\n  },\n\n  max: function(arr){\n    var max;\n    arr.forEach(function(a){\n      if(max<a||max==undefined){\n        max=a;\n      }\n    });\n    return max;\n  },\n\n  min: function(arr){\n    var min;\n    arr.forEach(function(a){\n      if(min>a||min==undefined){\n        min=a;\n      }\n    });\n    return min;\n  },\n\n  getIntListBounds: function(list){\n    var max=list[0];\n\t\tvar min=list[0];\n\t\tlist.forEach(function(element){\n\t\t\tif(element>max){\n\t\t\t\tmax=element;\n\t\t\t}else if(element<min){\n\t\t\t\tmin=element;\n\t\t\t}\n\t\t})\n    return [min,max];\n  },\n\n  getLineIntersections(p1,p2,p3,p4){\n\n    var report={\n      \"p\":[],\n      \"intersection\":false,\n      \"t1\":0,\n      \"t2\":0\n    }\n\n    var t1Top=(p3[1]-p4[1])*(p1[0]-p3[0])+(p4[0]-p3[0])*(p1[1]-p3[1]);\n    var t2Top=(p1[1]-p2[1])*(p1[0]-p3[0])+(p2[0]-p1[0])*(p1[1]-p3[1]);\n    var denom=(p4[0]-p3[0])*(p1[1]-p2[1])-(p1[0]-p2[0])*(p4[1]-p3[1]);\n\n    if(denom==0){\n      report.intersection=false;\n      return report;\n    }else{\n      var t1=t1Top/denom;\n      var t2=t2Top/denom;\n      report.t1=t1;\n      report.t2=t2;\n      report.p=this.add(p1,this.mult(this.minus(p2,p1),t1));\n      if(t1>0&&t1<1&&t2>0&&t2<1){\n        report.intersection=true;\n        return report;\n      }else{\n        report.intersection=false;\n        return report;\n      }\n    }\n  }\n}\n","var map = {\n\t\"./Constraints/AngleLink\": \"0e0a\",\n\t\"./Constraints/AngleLink.js\": \"0e0a\",\n\t\"./Constraints/Beam\": \"808c\",\n\t\"./Constraints/Beam.js\": \"808c\",\n\t\"./Constraints/Constraint\": \"65fb\",\n\t\"./Constraints/Constraint.js\": \"65fb\",\n\t\"./Constraints/Glue\": \"7010\",\n\t\"./Constraints/Glue.js\": \"7010\",\n\t\"./Constraints/Joint\": \"0a4b\",\n\t\"./Constraints/Joint.js\": \"0a4b\",\n\t\"./Constraints/Link\": \"1bd4\",\n\t\"./Constraints/Link.js\": \"1bd4\",\n\t\"./Construction/Builder\": \"7a30\",\n\t\"./Construction/Builder.js\": \"7a30\",\n\t\"./Construction/SL\": \"1c1b\",\n\t\"./Construction/SL.js\": \"1c1b\",\n\t\"./Features/Feature\": \"26f1\",\n\t\"./Features/Feature.js\": \"26f1\",\n\t\"./Features/featureInstances\": \"4c1f\",\n\t\"./Features/featureInstances.js\": \"4c1f\",\n\t\"./General/GeneralMethods\": \"ed9b\",\n\t\"./General/GeneralMethods.js\": \"ed9b\",\n\t\"./Laws/Law\": \"51ce\",\n\t\"./Laws/Law.js\": \"51ce\",\n\t\"./Laws/lawInstances\": \"d113\",\n\t\"./Laws/lawInstances.js\": \"d113\",\n\t\"./SpaceTime\": \"e774\",\n\t\"./SpaceTime.js\": \"e774\",\n\t\"./Structures/CollisionChecker\": \"a005\",\n\t\"./Structures/CollisionChecker.js\": \"a005\",\n\t\"./Structures/CollisionResponse\": \"883d\",\n\t\"./Structures/CollisionResponse.js\": \"883d\",\n\t\"./Structures/ConvexSet\": \"8ed7\",\n\t\"./Structures/ConvexSet.js\": \"8ed7\",\n\t\"./Structures/Line\": \"da07\",\n\t\"./Structures/Line.js\": \"da07\",\n\t\"./Structures/Particle\": \"3d50\",\n\t\"./Structures/Particle.js\": \"3d50\",\n\t\"./Structures/Point\": \"34ee\",\n\t\"./Structures/Point.js\": \"34ee\",\n\t\"./Structures/Primative\": \"1ecf\",\n\t\"./Structures/Primative.js\": \"1ecf\",\n\t\"./Structures/RelPoint\": \"22f4\",\n\t\"./Structures/RelPoint.js\": \"22f4\",\n\t\"./Structures/Structure\": \"64b6\",\n\t\"./Structures/Structure.js\": \"64b6\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"fe7c\";"],"sourceRoot":""}