{"version":3,"sources":["webpack:///./src/views/games/particles/js/particleTypes.js","webpack:///./src/views/games/particles/Game.vue?1693","webpack:///src/views/games/particles/Game.vue","webpack:///./src/views/games/particles/Game.vue?98e8","webpack:///./src/views/games/particles/Game.vue","webpack:///./node_modules/core-js/modules/_array-fill.js","webpack:///./src/views/games/particles/js/features.js","webpack:///./node_modules/core-js/modules/es6.array.fill.js","webpack:///./src/views/games/particles/js/build.js","webpack:///./src/views/games/particles/js/draw.js"],"names":["particleTypes","color","name","radius","render","_vm","this","_h","$createElement","_c","_self","attrs","staticRenderFns","data","canvas","canvasTop","canvasLeft","drawCtx","controller","running","finished","mounted","setupCanvas","enviro","loadEnviroment","draw","createAndstart","beforeDestroy","destroy","methods","document","getElementById","WIDTH","documentElement","clientWidth","HEIGHT","clientHeight","width","height","getContext","rect","getBoundingClientRect","top","left","build","handleMouseMove","getCanvasLoc","event","handleMouseClick","x","clientX","clientY","onkeydown","keyCode","restart","stop","start","createRunner","run","addEventListener","onkeyup","removeEventListener","component","toObject","toAbsoluteIndex","toLength","module","exports","value","O","length","aLen","arguments","index","undefined","end","endPos","gm","engine","GeneralMethods","cr","CollisionResponse","Feature","CollisionChecker","interactions","A","B","D","E","interactionLaws","interaction","structure1","structure2","interactionStrength","stuff","v","elements","y","colVector","norm","minus","update_x_xd","mult","reports","checkProximityTo","forEach","report","depth","particleResponse","$export","P","fill","Law","lawInstances","createEnvironment","ctx","builder","Builder","returnEnviro","i","Math","random","addParticle","points","point","structure","addStructure","particles","floor","laws","bowl","structures","Features","features","push","animationRef","timeStep","window","requestAnimationFrame","cancelAnimationFrame","cleanEnvironment","fillStyle","fillRect","particle","beginPath","arc","PI"],"mappings":"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","file":"js/chunk-62b148e0.de0605dc.js","sourcesContent":["export default {\n  particleTypes: [\n    {\n      color: \"#24c4a9\",\n      name: \"A\",\n      radius: 4\n    },\n    {\n      color: \"#a9c524\",\n      name: \"B\",\n      radius: 4\n    },\n    {\n      color: \"#c5242d\",\n      name: \"D\",\n      radius: 2\n    },\n    {\n      color: \"#29c524\",\n      name: \"E\",\n      radius: 2\n    },\n    {\n      color: \"#12debc\",\n      name: \"F\"\n    }\n  ]\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('canvas',{attrs:{\"id\":\"Canvas\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <canvas id=\"Canvas\" />\n</template>\n\n<script>\nimport builder from \"./js/build.js\";\nimport drawer from \"./js/draw.js\";\n\nexport default {\n  name: \"asteroids\",\n  data: function() {\n    return {\n      canvas: null,\n      canvasTop: null,\n      canvasLeft: null,\n      drawCtx: null,\n      controller: null,\n      running: false,\n      finished: false\n    };\n  },\n  mounted() {\n    this.setupCanvas();\n    var enviro = this.loadEnviroment();\n    this.draw(enviro);\n    this.createAndstart(enviro);\n  },\n  beforeDestroy: function() {\n    this.destroy();\n  },\n  methods: {\n    setupCanvas() {\n      var canvas = document.getElementById(\"Canvas\");\n      var WIDTH = document.documentElement.clientWidth;\n      var HEIGHT = document.documentElement.clientHeight;\n      canvas.width = WIDTH;\n      canvas.height = HEIGHT;\n      var drawCtx = canvas.getContext(\"2d\");\n      var rect = canvas.getBoundingClientRect();\n      this.canvas = canvas;\n      this.drawCtx = drawCtx;\n      this.canvasTop = rect.top;\n      this.canvasLeft = rect.left;\n    },\n    loadEnviroment: function() {\n      return builder.createEnvironment(this);\n    },\n    // input methods\n    handleMouseMove(event) {\n      var x = this.getCanvasLoc(event);  // eslint-disable-line\n    },\n    handleMouseClick(event) {\n      var x = this.getCanvasLoc(event); // eslint-disable-line\n    },\n    getCanvasLoc(event) {\n      return {\n        x: [event.clientX - this.canvasLeft, event.clientY - this.canvasTop]\n      };\n    },\n    onkeydown(event) {\n      if (!this.finished) {\n        event.keyCode == 32 && this.running ? this.stop() : this.start();\n      } else {\n        if (event.keyCode == 32) {\n          this.restart();\n          this.finished = false;\n        }\n      }\n    },\n    // game state methods\n    createAndstart(enviro) {\n      this.controller = this.createRunner(enviro);\n      this.controller.run();\n      this.running = true;\n      document.addEventListener(\"keydown\", this.onkeydown, false);\n      document.addEventListener(\"keyup\", this.onkeyup, false);\n    },\n    restart() {\n      if (this.controller) this.controller.destroy();\n      var enviro = this.loadEnviroment();\n      this.controller = this.createRunner(enviro);\n      this.controller.run();\n      this.running = true;\n    },\n    stop() {\n      if (this.controller) this.controller.stop();\n      this.running = false;\n    },\n    start() {\n      if (this.controller && !this.running) {\n        this.running = true;\n        this.controller.run();\n      }\n    },\n    destroy() {\n      if (this.controller) {\n        this.running = false;\n        this.controller.destroy();\n      }\n      document.removeEventListener(\"keydown\", this.onkeydown, false);\n      document.removeEventListener(\"keyup\", this.onkeyup, false);\n    },\n    createRunner(enviro) {\n      return builder.createRunner(this, enviro);\n    },\n    // drawing\n    draw(enviro) {\n      drawer.draw(this, enviro);\n    }\n  }\n};\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Game.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Game.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Game.vue?vue&type=template&id=4740461b&\"\nimport script from \"./Game.vue?vue&type=script&lang=js&\"\nexport * from \"./Game.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)\n'use strict';\nvar toObject = require('./_to-object');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nvar toLength = require('./_to-length');\nmodule.exports = function fill(value /* , start = 0, end = @length */) {\n  var O = toObject(this);\n  var length = toLength(O.length);\n  var aLen = arguments.length;\n  var index = toAbsoluteIndex(aLen > 1 ? arguments[1] : undefined, length);\n  var end = aLen > 2 ? arguments[2] : undefined;\n  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);\n  while (endPos > index) O[index++] = value;\n  return O;\n};\n","import engine from \"genesis-tubs-engine\";\nconst gm = engine.GeneralMethods;\nconst cr = engine.CollisionResponse;\nconst cc = engine.CollisionChecker;\nconst Feature = engine.Feature;\nimport particles from \"./particleTypes.js\";\n////////////////////////////////////////////////////////////////////////////////////////////////////\n////////////////////////////////////////////////////////////////////////////////////////////////////\n\nvar interactions = {\n  A: {\n    A: 0.1,\n    B: -0.03,\n    D: 0.01,\n    E: 0.01\n  },\n  B: {\n    B: 0.1,\n    A: -0.03,\n    D: 0.01,\n    E: 0.01\n  },\n  D: {\n    A: 0,\n    B: 0.1,\n    D: 0.05,\n    E: -0.05\n  },\n  E: {\n    A: 0.1,\n    B: 0,\n    D: -0.05,\n    E: 0.05\n  }\n};\n\nexport default {\n  interactionLaws: (function() {\n    var interactionLaws = new Feature(\"interactionLaws\");\n    interactionLaws.interaction = function(structure1, structure2) {\n      var interactionStrength =\n        interactions[structure1.stuff.v.name][structure2.stuff.v.name];\n      if (interactionStrength != undefined) {\n        interactionStrength = interactionStrength * 0.00005;\n        var x = structure1.elements[0].x;\n        var y = structure2.elements[0].x;\n        var colVector = gm.norm(gm.minus(x, y));\n        //update x & y:\n\n        structure1.elements[0].update_x_xd(\n          gm.mult(colVector, -interactionStrength)\n        );\n        structure2.elements[0].update_x_xd(\n          gm.mult(colVector, interactionStrength)\n        );\n\n        // structure1.stuff.v = types.find(p=>p.name == interactionType)\n        // structure2.stuff.v = types.find(p=>p.name == interactionType)\n      }\n\n      var reports = structure1.checkProximityTo(structure2, 0);\n      reports.forEach(function(report) {\n        if (\n          report.depth < 0 &&\n          structure1.stuff.v.name != \"D\" &&\n          structure2.stuff.v.name != \"D\" &&\n          structure1.stuff.v.name != \"E\" &&\n          structure2.stuff.v.name != \"E\"\n        ) {\n          cr.particleResponse(report);\n        }\n      });\n    };\n    return interactionLaws;\n  })()\n};\n","// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)\nvar $export = require('./_export');\n\n$export($export.P, 'Array', { fill: require('./_array-fill') });\n\nrequire('./_add-to-unscopables')('fill');\n","import engine from \"genesis-tubs-engine\";\nconst Law = engine.lawInstances;\nimport Features from \"./features.js\";\nimport particles from \"./particleTypes.js\";\n\nexport default {\n  // Setup physics environment\n  createEnvironment: function(ctx) {\n    var builder = new engine.Builder();\n    var enviro = builder.returnEnviro();\n\n    // ctx.canvasTop\n    // ctx.canvasLeft\n\n    for (var i = 0; i < 120; i++) {\n      var y = Math.random() * ctx.canvas.height;\n      var x = Math.random() * ctx.canvas.width;\n      builder.addParticle([x, y], 4, [0, 0]);\n    }\n\n    enviro.points.forEach(point => {\n      var structure = builder.addStructure([point], []);\n      structure.stuff.v =\n        particles.particleTypes[Math.floor(Math.random() * 4)];\n    });\n\n    enviro.laws.bowl = Law[\"bowl\"](\n      [ctx.canvas.width / 2, ctx.canvas.height / 2],\n      2\n    );\n    enviro.laws.bowl.structures = enviro.structures;\n\n    var interactions = Features.interactionLaws;\n    enviro.structures.forEach(function(structure) {\n      structure.features.push(interactions);\n    });\n    // enviro.timeStep();\n    return enviro;\n  },\n\n  createRunner: function(ctx, enviro) {\n    var draw = ctx.draw;\n    var animationRef;\n\n    function run() {\n      enviro.timeStep();\n      draw(enviro);\n      animationRef = window.requestAnimationFrame(run);\n    }\n\n    function stop() {\n      window.cancelAnimationFrame(animationRef);\n    }\n\n    function destroy() {\n      stop();\n      enviro.builder.cleanEnvironment();\n      // enviro = null;\n      animationRef = null;\n    }\n\n    return {\n      run: run,\n      stop: stop,\n      destroy: destroy\n    };\n  }\n};\n","import engine from \"genesis-tubs-engine\";\n\nexport default {\n  draw: function(ctx, enviro) {\n    // ctx.drawCtx.fillStyle = \"black\";\n    ctx.drawCtx.fillStyle = \"rgba(0, 0, 0, 1)\";\n    ctx.drawCtx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n\n    enviro.structures.forEach(particle => {\n      ctx.drawCtx.fillStyle = particle.stuff.v.color;\n      var point = particle.elements[0];\n      ctx.drawCtx.beginPath();\n      ctx.drawCtx.arc(\n        point.x[0],\n        point.x[1],\n        particle.stuff.v.radius,\n        0,\n        2 * Math.PI\n      );\n      ctx.drawCtx.fill();\n    });\n  }\n};\n"],"sourceRoot":""}